<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>
Raspberry Pi 1 Model B &middot; IT notes
</title>
    <link rel="stylesheet" href="https://nbari.com/slim.css">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet'
        type='text/css'>
    
    
</head>

<body>
    <div class="container">
        
<div class="header">
    <h1 class="site-title"><a href="https:&#x2F;&#x2F;nbari.com">IT notes</a></h1>
    <p class="site-tagline"></p>
    <div class="nav">
        <a class="nav-btn" href="#">
            <span class="ci ci-burger"></span>
        </a>
        <ul class="nav-list">
            
            
            <li><a href="https:&#x2F;&#x2F;nbari.com&#x2F;about&#x2F;">About</a></li>
            
            <li><a href="https:&#x2F;&#x2F;nbari.com&#x2F;tags">Tags</a></li>
            
            
            <li class="spacer">&ac;</li>
            
            
            <li><a href="https://github.com/nbari">Github</a></li>
            
            
        </ul>
    </div>
</div>

        <div class="content">
            <div class="posts">
                
<div class="post">
    
    
<h2 class="post-title"><a href="https:&#x2F;&#x2F;nbari.com&#x2F;rpi&#x2F;">Raspberry Pi 1 Model B</a></h2>
<div class="post-header">
    <span class="post-date">September 24, 2016</span>
    
    <div class="post-tags">
        
        <span class="post-tag">#<a href="https://nbari.com/tags/wifi/">wifi</a></span>
        
        <span class="post-tag">#<a href="https://nbari.com/tags/raspberry/">raspberry</a></span>
        
        <span class="post-tag">#<a href="https://nbari.com/tags/freebsd/">freebsd</a></span>
        
    </div>
    
</div>

    <div class="post-content">
        <h1 id="raspberry-pi-1-model-b-freebsd-wifi"><a class="zola-anchor" href="#raspberry-pi-1-model-b-freebsd-wifi" aria-label="Anchor link for: raspberry-pi-1-model-b-freebsd-wifi">ðŸ”—</a>Raspberry Pi 1 Model B, FreeBSD + wifi</h1>
<p><img src="/img/rpi-b.jpg" alt="RPI-b" /></p>
<p>cat /var/run/dmesg.boot:</p>
<pre data-lang="text" style="background-color:#2b303b;color:#c0c5ce;" class="language-text "><code class="language-text" data-lang="text"><span>KDB: debugger backends: ddb
</span><span>KDB: current backend: ddb
</span><span>Copyright (c) 1992-2016 The FreeBSD Project.
</span><span>Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
</span><span>	The Regents of the University of California. All rights reserved.
</span><span>FreeBSD is a registered trademark of The FreeBSD Foundation.
</span><span>FreeBSD 10.3-RELEASE #0 r297264: Fri Mar 25 08:01:14 UTC 2016
</span><span>    root@releng1.nyi.freebsd.org:/usr/obj/arm.armv6/usr/src/sys/RPI-B arm
</span><span>FreeBSD clang version 3.4.1 (tags/RELEASE_34/dot1-final 208032) 20140512
</span><span>VT: init without driver.
</span><span>CPU: ARM1176JZ-S rev 7 (ARM11J core)
</span><span> Supported features: ARM_ISA THUMB2 JAZELLE ARMv4 Security_Ext
</span><span> WB enabled LABT branch prediction enabled
</span><span>  16KB/32B 4-way instruction cache
</span><span>  16KB/32B 4-way write-back-locking-C data cache
</span><span>real memory  = 503312384 (479 MB)
</span><span>avail memory = 483127296 (460 MB)
</span><span>random: &lt;Software, Yarrow&gt; initialized
</span><span>kbd0 at kbdmux0
</span><span>ofwbus0: &lt;Open Firmware Device Tree&gt;
</span><span>simplebus0: &lt;Flattened device tree simple bus&gt; mem 0x20000000-0x20ffffff on ofwbus0
</span><span>cpulist0: &lt;Open Firmware CPU Group&gt; on ofwbus0
</span><span>cpu0: &lt;Open Firmware CPU&gt; on cpulist0
</span><span>bcm2835_cpufreq0: &lt;CPU Frequency Control&gt; on cpu0
</span><span>intc0: &lt;BCM2835 Interrupt Controller&gt; mem 0xb200-0xb3ff on simplebus0
</span><span>systimer0: &lt;BCM2835 System Timer&gt; mem 0x3000-0x3fff irq 8,9,10,11 on simplebus0
</span><span>Event timer &quot;BCM2835 Event Timer 3&quot; frequency 1000000 Hz quality 1000
</span><span>Timecounter &quot;BCM2835 Timecounter&quot; frequency 1000000 Hz quality 1000
</span><span>bcmwd0: &lt;BCM2708/2835 Watchdog&gt; mem 0x10001c-0x100027 on simplebus0
</span><span>gpio0: &lt;BCM2708/2835 GPIO controller&gt; mem 0x200000-0x2000af irq 57,59,58,60 on simplebus0
</span><span>gpio0: read-only pins: 46,47,48,49,50,51,52,53.
</span><span>gpio0: reserved pins: 48,49,50,51,52,53.
</span><span>gpioc0: &lt;GPIO controller&gt; on gpio0
</span><span>gpiobus0: &lt;OFW GPIO bus&gt; on gpio0
</span><span>gpioled0: &lt;GPIO led&gt; at pin(s) 16 on gpiobus0
</span><span>iichb0: &lt;BCM2708/2835 BSC controller&gt; mem 0x205000-0x20501f irq 61 on simplebus0
</span><span>iicbus0: &lt;OFW I2C bus&gt; on iichb0
</span><span>iic0: &lt;I2C generic I/O&gt; on iicbus0
</span><span>iichb1: &lt;BCM2708/2835 BSC controller&gt; mem 0x804000-0x80401f irq 61 on simplebus0
</span><span>iicbus1: &lt;OFW I2C bus&gt; on iichb1
</span><span>iic1: &lt;I2C generic I/O&gt; on iicbus1
</span><span>spi0: &lt;BCM2708/2835 SPI controller&gt; mem 0x204000-0x20401f irq 62 on simplebus0
</span><span>spibus0: &lt;OFW SPI bus&gt; on spi0
</span><span>bcm_dma0: &lt;BCM2835 DMA Controller&gt; mem 0x7000-0x7fff,0xe05000-0xe05fff irq 24,25,26,27,28,29,30,31,32,33,34,35,36 on simplebus0
</span><span>mbox0: &lt;BCM2835 VideoCore Mailbox&gt; mem 0xb880-0xb8bf irq 1 on simplebus0
</span><span>sdhci_bcm0: &lt;Broadcom 2708 SDHCI controller&gt; mem 0x300000-0x3000ff irq 70 on simplebus0
</span><span>mmc0: &lt;MMC/SD bus&gt; on sdhci_bcm0
</span><span>uart0: &lt;PrimeCell UART (PL011)&gt; mem 0x201000-0x201fff irq 65 on simplebus0
</span><span>uart0: console (115200,n,8,1)
</span><span>dwcotg0: &lt;DWC OTG 2.0 integrated USB controller&gt; mem 0x980000-0x99ffff irq 17 on simplebus0
</span><span>usbus0 on dwcotg0
</span><span>fb0: &lt;BCM2835 VT framebuffer driver&gt; on ofwbus0
</span><span>Timecounters tick every 10.000 msec
</span><span>usbus0: 480Mbps High Speed USB v2.0
</span><span>bcm2835_cpufreq0: ARM 700MHz, Core 250MHz, SDRAM 398MHz, Turbo OFF
</span><span>ugen0.1: &lt;DWCOTG&gt; at usbus0
</span><span>uhub0: &lt;DWCOTG OTG Root HUB, class 9/0, rev 2.00/1.00, addr 1&gt; on usbus0
</span><span>mmcsd0: 4GB &lt;SDHC SA04G 0.3 SN 9C4F1E62 MFG 05/2009 by 2 TM&gt; at mmc0 41.6MHz/4bit/65535-block
</span><span>fb0: 656x416(0x0@0,0) 16bpp
</span><span>fb0: pitch 1312, base 0x5e006000, screen_size 545792
</span><span>fbd0 on fb0
</span><span>VT: initialize with new VT driver &quot;fb&quot;.
</span><span>random: unblocking device.
</span><span>Root mount waiting for: usbus0
</span><span>uhub0: 1 port with 1 removable, self powered
</span><span>ugen0.2: &lt;vendor 0x0424&gt; at usbus0
</span><span>uhub1: &lt;vendor 0x0424 product 0x9512, class 9/0, rev 2.00/2.00, addr 2&gt; on usbus0
</span><span>uhub1: MTT enabled
</span><span>Root mount waiting for: usbus0
</span><span>uhub1: 3 ports with 2 removable, self powered
</span><span>Root mount waiting for: usbus0
</span><span>ugen0.3: &lt;vendor 0x0424&gt; at usbus0
</span><span>smsc0: &lt;vendor 0x0424 product 0xec00, rev 2.00/2.00, addr 3&gt; on usbus0
</span><span>smsc0: chip 0xec00, rev. 0002
</span><span>miibus0: &lt;MII bus&gt; on smsc0
</span><span>ukphy0: &lt;Generic IEEE 802.3u media interface&gt; PHY 1 on miibus0
</span><span>ukphy0:  none, 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
</span><span>ue0: &lt;USB Ethernet&gt; on smsc0
</span><span>ue0: Ethernet address: b8:27:ab:28:f0:f7
</span><span>ugen0.4: &lt;vendor 0x0bda&gt; at usbus0
</span><span>Trying to mount root from ufs:/dev/ufs/rootfs [rw]...
</span><span>warning: no time-of-day clock registered, system time will not be set accurately
</span><span>smsc0: chip 0xec00, rev. 0002
</span><span>ue0: link state changed to DOWN
</span><span>urtwn0: &lt;vendor 0x0bda product 0x8176, class 0/0, rev 2.00/2.00, addr 4&gt; on usbus0
</span><span>urtwn0: MAC/BB RTL8188CUS, RF 6052 1T1R
</span><span>wlan0: Ethernet address: e8:4a:05:35:47:12
</span><span>wlan0: link state changed to UP
</span></code></pre>
<p>EDUP WiFi adapter mini USB dongle</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>urtwn0: &lt;vendor 0x0bda product 0x8176, class 0/0, rev 2.00/2.00, addr 4&gt; on usbus0
</span><span>urtwn0: MAC/BB RTL8188CUS, RF 6052 1T1R
</span></code></pre>
<p><img src="/img/edup802.11N.jpg" alt="EDUP" /></p>
<p>Download the FreeBSD SD card image from: https://www.freebsd.org/where.html</p>
<p>Find your SD:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>$ diskutil list
</span></code></pre>
<p>Unmount the disk in this case disk3:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>$ diskutil unmountDisk /dev/disk3
</span></code></pre>
<p>Copy the img to the SD card:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>$ sudo dd bs=1m if=freebsd.img of=/dev/rdisk3
</span></code></pre>
<h2 id="setup-the-wifi"><a class="zola-anchor" href="#setup-the-wifi" aria-label="Anchor link for: setup-the-wifi">ðŸ”—</a>Setup the Wifi</h2>
<p>Add to <code>/boot/loader.conf</code>:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>legal.realtek.license_ack=1
</span></code></pre>
<p>Edit rc.conf:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>wlans_urtwn0=&quot;wlan0&quot;
</span><span>ifconfig_wlan0=&quot;ssid your.sid WPA DHCP&quot;
</span></code></pre>
<p>Edit <code>/etc/wpa_supplicant.conf</code>:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>network={
</span><span>	ssid=&quot;your.sid&quot;
</span><span>	scan_ssid=1
</span><span>	proto=WPA RSN
</span><span>	pairwise=CCMP
</span><span>	psk=&quot;*password*&quot;
</span><span>	priority=5
</span><span>}
</span></code></pre>
<p>Cron to ping every minute to the gateway:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>* * * * * /sbin/ping -c 3 192.168.1.1 &gt; /tmp/ping.out
</span></code></pre>
<h2 id="login"><a class="zola-anchor" href="#login" aria-label="Anchor link for: login">ðŸ”—</a>login</h2>
<p>Default user/password:</p>
<pre data-lang="text" style="background-color:#2b303b;color:#c0c5ce;" class="language-text "><code class="language-text" data-lang="text"><span>root:root
</span><span>freebsd:freebsd
</span></code></pre>
<p>The <code>freebsd</code> user can be used to ssh and latter <code>su</code></p>

    </div>
    
</div>

            </div>
            
        </div>
        
<div class="footer">
    
    <p>ðŸŒ±</p>
    
</div>

    </div>
    <script src="https://nbari.com/js/slim.js"></script>
    
</body>

</html>