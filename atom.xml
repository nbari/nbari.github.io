<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>IT notes</title>
    <link rel="self" type="application/atom+xml" href="https://nbari.com/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://nbari.com"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-06-27T16:38:29+00:00</updated>
    <id>https://nbari.com/atom.xml</id>
    <entry xml:lang="en">
        <title>pyenv pipx</title>
        <published>2025-06-27T16:38:29+00:00</published>
        <updated>2025-06-27T16:38:29+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pyenv-tools/"/>
        <id>https://nbari.com/pyenv-tools/</id>
        
        <content type="html" xml:base="https://nbari.com/pyenv-tools/">&lt;p&gt;Create a &lt;code&gt;tools&lt;&#x2F;code&gt; virtual environment using &lt;code&gt;pyenv&lt;&#x2F;code&gt;, to install tools like &lt;code&gt;pipx&lt;&#x2F;code&gt; and other Python utilities.:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pyenv&lt;&#x2F;span&gt;&lt;span&gt; virtualenv tools
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;if need a special Python version, use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pyenv&lt;&#x2F;span&gt;&lt;span&gt; virtualenv 3.13.5 tools
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Activate the tools virtual environment:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pyenv&lt;&#x2F;span&gt;&lt;span&gt; activate tools
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install &lt;code&gt;pipx&lt;&#x2F;code&gt; in the tools virtual environment:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install pipx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now run the &lt;code&gt;pipx ensurepath&lt;&#x2F;code&gt; command to ensure that the &lt;code&gt;pipx&lt;&#x2F;code&gt; binary is in your PATH:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; ensurepath
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Normally the path is &lt;code&gt;$HOME&#x2F;.local&#x2F;bin&lt;&#x2F;code&gt;, and the apps will be simlinked there.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Now install ansible using &lt;code&gt;pipx&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; install ansible
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or a specicfic version of Ansible, like for example to cover this problem: &lt;a href=&quot;https:&#x2F;&#x2F;nbari.com&#x2F;pipx-ansible&#x2F;&quot;&gt;SyntaxError: future feature annotations is not defined&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; install ansible-core==2.16.8
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; inject ansible-core passlib
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can now deactivate the tools virtual environment:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pyenv&lt;&#x2F;span&gt;&lt;span&gt; deactivate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then for example to install ansible collections, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install ansible.posix
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install ansible.utils
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install community.crypto
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install community.general
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install community.hashi_vault
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install community.mysql
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection install community.postgresql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To list the installed collections, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ansible-galaxy&lt;&#x2F;span&gt;&lt;span&gt; collection list
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>faillock</title>
        <published>2025-05-25T18:17:45+00:00</published>
        <updated>2025-05-25T18:17:45+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/faillock/"/>
        <id>https://nbari.com/faillock/</id>
        
        <content type="html" xml:base="https://nbari.com/faillock/">&lt;p&gt;If you enter the wrong password too many times, your account may be locked out.
The &lt;code&gt;faillock&lt;&#x2F;code&gt; command is used to manage this lockout mechanism.&lt;&#x2F;p&gt;
&lt;p&gt;Check the current lockout status with:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;faillock --user &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;username&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you still have access to the system, you can unlock your account by using
the &lt;code&gt;faillock&lt;&#x2F;code&gt; command.&lt;&#x2F;p&gt;
&lt;p&gt;If you want to reset the lockout for a specific user, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;faillock --user &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;username&amp;gt; --reset
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rm&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;var&#x2F;run&#x2F;faillock&#x2F;myUsername
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The directory where the faillock records are stored is typically
&lt;code&gt;&#x2F;var&#x2F;run&#x2F;faillock&#x2F;&lt;&#x2F;code&gt;. You can view the contents of this directory to see the
lockout records.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ls -l&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;var&#x2F;run&#x2F;faillock&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>URL encode using jq</title>
        <published>2025-05-22T16:29:32+00:00</published>
        <updated>2025-05-22T16:29:32+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/url-encode-jq/"/>
        <id>https://nbari.com/url-encode-jq/</id>
        
        <content type="html" xml:base="https://nbari.com/url-encode-jq/">&lt;p&gt;When using pgcli and if want to use -D &amp;lt;alias_dsn&amp;gt; if your password is using special characters, you can use jq to URL encode the password.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-n &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;My@Secure:Pa$$word&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jq -Rr&lt;&#x2F;span&gt;&lt;span&gt; @uri
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>dropbox-cli No module named &#x27;gi&#x27;</title>
        <published>2025-03-15T12:58:37+00:00</published>
        <updated>2025-03-15T12:58:37+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/dropbox/"/>
        <id>https://nbari.com/dropbox/</id>
        
        <content type="html" xml:base="https://nbari.com/dropbox/">&lt;p&gt;When trying to install &lt;code&gt;dropbox-cli&lt;&#x2F;code&gt; on a Linux system, you may encounter the following error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;..&#x2F;dropbox-cli&#x2F;src&#x2F;nautilus-dropbox-2024.04.17&#x2F;build_dropbox.py&amp;quot;, line 2, in &amp;lt;module&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    import gi
&lt;&#x2F;span&gt;&lt;span&gt;ModuleNotFoundError: No module named &amp;#39;gi&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;==&amp;gt; ERROR: A failure occurred in build().
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try to install &lt;code&gt;pygobject&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install pygobject
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then try to install &lt;code&gt;dropbox-cli&lt;&#x2F;code&gt; again:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;paru -Syu&lt;&#x2F;span&gt;&lt;span&gt; dropbox-cli
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ethtool tso offloading</title>
        <published>2025-03-07T13:03:06+00:00</published>
        <updated>2025-03-07T13:03:06+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ethtool-tso/"/>
        <id>https://nbari.com/ethtool-tso/</id>
        
        <content type="html" xml:base="https://nbari.com/ethtool-tso/">&lt;p&gt;If you are experiencing slow network performance on a Linux server, it might be
due to offloading features of the network card. Offloading is a technique used
by network cards to offload the processing of network traffic from the CPU to
the network card. This can improve performance by reducing the load on the CPU,
but it can also cause problems if the network card is not properly configured.&lt;&#x2F;p&gt;
&lt;p&gt;To check the current offloading settings of a network card, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ethool -k&lt;&#x2F;span&gt;&lt;span&gt; eth0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To disable offloading features, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ethtool -K&lt;&#x2F;span&gt;&lt;span&gt; eth1 tso off gso off gro off
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To enable them again, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ethtool -K&lt;&#x2F;span&gt;&lt;span&gt; eth1 tso on gso on gro on
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For example, this is the output of &lt;code&gt;iperf3&lt;&#x2F;code&gt; with offloading enabled:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;-----------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;[ ID] Interval           Transfer     Bitrate
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   0.00-1.00   sec  83.4 MBytes   700 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   1.00-2.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   2.00-3.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   3.00-4.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   4.00-5.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   5.00-6.00   sec  82.6 MBytes   693 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   6.00-7.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   7.00-8.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   8.00-9.00   sec  82.5 MBytes   692 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   9.00-10.00  sec  82.4 MBytes   691 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;[  5]  10.00-10.00  sec   191 KBytes   691 Mbits&#x2F;sec
&lt;&#x2F;span&gt;&lt;span&gt;- - - - - - - - - - - - - - - - - - - - - - - - -
&lt;&#x2F;span&gt;&lt;span&gt;[ ID] Interval           Transfer     Bitrate
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   0.00-10.00  sec   826 MBytes   693 Mbits&#x2F;sec                  receiver
&lt;&#x2F;span&gt;&lt;span&gt;-----------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;Server listening on 5201 (test #3)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And after disabling offloading:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   0.00-1.00   sec   113 MBytes   948 Mbits&#x2F;sec    0    379 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   1.00-2.00   sec   113 MBytes   945 Mbits&#x2F;sec    0    379 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   2.00-3.00   sec   112 MBytes   942 Mbits&#x2F;sec    0    397 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   3.00-4.00   sec   112 MBytes   942 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   4.00-5.00   sec   112 MBytes   939 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   5.00-6.00   sec   112 MBytes   941 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   6.00-7.00   sec   112 MBytes   943 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   7.00-8.00   sec   112 MBytes   941 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   8.00-9.00   sec   112 MBytes   942 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   9.00-10.00  sec   112 MBytes   939 Mbits&#x2F;sec    0    414 KBytes
&lt;&#x2F;span&gt;&lt;span&gt;- - - - - - - - - - - - - - - - - - - - - - - - -
&lt;&#x2F;span&gt;&lt;span&gt;[ ID] Interval           Transfer     Bitrate         Retr
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   0.00-10.00  sec  1.10 GBytes   942 Mbits&#x2F;sec    0             sender
&lt;&#x2F;span&gt;&lt;span&gt;[  5]   0.00-10.00  sec  1.10 GBytes   941 Mbits&#x2F;sec                  receiver
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;if you disable offloading you may notice more CPU usage, but the network performance should be better.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pdf merge</title>
        <published>2025-01-15T10:08:26+00:00</published>
        <updated>2025-01-15T10:08:26+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pdf-merge/"/>
        <id>https://nbari.com/pdf-merge/</id>
        
        <content type="html" xml:base="https://nbari.com/pdf-merge/">&lt;p&gt;To merge only the first page of two PDF files, you can use the following command:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qpdf --empty --pages&lt;&#x2F;span&gt;&lt;span&gt; pdf1.pdf 1 pdf2.pdf 1 -- output.pdf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>versionlock</title>
        <published>2025-01-09T18:00:24+00:00</published>
        <updated>2025-01-09T18:00:24+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/versionlock/"/>
        <id>https://nbari.com/versionlock/</id>
        
        <content type="html" xml:base="https://nbari.com/versionlock/">&lt;p&gt;To lock the version of a package, you can use &lt;code&gt;versionlock&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;yum&lt;&#x2F;span&gt;&lt;span&gt; versionlock add openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or with dnf:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dnf&lt;&#x2F;span&gt;&lt;span&gt; versionlock add openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To see the list of locked packages:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;yum&lt;&#x2F;span&gt;&lt;span&gt; versionlock list
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or with dnf:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dnf&lt;&#x2F;span&gt;&lt;span&gt; versionlock list
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove a package from the list:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;yum&lt;&#x2F;span&gt;&lt;span&gt; versionlock delete openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or with dnf:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dnf&lt;&#x2F;span&gt;&lt;span&gt; versionlock delete openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pip-review</title>
        <published>2024-11-16T18:26:44+00:00</published>
        <updated>2024-11-16T18:26:44+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pip-review/"/>
        <id>https://nbari.com/pip-review/</id>
        
        <content type="html" xml:base="https://nbari.com/pip-review/">&lt;p&gt;To upgrade all packages installed with pip:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install pip-review
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then run:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip-review --auto
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;As an alternative, you can use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; list&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --outdated &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;NR &amp;gt; 2 {print $1}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xargs -n1&lt;&#x2F;span&gt;&lt;span&gt; pip install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --upgrade
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>proxmox ssh port</title>
        <published>2024-10-30T09:02:57+00:00</published>
        <updated>2024-10-30T09:02:57+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/proxmox-ssh-port/"/>
        <id>https://nbari.com/proxmox-ssh-port/</id>
        
        <content type="html" xml:base="https://nbari.com/proxmox-ssh-port/">&lt;p&gt;If you change the proxmox ssh port modify the &lt;code&gt;&#x2F;root&#x2F;.ssh&#x2F;config&lt;&#x2F;code&gt; file to include the new port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Host 10.0.1.2 10.0.1.3 10.0.1.4
&lt;&#x2F;span&gt;&lt;span&gt;   Port 2222
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pipx ansible</title>
        <published>2024-10-25T19:46:32+00:00</published>
        <updated>2024-10-25T19:46:32+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pipx-ansible/"/>
        <id>https://nbari.com/pipx-ansible/</id>
        
        <content type="html" xml:base="https://nbari.com/pipx-ansible/">&lt;p&gt;Install &lt;code&gt;pipx&lt;&#x2F;code&gt; with &lt;code&gt;ansible&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span&gt; install pipx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To prevent the following error: (mainly in redhat 8)&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SyntaxError: future feature annotations is not defined
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install ansible &amp;lt; 2.17:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; install ansible-core==2.16.8
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add passlib:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pipx&lt;&#x2F;span&gt;&lt;span&gt; inject ansible-core passlib
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pip offline</title>
        <published>2024-08-12T16:06:55+00:00</published>
        <updated>2024-08-12T16:06:55+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pip-offline/"/>
        <id>https://nbari.com/pip-offline/</id>
        
        <content type="html" xml:base="https://nbari.com/pip-offline/">&lt;p&gt;To install pip packages offline first download all the packages, for example to
install &lt;code&gt;pgcli&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; download pgcli&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -d&lt;&#x2F;span&gt;&lt;span&gt; packages_downloads
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then you can &lt;code&gt;tar&lt;&#x2F;code&gt; and share the file to your offline server:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;share&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-share &quot;&gt;&lt;code class=&quot;language-share&quot; data-lang=&quot;share&quot;&gt;&lt;span&gt;tar -cf pgcli.tar.gz package_downloads&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the server without internet you can unarchive to dir named &lt;code&gt;wrk&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tar -xvf&lt;&#x2F;span&gt;&lt;span&gt; pgcli.tar.gz wrk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to install do:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --no-index --find-links &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.&#x2F;wrk&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; .&#x2F;wrk&#x2F;pgcli-4.1.0-py3-none-any.whl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Swap usage</title>
        <published>2024-08-07T06:43:48+00:00</published>
        <updated>2024-08-07T06:43:48+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/swap-usage/"/>
        <id>https://nbari.com/swap-usage/</id>
        
        <content type="html" xml:base="https://nbari.com/swap-usage/">&lt;p&gt;Get a swap usage by pid&#x2F;command:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ps -e -o&lt;&#x2F;span&gt;&lt;span&gt; pid,comm&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --no-headers &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;read &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-r&lt;&#x2F;span&gt;&lt;span&gt; pid comm; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;swap&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; Swap &#x2F;proc&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pid&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;smaps &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;dev&#x2F;null &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{ sum += $2 } END { print sum }&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-n &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;swap&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;] &lt;&#x2F;span&gt;&lt;span&gt;&amp;amp;&amp;amp; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;PID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pid&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; - Swap used: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;swap&lt;&#x2F;span&gt;&lt;span&gt;:-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0} kB - Command: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;comm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sort -k6 -nr
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Using Top:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;top -o&lt;&#x2F;span&gt;&lt;span&gt; SWAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -bn1 &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;head -n20
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Get vault token</title>
        <published>2024-08-06T16:17:25+00:00</published>
        <updated>2024-08-06T16:17:25+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/get-vault-token/"/>
        <id>https://nbari.com/get-vault-token/</id>
        
        <content type="html" xml:base="https://nbari.com/get-vault-token/">&lt;p&gt;Get a &lt;code&gt;vault&lt;&#x2F;code&gt; token and request a new one only if expired using direnv and 1password cli:&lt;&#x2F;p&gt;
&lt;p&gt;The script:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;bash
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Determine the full path of the current script
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_PATH&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;realpath &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Extract directory names for the suffix
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_DIR&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dirname &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_PATH&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CURRENT_DIR&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;basename &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_DIR&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PARENT_DIR&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;basename &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dirname &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_DIR&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GRANDPARENT_DIR&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;basename &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dirname &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dirname &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCRIPT_DIR&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Construct the suffix and token file path
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SUFFIX&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GRANDPARENT_DIR&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}-&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PARENT_DIR&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}-&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CURRENT_DIR&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOME&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;.vault_token-&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SUFFIX&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}.json&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Function to fetch a new token from Vault
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;fetch_new_token&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;local &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;retries&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;local &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;attempt&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while &lt;&#x2F;span&gt;&lt;span&gt;((attempt &amp;lt;= retries)); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GITHUB_TOKEN&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;op&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; read &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;op:&#x2F;&#x2F;Private&#x2F;Github&#x2F;token&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vault&lt;&#x2F;span&gt;&lt;span&gt; login&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -method&lt;&#x2F;span&gt;&lt;span&gt;=github token=&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GITHUB_TOKEN&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -format&lt;&#x2F;span&gt;&lt;span&gt;=json | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tee &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&#x2F;dev&#x2F;null; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt; 2
&lt;&#x2F;span&gt;&lt;span&gt;        ((attempt++))
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to fetch token after &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;retries&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; attempts. Exiting.&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;exit&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Check if the token file exists and is valid
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-f &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LEASE_DURATION&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jq -r &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.auth.lease_duration&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FILE_CREATION_TIME&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;stat -c &lt;&#x2F;span&gt;&lt;span&gt;%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Z &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CURRENT_TIME&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;date&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; +&lt;&#x2F;span&gt;&lt;span&gt;%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;EXPIRATION_TIME&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;((FILE_CREATION_TIME &lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; LEASE_DURATION))
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CURRENT_TIME&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-ge &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;EXPIRATION_TIME&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch_new_token
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch_new_token
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Export the token
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VAULT_TOKEN&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jq -r &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.auth.client_token&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VAULT_TOKEN&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; = &amp;quot;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error: Failed to read VAULT_TOKEN from &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TOKEN_FILE&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;exit&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;export VAULT_TOKEN=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VAULT_TOKEN&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In &lt;code&gt;.envrc&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VAULT_ADDR&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;https:&#x2F;&#x2F;vault.your.host
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;eval &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;get_token.sh&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will create and store the token in &lt;code&gt;$HOME&#x2F;.vault_token-&amp;lt;path&amp;gt;.json&lt;&#x2F;code&gt;, for
example, if your project is in &lt;code&gt;&#x2F;home&#x2F;projects&#x2F;company&#x2F;vault&#x2F;test&lt;&#x2F;code&gt;, file will be stored in:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;~&#x2F;.vault_token-company-vault-test.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That will cover your &lt;code&gt;TEST&lt;&#x2F;code&gt; env, for &lt;code&gt;PROD&lt;&#x2F;code&gt; maybe you have something like:
&lt;code&gt;&#x2F;home&#x2F;projects&#x2F;company&#x2F;vault&#x2F;prod&lt;&#x2F;code&gt;, file will be stored in:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;~&#x2F;.vault_token-company-vault-prod.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>proxmox cpu</title>
        <published>2024-07-30T06:47:34+00:00</published>
        <updated>2024-07-30T06:47:34+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/proxmox-cpu/"/>
        <id>https://nbari.com/proxmox-cpu/</id>
        
        <content type="html" xml:base="https://nbari.com/proxmox-cpu/">&lt;p&gt;To change CPU type to &lt;code&gt;host&lt;&#x2F;code&gt;, unmount CD ISO and enable start on boot:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;mapfile &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-t&lt;&#x2F;span&gt;&lt;span&gt; vm_ids &amp;lt; &amp;lt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; list | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;NR&amp;gt;1 {print $1}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Changing CPU type to host and enabling start on boot for each VM
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt; vm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm_ids[@]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Change CPU type to host
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; set &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --cpu&lt;&#x2F;span&gt;&lt;span&gt; host; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Successfully changed CPU type to host for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to change CPU type to host for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Unmount CD ISO
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; set &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -ide2&lt;&#x2F;span&gt;&lt;span&gt; none; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Successfully unmounted CD ISO for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to unmount CD ISO for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Enable start on boot
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; set &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --onboot&lt;&#x2F;span&gt;&lt;span&gt; 1; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Successfully enabled start on boot for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to enable start on boot for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>proxmox tablet</title>
        <published>2024-07-30T06:12:59+00:00</published>
        <updated>2024-07-30T06:12:59+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/proxmox-tablet/"/>
        <id>https://nbari.com/proxmox-tablet/</id>
        
        <content type="html" xml:base="https://nbari.com/proxmox-tablet/">&lt;p&gt;If you are not using GUI remove &quot;use pointe for tablet&quot; to save some CPU:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;mapfile &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-t&lt;&#x2F;span&gt;&lt;span&gt; vm_ids &amp;lt; &amp;lt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; list | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;NR&amp;gt;1 {print $1}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt; vm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm_ids[@]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;qm&lt;&#x2F;span&gt;&lt;span&gt; set &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --tablet&lt;&#x2F;span&gt;&lt;span&gt; 0; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Successfully disabled tablet for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to disable tablet for VM ID: &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>proxmox vlan</title>
        <published>2024-06-26T14:42:50+00:00</published>
        <updated>2024-06-26T14:42:50+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/proxmox-vlan/"/>
        <id>https://nbari.com/proxmox-vlan/</id>
        
        <content type="html" xml:base="https://nbari.com/proxmox-vlan/">&lt;p&gt;If you have a single network interface and want to have your VM&#x27;s in a VLAN,
modify the &lt;code&gt;&#x2F;etc&#x2F;network&#x2F;interfaces&lt;&#x2F;code&gt; to look something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;config&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-config &quot;&gt;&lt;code class=&quot;language-config&quot; data-lang=&quot;config&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auto &lt;&#x2F;span&gt;&lt;span&gt;lo
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iface &lt;&#x2F;span&gt;&lt;span&gt;lo inet loopback
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iface &lt;&#x2F;span&gt;&lt;span&gt;eno1 inet manual
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auto &lt;&#x2F;span&gt;&lt;span&gt;vmbr0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iface &lt;&#x2F;span&gt;&lt;span&gt;vmbr0 inet static
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;address &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;192.168.0.2&#x2F;24
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gateway &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;192.168.0.1
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-ports &lt;&#x2F;span&gt;&lt;span&gt;eno1
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-stp &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;off
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-fd &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auto &lt;&#x2F;span&gt;&lt;span&gt;vmbr1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iface &lt;&#x2F;span&gt;&lt;span&gt;vmbr1 inet manual
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-ports &lt;&#x2F;span&gt;&lt;span&gt;eno1.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;20
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-stp &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;off
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge-fd &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iface &lt;&#x2F;span&gt;&lt;span&gt;eno1.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;20&lt;&#x2F;span&gt;&lt;span&gt; inet manual
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vlan-raw-device &lt;&#x2F;span&gt;&lt;span&gt;eno1
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;source &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;etc&#x2F;network&#x2F;interfaces.d&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;*
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After modifying apply the changes:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; restart networking
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case, thee is only one interface &lt;code&gt;eno1&lt;&#x2F;code&gt; and the VLAN-ID is &lt;code&gt;20&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>gnome-libsecret</title>
        <published>2024-06-16T12:37:42+00:00</published>
        <updated>2024-06-16T12:37:42+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gnome-libsecret/"/>
        <id>https://nbari.com/gnome-libsecret/</id>
        
        <content type="html" xml:base="https://nbari.com/gnome-libsecret/">&lt;p&gt;If running Gnome, Hyperland and want to use
&lt;a href=&quot;https:&#x2F;&#x2F;www.getmailspring.com&#x2F;&quot;&gt;Mailspring&lt;&#x2F;a&gt;, modify:
&lt;code&gt;&#x2F;usr&#x2F;share&#x2F;applications&#x2F;Mailspring.desktop&lt;&#x2F;code&gt; to use &lt;code&gt;gnome-libsecret&lt;&#x2F;code&gt; change line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Exec=mailspring %U
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Exec=mailspring --password-store=&amp;quot;gnome-libsecret&amp;quot; %U
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;File may looks something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[Desktop Entry]
&lt;&#x2F;span&gt;&lt;span&gt;Name=Mailspring
&lt;&#x2F;span&gt;&lt;span&gt;Comment=The best email app for people and teams at work
&lt;&#x2F;span&gt;&lt;span&gt;GenericName=Mail Client
&lt;&#x2F;span&gt;&lt;span&gt;Exec=mailspring --password-store=&amp;quot;gnome-libsecret&amp;quot; %U
&lt;&#x2F;span&gt;&lt;span&gt;Icon=mailspring
&lt;&#x2F;span&gt;&lt;span&gt;Type=Application
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>SysRq</title>
        <published>2024-04-29T18:41:13+00:00</published>
        <updated>2024-04-29T18:41:13+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sysrq/"/>
        <id>https://nbari.com/sysrq/</id>
        
        <content type="html" xml:base="https://nbari.com/sysrq/">&lt;p&gt;To find the &lt;code&gt;SysRq&lt;&#x2F;code&gt; in your system, normally &lt;code&gt;PrtSc&lt;&#x2F;code&gt;, run:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;journalctl -f
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then press keys &lt;code&gt;Alt Gr&lt;&#x2F;code&gt; + &lt;code&gt;PrtSc&lt;&#x2F;code&gt; + &lt;code&gt;h&lt;&#x2F;code&gt; that will print in the logs something like:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;the Right &lt;code&gt;Alt GR&lt;&#x2F;code&gt; only works printing the help&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kernel: sysrq: HELP: loglevel(0-9) reboot(b) crash(c) terminate-all-tasks(e) memory-full-oom-kill(f)...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;enabling&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#enabling&quot; aria-label=&quot;Anchor link for: enabling&quot;&gt;🔗&lt;&#x2F;a&gt;Enabling&lt;&#x2F;h2&gt;
&lt;p&gt;create &lt;code&gt;&#x2F;etc&#x2F;sysctl.d&#x2F;99-sysctl.conf&lt;&#x2F;code&gt; with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kernel.sysrq = 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;then:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sysctl --system
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;using-reisub&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#using-reisub&quot; aria-label=&quot;Anchor link for: using-reisub&quot;&gt;🔗&lt;&#x2F;a&gt;Using  REISUB&lt;&#x2F;h2&gt;
&lt;p&gt;To reboot system in a crash run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Alt + SysRq (Hold down) + R, E, I, S, U, B
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;R: Switch the keyboard mode
&lt;&#x2F;span&gt;&lt;span&gt;E: Send the SIGTERM signal to all processes except init
&lt;&#x2F;span&gt;&lt;span&gt;I: Send the SIGKILL signal to all processes except init
&lt;&#x2F;span&gt;&lt;span&gt;S: Sync all mounted filesystems
&lt;&#x2F;span&gt;&lt;span&gt;U: Remount all mounted filesystems in read-only mode
&lt;&#x2F;span&gt;&lt;span&gt;B: Reboot the system
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To only reboot:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ALT + SysRq + b
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;https:&#x2F;&#x2F;wiki.archlinux.org&#x2F;title&#x2F;Keyboard_shortcuts#Rebooting&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Magic_SysRq_key&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>debug Github secrets</title>
        <published>2024-04-25T06:06:27+00:00</published>
        <updated>2024-04-25T06:06:27+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/debug-github-secrets/"/>
        <id>https://nbari.com/debug-github-secrets/</id>
        
        <content type="html" xml:base="https://nbari.com/debug-github-secrets/">&lt;p&gt;To print your secrets and prevent the &lt;code&gt;***&lt;&#x2F;code&gt; use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;echo ${{secrets.YOUR_SECRET }} | sed &amp;#39;s&#x2F;.&#x2F;&amp;amp; &#x2F;g&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or if you have them already in a file:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;- &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Get head (debug)
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;    echo $(head &#x2F;file&#x2F;with&#x2F;secrets) | sed &amp;#39;s&#x2F;.&#x2F;&amp;amp; &#x2F;g&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will separate each character by an space and print it and allow you to debug your secrets.:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.&lt;&#x2F;code&gt; The dot (.) represents any single character in regular expressions.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&amp;amp;&lt;&#x2F;code&gt; In the replacement part of the expression, &amp;amp; represents the matched pattern. So, in this case, it represents each character matched by &lt;code&gt;.&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>headless mac gh-runner</title>
        <published>2024-04-17T07:40:17+00:00</published>
        <updated>2024-04-17T07:40:17+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/headless-mac/"/>
        <id>https://nbari.com/headless-mac/</id>
        
        <content type="html" xml:base="https://nbari.com/headless-mac/">&lt;p&gt;To install an apple via headless, first update:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; softwareupdate&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -iaR
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then configure ssh to only accept public-keys:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ensure you have this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;PasswordAuthentication no
&lt;&#x2F;span&gt;&lt;span&gt;ChallengeResponseAuthentication no
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Reboot, test and then install homebrew:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;bin&#x2F;bash -c &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curl -fsSL&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;Homebrew&#x2F;install&#x2F;HEAD&#x2F;install.sh)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a &lt;code&gt;Brewfile&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; cat $&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOME&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;Brewfile
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;gmp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;libyaml&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;tmux&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ssh-vault&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install with &lt;code&gt;brew bundle&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Create a user for Github Actions (runner)&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner UserShell &#x2F;bin&#x2F;zsh
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner RealName &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;GitHub runner&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner UniqueID &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;1001&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner PrimaryGroupID 20
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -create&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner NFSHomeDirectory &#x2F;Users&#x2F;gh-runner
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# change password
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -passwd&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Users&#x2F;gh-runner secret
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; dscl .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -append&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;Groups&#x2F;admin GroupMembership gh-runner
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; createhomedir&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -c
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;su - gh-runner
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>active</title>
        <published>2024-04-10T06:36:42+00:00</published>
        <updated>2024-04-10T06:36:42+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/active/"/>
        <id>https://nbari.com/active/</id>
        
        <content type="html" xml:base="https://nbari.com/active/">&lt;p&gt;To remove all comments and empty lines from the file, you can use the following
command:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep -Ev &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;^\s*($|#)&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; file.md
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you want to diff the file with the same file without comments and empty:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;diff --color -y &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep -Ev &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;^\s*($|#)&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; file1.md) &amp;lt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep -Ev &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;^\s*($|#)&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; file2.md)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>protonvpn ipv6leakintrf0</title>
        <published>2024-03-13T16:10:41+00:00</published>
        <updated>2024-03-13T16:10:41+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/fix-protonvpn/"/>
        <id>https://nbari.com/fix-protonvpn/</id>
        
        <content type="html" xml:base="https://nbari.com/fix-protonvpn/">&lt;p&gt;When using protonvpn you may need to clean up&#x2F;remove the &lt;code&gt;ipv6leakintrf0&lt;&#x2F;code&gt; interface if you outbound traffic is not working.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt; connection delete pvpn-ipv6leak-protection
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;github.com&#x2F;ProtonVPN&#x2F;linux-cli&#x2F;issues&#x2F;43&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>elastic enrollment token</title>
        <published>2024-01-07T14:25:36+00:00</published>
        <updated>2024-01-07T14:25:36+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/elastic-import-ca/"/>
        <id>https://nbari.com/elastic-import-ca/</id>
        
        <content type="html" xml:base="https://nbari.com/elastic-import-ca/">&lt;p&gt;When trying to create a node token with:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;bin&#x2F;elasticsearch-create-enrollment-token -s&lt;&#x2F;span&gt;&lt;span&gt; node
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If get the error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ERROR: Unable to create an enrollment token. Elasticsearch node HTTP layer SSL configuration is not configured with a keystore, with exit code 73
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After creating the ca and http:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;.&#x2F;bin&#x2F;elasticsearch-certutil ca
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;.&#x2F;bin&#x2F;elasticsearch-certutil http
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Do this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;jdk&#x2F;bin
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;keytool -importkeystore -destkeystore&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;etc&#x2F;elasticsearch&#x2F;certs&#x2F;http.p12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -srckeystore&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;elastic-stack-ca.p12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -srcstoretype&lt;&#x2F;span&gt;&lt;span&gt; PKCS12
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;keytool&lt;&#x2F;code&gt;  overwrite and try again, should fix the problem&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Then try adding nodes with:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;elasticsearch-reconfigure-node --enrollment-token &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;token&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you already installed &lt;code&gt;elastic&lt;&#x2F;code&gt;, you need to &lt;code&gt;apt --purge remove elasticsearch&lt;&#x2F;code&gt; then
install again &lt;code&gt;apt install elasticsearch&lt;&#x2F;code&gt; (remove &#x2F;var&#x2F;lib&#x2F;elasticsearch) and
before starting enroll the new n&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vim-python</title>
        <published>2023-05-21T20:10:44+00:00</published>
        <updated>2023-05-21T20:10:44+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vim-python/"/>
        <id>https://nbari.com/vim-python/</id>
        
        <content type="html" xml:base="https://nbari.com/vim-python/">&lt;p&gt;If you get:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Warning: vim has no support for python, but it is required to run the formateter !
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Update&#x2F;Install python with &lt;code&gt;pyenv&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pyenv install 3.11.3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Clone the Vim repository:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; clone https:&#x2F;&#x2F;github.com&#x2F;vim&#x2F;vim.git
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Configure with python support:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;.&#x2F;configure --with-features=huge --enable-multibyte --enable-python3interp
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Build and install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;make &amp;amp;&amp;amp; sudo make install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test running from vim:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;:echo has(&amp;#39;python3&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;pytuple-type&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#pytuple-type&quot; aria-label=&quot;Anchor link for: pytuple-type&quot;&gt;🔗&lt;&#x2F;a&gt;PyTuple_Type&lt;&#x2F;h2&gt;
&lt;p&gt;If get an error about &lt;code&gt;PyTuple_Type&lt;&#x2F;code&gt;,  use the system python (not &lt;code&gt;pyenv&lt;&#x2F;code&gt;)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>readonly=off</title>
        <published>2023-05-04T20:52:48+00:00</published>
        <updated>2023-05-04T20:52:48+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/readonly-off/"/>
        <id>https://nbari.com/readonly-off/</id>
        
        <content type="html" xml:base="https://nbari.com/readonly-off/">&lt;p&gt;When booting FreeBSD in single-user mode and the root fs is using zfs, to make it read&#x2F;write:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; set readonly=off zroot
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; mount&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>GIT_SSH_COMMAND</title>
        <published>2023-04-21T12:44:28+00:00</published>
        <updated>2023-04-21T12:44:28+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/git-ssh-command/"/>
        <id>https://nbari.com/git-ssh-command/</id>
        
        <content type="html" xml:base="https://nbari.com/git-ssh-command/">&lt;p&gt;If you want to use multiple GitHub accounts, and have your ssh keys stored
in &lt;a href=&quot;https:&#x2F;&#x2F;developer.1password.com&#x2F;docs&#x2F;ssh&#x2F;agent&#x2F;advanced&#x2F;#match-key-with-host&quot;&gt;1Password&lt;&#x2F;a&gt;, the environment variable &lt;code&gt;GIT_SSH_COMMAND&lt;&#x2F;code&gt; can be used as an alternative to modify your
&lt;code&gt;~&#x2F;.ssh&#x2F;config&lt;&#x2F;code&gt; file&lt;&#x2F;p&gt;
&lt;p&gt;For example if you need to use &lt;code&gt;key1&lt;&#x2F;code&gt; for &lt;code&gt;project1&lt;&#x2F;code&gt; define it like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GIT_SSH_COMMAND&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ssh -i ~&#x2F;.ssh&#x2F;key1.pub -F none&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;you can add it to your &lt;code&gt;.envrc&lt;&#x2F;code&gt; and make it global for all projects within a directory.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The option &lt;code&gt;-F none&lt;&#x2F;code&gt; or &lt;code&gt;-F &#x2F;dev&#x2F;null&lt;&#x2F;code&gt; makes that no configuration file will be read.&lt;&#x2F;p&gt;
&lt;p&gt;If you then do:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssh -T&lt;&#x2F;span&gt;&lt;span&gt; git@github.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It will use the key from user &lt;code&gt;key1&lt;&#x2F;code&gt; without the need to modify to changte the git URL.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>MYSQLD_OPTS</title>
        <published>2023-04-20T06:30:06+00:00</published>
        <updated>2023-04-20T06:30:06+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysqld-opts/"/>
        <id>https://nbari.com/mysqld-opts/</id>
        
        <content type="html" xml:base="https://nbari.com/mysqld-opts/">&lt;p&gt;If need to temporarily disable binary logs or set innodb_force_recovery you
can set this in an environment variable instead of modifying the &lt;code&gt;my.cnf&lt;&#x2F;code&gt; directly, for example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; set-environment MYSQLD_OPTS=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;--innodb_force_recovery=1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; set-environment MYSQLD_OPTS=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;--skip-log-bin=1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then restart;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; restart mariadb
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove the environment var:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; unset-environment MYSQLD_OPTS
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check the contents of the environment vars:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; show-environment
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Mellanox Opnsense R86S</title>
        <published>2023-03-21T13:37:07+00:00</published>
        <updated>2023-03-21T13:37:07+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mellanox/"/>
        <id>https://nbari.com/mellanox/</id>
        
        <content type="html" xml:base="https://nbari.com/mellanox/">&lt;p&gt;If you want to use the SFP+ modules in the R86S, add to the &lt;code&gt;&#x2F;boot&#x2F;loader.conf.local&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mlx4en_load=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>unknown SSH host key for github.com</title>
        <published>2023-03-10T10:59:57+00:00</published>
        <updated>2023-03-10T10:59:57+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-key-github/"/>
        <id>https://nbari.com/ssh-key-github/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-key-github/">&lt;p&gt;Caused by:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;error: unknown SSH host key
&lt;&#x2F;span&gt;&lt;span&gt;The SSH host key for `github.com` is not known and cannot be validated.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Fix this by adding Github key to your &lt;code&gt; ~&#x2F;.ssh&#x2F;known_hosts&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssh-keyscan -t&lt;&#x2F;span&gt;&lt;span&gt; rsa,ecdsa,ed25519 github.com  &amp;gt;&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;known_hosts
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ip flush</title>
        <published>2023-02-02T16:22:54+00:00</published>
        <updated>2023-02-02T16:22:54+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/flush/"/>
        <id>https://nbari.com/flush/</id>
        
        <content type="html" xml:base="https://nbari.com/flush/">&lt;p&gt;To remove all ipv6 addresses from and interface:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; ip&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -6&lt;&#x2F;span&gt;&lt;span&gt; addr flush dummy0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For ipv4:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; ip&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -4&lt;&#x2F;span&gt;&lt;span&gt; addr flush dummy0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>rc.local</title>
        <published>2023-01-26T14:38:36+00:00</published>
        <updated>2023-01-26T14:38:36+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rc-local/"/>
        <id>https://nbari.com/rc-local/</id>
        
        <content type="html" xml:base="https://nbari.com/rc-local/">&lt;p&gt;To enable &lt;code&gt;rc.local&lt;&#x2F;code&gt; in debian, create the file with contents:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh -e
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Make sure that the script will &amp;quot;exit 0&amp;quot; on success or any other value on error.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;exit&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Give exec perms:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;chmod +x &#x2F;etc&#x2F;rc.local
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;systemctl daemon-reload
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And start with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;systemctl start rc-local
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>terraform-debug</title>
        <published>2022-11-29T10:25:08+00:00</published>
        <updated>2022-11-29T10:25:08+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/terraform-debug/"/>
        <id>https://nbari.com/terraform-debug/</id>
        
        <content type="html" xml:base="https://nbari.com/terraform-debug/">&lt;p&gt;Debug terraform settings this variables:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TF_LOG_PATH&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;tmp&#x2F;terraform.log&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TF_LOG&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;DEBUG&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then run terraform as always:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform plan ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vm-bhyve inuc</title>
        <published>2022-09-30T07:49:15+00:00</published>
        <updated>2022-09-30T07:49:15+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vm-bhyve-inuc/"/>
        <id>https://nbari.com/vm-bhyve-inuc/</id>
        
        <summary type="html">&lt;p&gt;Install &lt;code&gt;vm-bhyve&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install vm-bhyve
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</summary>
        
    </entry>
    <entry xml:lang="en">
        <title>FreeBSD dedibox setup</title>
        <published>2022-08-27T19:17:42+00:00</published>
        <updated>2022-08-27T19:17:42+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/freebsd-zfs-dedibox/"/>
        <id>https://nbari.com/freebsd-zfs-dedibox/</id>
        
        <content type="html" xml:base="https://nbari.com/freebsd-zfs-dedibox/">&lt;p&gt;Boot server in rescue mode and select FreeBSD rescue image, after login fetch sources:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# cd &#x2F;tmp
&lt;&#x2F;span&gt;&lt;span&gt;# fetch http:&#x2F;&#x2F;ftp.freebsd.org&#x2F;pub&#x2F;FreeBSD&#x2F;releases&#x2F;amd64&#x2F;13.1-RELEASE&#x2F;base.txz
&lt;&#x2F;span&gt;&lt;span&gt;# fetch http:&#x2F;&#x2F;ftp.freebsd.org&#x2F;pub&#x2F;FreeBSD&#x2F;releases&#x2F;amd64&#x2F;13.1-RELEASE&#x2F;kernel.txz
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Destroy existing partitions, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gpart destroy -F ada0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install using something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PASSWORD&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fabrik
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USER&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;devops
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;zroot
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mddev&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ada0
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; gpt ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mddev&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a&lt;&#x2F;span&gt;&lt;span&gt; 4k&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; 512k&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; freebsd-boot ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mddev&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; bootcode&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -b&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;boot&#x2F;pmbr&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -p&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;boot&#x2F;gptzfsboot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -i&lt;&#x2F;span&gt;&lt;span&gt; 1 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mddev&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a&lt;&#x2F;span&gt;&lt;span&gt; 1m&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; freebsd-zfs&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span&gt; disk0 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mddev&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sysctl&lt;&#x2F;span&gt;&lt;span&gt; vfs.zfs.min_auto_ashift=12
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-v
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zpool&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; cachefile=&#x2F;tmp&#x2F;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}.cache&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; altroot=&#x2F;mnt&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; autoexpand=on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -O&lt;&#x2F;span&gt;&lt;span&gt; compress=lz4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -O&lt;&#x2F;span&gt;&lt;span&gt; atime=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;} &#x2F;dev&#x2F;gpt&#x2F;disk0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -V&lt;&#x2F;span&gt;&lt;span&gt; 1G&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; org.freebsd:swap=on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; checksum=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; dedup=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; sync=disabled&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; primarycache=none ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;swap
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=none ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;ROOT
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=&#x2F; ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;ROOT&#x2F;default
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=&#x2F;tmp&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;tmp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=&#x2F;usr&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; canmount=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;doc
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;home
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;obj
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;local
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;ports
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;ports&#x2F;distfiles
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;ports&#x2F;packages
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;usr&#x2F;src
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=&#x2F;var&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; canmount=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;audit
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;crash
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;db
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;db&#x2F;pkg
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;log
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; readonly=on ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;empty
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; atime=on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=gzip ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;mail
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;spool
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=gzip ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;spool&#x2F;clientmqueue
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; compression=lz4 ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;tmp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;var&#x2F;ports
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; mountpoint=&#x2F;jails ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;jails
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;jails&#x2F;base
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; exec=off&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span&gt; setuid=off ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;jails&#x2F;base&#x2F;tmp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zfs&lt;&#x2F;span&gt;&lt;span&gt; set quota=10G ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;jails&#x2F;base
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zpool&lt;&#x2F;span&gt;&lt;span&gt; set bootfs=${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}&#x2F;ROOT&#x2F;default ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;tar -C&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -x -f&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp&#x2F;base.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;tar -C&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -x -f&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp&#x2F;kernel.txz
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;chroot&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt pw useradd ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USER&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -m -G&lt;&#x2F;span&gt;&lt;span&gt; wheel&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;bin&#x2F;csh&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -h&lt;&#x2F;span&gt;&lt;span&gt; 0 &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOP
&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PASSWORD&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOP
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;touch&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt&#x2F;etc&#x2F;fstab
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# &#x2F;boot&#x2F;loader.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &#x2F;mnt&#x2F;boot&#x2F;loader.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;autoboot_delay=&amp;quot;-1&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;beastie_disable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;boot_multicons=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;console=&amp;quot;comconsole,vidconsole&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hw.broken_txfifo=&amp;quot;1&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hw.memtest.test=&amp;quot;0&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hw.vtnet.mq_disable=&amp;quot;1&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;kern.geom.label.disk_ident.enable=&amp;quot;0&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;kern.geom.label.gptid.enable=&amp;quot;0&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;zfs_load=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# &#x2F;etc&#x2F;rc.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &#x2F;mnt&#x2F;etc&#x2F;rc.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;zfs_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;gateway_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hostname=&amp;quot;fabrik&amp;quot; # change to your desired hostname
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ifconfig_DEFAULT=&amp;quot;SYNCDHCP&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;clear_tmp_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;dumpdev=&amp;quot;NO&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ntpd_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ntpd_sync_on_start=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sendmail_enable=&amp;quot;NONE&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sshd_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;syslogd_flags=&amp;quot;-ssC&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cp&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp&#x2F;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}.cache &#x2F;mnt&#x2F;boot&#x2F;zfs&#x2F;zpool.cache
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zpool&lt;&#x2F;span&gt;&lt;span&gt; export ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ZPOOL&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Reboot and in the https:&#x2F;&#x2F;panel.op-net.com&#x2F; set server back to boot in normal mode&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mi 360 2K (NAS)</title>
        <published>2022-07-09T10:11:36+00:00</published>
        <updated>2022-07-09T10:11:36+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mi-nas/"/>
        <id>https://nbari.com/mi-nas/</id>
        
        <content type="html" xml:base="https://nbari.com/mi-nas/">&lt;p&gt;The Mi Home Security Camera (Xiaomi), only supports SMB1,add this to your
&lt;code&gt;smb4.conf&lt;&#x2F;code&gt; to make it work:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[global]
&lt;&#x2F;span&gt;&lt;span&gt;    client max protocol = NT1
&lt;&#x2F;span&gt;&lt;span&gt;    server min protocol = NT1
&lt;&#x2F;span&gt;&lt;span&gt;    ntlm auth = ntlmv1-permitted
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>removing metadata</title>
        <published>2022-06-06T11:26:52+00:00</published>
        <updated>2022-06-06T11:26:52+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/removing-metadata/"/>
        <id>https://nbari.com/removing-metadata/</id>
        
        <content type="html" xml:base="https://nbari.com/removing-metadata/">&lt;p&gt;To remove metadata from images:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; convert image.jpeg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -strip&lt;&#x2F;span&gt;&lt;span&gt; newimage.jpg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If want to resize:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; convert image.jpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -resize&lt;&#x2F;span&gt;&lt;span&gt;=400&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -quality&lt;&#x2F;span&gt;&lt;span&gt; 70%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -strip&lt;&#x2F;span&gt;&lt;span&gt; newimage.jpg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql disable binary logs</title>
        <published>2022-06-04T15:49:37+00:00</published>
        <updated>2022-06-04T15:49:37+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-disable-binlog/"/>
        <id>https://nbari.com/mysql-disable-binlog/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-disable-binlog/">&lt;p&gt;If need to temporarily disable binary logs because of a huge load&#x2F;dump:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; set-environment MYSQLD_OPTS=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;--skip-log-bin=1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then restart;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; restart mariadb
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Verify:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;mysql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-mysql &quot;&gt;&lt;code class=&quot;language-mysql&quot; data-lang=&quot;mysql&quot;&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;MariaDB&amp;gt; select @@log_bin;
&lt;&#x2F;span&gt;&lt;span&gt;+-----------+
&lt;&#x2F;span&gt;&lt;span&gt;| @@log_bin |
&lt;&#x2F;span&gt;&lt;span&gt;+-----------+
&lt;&#x2F;span&gt;&lt;span&gt;|         0 |
&lt;&#x2F;span&gt;&lt;span&gt;+-----------+
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove the environment var:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;systemctl&lt;&#x2F;span&gt;&lt;span&gt; unset-environment MYSQLD_OPTS
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>yubikey</title>
        <published>2022-05-28T15:00:32+00:00</published>
        <updated>2022-05-28T15:00:32+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/yubikey/"/>
        <id>https://nbari.com/yubikey/</id>
        
        <content type="html" xml:base="https://nbari.com/yubikey/">&lt;p&gt;Install ykman:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span&gt; install ykman
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Configure your 2 slot for static password:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ykman&lt;&#x2F;span&gt;&lt;span&gt; otp static 2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --keyboard-layout&lt;&#x2F;span&gt;&lt;span&gt; US
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;--keyboard-layout US&lt;&#x2F;code&gt; is to prevent getting &lt;code&gt;Error: Unsupported character: xxx&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;reset-pin&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#reset-pin&quot; aria-label=&quot;Anchor link for: reset-pin&quot;&gt;🔗&lt;&#x2F;a&gt;reset pin&lt;&#x2F;h2&gt;
&lt;p&gt;To reset all data:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; ykman piv reset
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;WARNING!&lt;&#x2F;span&gt;&lt;span&gt; This will delete all stored PIV data and restore factory settings. Proceed? &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;y&#x2F;N&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;: y
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Resetting&lt;&#x2F;span&gt;&lt;span&gt; PIV data...
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Success!&lt;&#x2F;span&gt;&lt;span&gt; All PIV data have been cleared from the YubiKey.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Your&lt;&#x2F;span&gt;&lt;span&gt; YubiKey now has the default PIN, PUK and Management Key:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PIN:&lt;&#x2F;span&gt;&lt;span&gt;    123456
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PUK:&lt;&#x2F;span&gt;&lt;span&gt;    12345678
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Management&lt;&#x2F;span&gt;&lt;span&gt; Key: 010203040506070801020304050607080102030405060708
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change the PIN now:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ykman&lt;&#x2F;span&gt;&lt;span&gt; piv change-pin
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change the PUK&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ykman&lt;&#x2F;span&gt;&lt;span&gt; piv change-puk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Generate a random management key and store it on the device, protected with the PIN.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ykman&lt;&#x2F;span&gt;&lt;span&gt; piv change-management-key&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --generate --protect
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;gpg&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#gpg&quot; aria-label=&quot;Anchor link for: gpg&quot;&gt;🔗&lt;&#x2F;a&gt;GPG&lt;&#x2F;h2&gt;
&lt;p&gt;To reset all GPG data:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ykman&lt;&#x2F;span&gt;&lt;span&gt; openpgp reset
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set the Admin and pin using:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --edit-card
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg&#x2F;card&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; admin
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Admin&lt;&#x2F;span&gt;&lt;span&gt; commands are allowed
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg&#x2F;card&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;passwd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To use the key in another sytem just import the public key and trust it:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; curl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -sSL&lt;&#x2F;span&gt;&lt;span&gt; https:&#x2F;&#x2F;github.com&#x2F;nbari.gpg | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg --import
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --edit-key&lt;&#x2F;span&gt;&lt;span&gt; nbari@tequila.io
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;trust
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;save
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;developers.yubico.com&#x2F;PGP&#x2F;Importing_keys.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aws-vault</title>
        <published>2022-04-27T10:28:08+00:00</published>
        <updated>2022-04-27T10:28:08+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-vault/"/>
        <id>https://nbari.com/aws-vault/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-vault/">&lt;p&gt;If using &lt;code&gt;vault&lt;&#x2F;code&gt; with &lt;code&gt;aws&lt;&#x2F;code&gt; secrets, you can request a pair of keys using:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault read aws&#x2F;creds&#x2F;readonly
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Key&lt;&#x2F;span&gt;&lt;span&gt;                Value
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;---&lt;&#x2F;span&gt;&lt;span&gt;                -----
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lease_id&lt;&#x2F;span&gt;&lt;span&gt;           aws&#x2F;creds&#x2F;readonly&#x2F;BMRZyGlcUof2S71rgBpHamfE
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lease_duration&lt;&#x2F;span&gt;&lt;span&gt;     12h
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lease_renewable&lt;&#x2F;span&gt;&lt;span&gt;    true
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;access_key&lt;&#x2F;span&gt;&lt;span&gt;         AKIBVIJBTT64DFFGWVNV
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;secret_key&lt;&#x2F;span&gt;&lt;span&gt;         p1zzZdDbZ0GGe7azIBq&#x2F;5GrQwsHRege6UhTfr59a
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;security_token     &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;nil&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you would like to login via web using a Console password, install
https:&#x2F;&#x2F;github.com&#x2F;99designs&#x2F;aws-vault&lt;&#x2F;p&gt;
&lt;p&gt;Add your pair of keys:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; aws-vault add monkey
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Enter&lt;&#x2F;span&gt;&lt;span&gt; Access Key ID:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You may need to previously export the AWS region:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; export AWS_REGION=us-east-2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to login run:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; aws-vault login monkey
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For this to work the AWS policy assigned to your keys needs to allow the to
create a token, for example here a read only:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;hcl&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-hcl &quot;&gt;&lt;code class=&quot;language-hcl&quot; data-lang=&quot;hcl&quot;&gt;&lt;span&gt;resource &amp;quot;vault_aws_secret_backend_role&amp;quot; &amp;quot;role&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  backend         = vault_aws_secret_backend.aws.path
&lt;&#x2F;span&gt;&lt;span&gt;  name            = &amp;quot;readonly&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  credential_type = &amp;quot;iam_user&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  policy_arns     = [&amp;quot;arn:aws:iam::aws:policy&#x2F;ReadOnlyAccess&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;  policy_document = &amp;lt;&amp;lt;EOT
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;Version&amp;quot;: &amp;quot;2012-10-17&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;Statement&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;    {
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;Action&amp;quot;: &amp;quot;sts:GetFederationToken&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;Resource&amp;quot;: &amp;quot;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;  ]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;EOT
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vault bootstrap</title>
        <published>2022-04-20T17:02:45+00:00</published>
        <updated>2022-04-20T17:02:45+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vault-bootstrap/"/>
        <id>https://nbari.com/vault-bootstrap/</id>
        
        <content type="html" xml:base="https://nbari.com/vault-bootstrap/">&lt;p&gt;Create an admin policy &lt;code&gt;admin-policy.hcl&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;hcl&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-hcl &quot;&gt;&lt;code class=&quot;language-hcl&quot; data-lang=&quot;hcl&quot;&gt;&lt;span&gt;# Allow managing leases
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;leases&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;read&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;list&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Read system health check
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;health&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;read&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Create and manage ACL policies broadly across Vault
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# List existing policies
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;policies&#x2F;acl&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;list&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Create and manage ACL policies
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;policies&#x2F;acl&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;read&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;list&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Manage auth methods broadly across Vault
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;auth&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;read&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;list&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Create, update, and delete auth methods
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;auth&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# List auth methods
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;auth&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;read&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Enable and manage the key&#x2F;value secrets engine at  path
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# List, create, update, and delete key&#x2F;value secrets
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;secret&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;read&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;list&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Manage secrets engines
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;mounts&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;create&amp;quot;, &amp;quot;read&amp;quot;, &amp;quot;update&amp;quot;, &amp;quot;delete&amp;quot;, &amp;quot;list&amp;quot;, &amp;quot;sudo&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# List existing secrets engines.
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;sys&#x2F;mounts&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;read&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Load the policy:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault policy write admin admin-policy.hcl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Enable GitHub:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault auth enable github
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Allow only your organization:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write auth&#x2F;github&#x2F;config organization=myorg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add the &lt;code&gt;admin-policy&lt;&#x2F;code&gt; to a team in your GitHub org named &lt;code&gt;devops&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write auth&#x2F;github&#x2F;map&#x2F;teams&#x2F;devops value=admin
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change the default lease time:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault auth tune&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -default-lease-ttl&lt;&#x2F;span&gt;&lt;span&gt;=72h github&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Login using your GitHub Token&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;unset&lt;&#x2F;span&gt;&lt;span&gt; ADMIN_TOKEN
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ADMIN_TOKEN&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vault&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; login&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -method&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;github token=ghp_ABC&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -format&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;json &lt;&#x2F;span&gt;&lt;span&gt;|  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jq -r &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.auth.client_token&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Lookup:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault token lookup
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;adding-auth-aws&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#adding-auth-aws&quot; aria-label=&quot;Anchor link for: adding-auth-aws&quot;&gt;🔗&lt;&#x2F;a&gt;Adding auth AWS&lt;&#x2F;h2&gt;
&lt;p&gt;Use path &lt;code&gt;my-project&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault auth enable&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -path&lt;&#x2F;span&gt;&lt;span&gt;=my-project aws
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add AWS secret key:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write auth&#x2F;my-project&#x2F;config&#x2F;client secret_key=SECRET_KEY access_key=ACCESS_KEY
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a policy for only read and and only allow a VPC:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;hcl&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-hcl &quot;&gt;&lt;code class=&quot;language-hcl&quot; data-lang=&quot;hcl&quot;&gt;&lt;span&gt;vault policy write &amp;quot;my-project-ro&amp;quot; -&amp;lt;&amp;lt;EOF
&lt;&#x2F;span&gt;&lt;span&gt;path &amp;quot;secret&#x2F;my-project&#x2F;*&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  capabilities = [&amp;quot;read&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;EOF
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;vault write \
&lt;&#x2F;span&gt;&lt;span&gt;  auth&#x2F;my-project&#x2F;role&#x2F;my-project \
&lt;&#x2F;span&gt;&lt;span&gt;  auth_type=ec2 \
&lt;&#x2F;span&gt;&lt;span&gt;  policies=my-project-ro \
&lt;&#x2F;span&gt;&lt;span&gt;  max_ttl=5m \
&lt;&#x2F;span&gt;&lt;span&gt;  bound_vpc_id=vpc-XXX
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a &lt;code&gt;kv&lt;&#x2F;code&gt; secrets version 1:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault secrets enable&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -path&lt;&#x2F;span&gt;&lt;span&gt;=secret&#x2F;my-project&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -version&lt;&#x2F;span&gt;&lt;span&gt;=1 kv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mTLS Browser </title>
        <published>2022-04-18T12:20:45+00:00</published>
        <updated>2022-04-18T12:20:45+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mtls-browser/"/>
        <id>https://nbari.com/mtls-browser/</id>
        
        <content type="html" xml:base="https://nbari.com/mtls-browser/">&lt;p&gt;To use &lt;a href=&quot;https:&#x2F;&#x2F;developers.cloudflare.com&#x2F;cloudflare-one&#x2F;identity&#x2F;devices&#x2F;mutual-tls-authentication&#x2F;&quot;&gt;mTLS&lt;&#x2F;a&gt; from your browser, first convert the cert to p12 format:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; openssl pkcs12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -export -in&lt;&#x2F;span&gt;&lt;span&gt; server.crt&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -inkey&lt;&#x2F;span&gt;&lt;span&gt; server.key&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -out&lt;&#x2F;span&gt;&lt;span&gt; server.p12
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;For MacOS you need to add an export password&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Then import the &lt;code&gt;server.p12&lt;&#x2F;code&gt; in to keychain or Firefox, example:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;mtls-firefox.png&quot; alt=&quot;mtls-firefox&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Delete your Active logins to test:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;mtls-firefox2.png&quot; alt=&quot;mtls-firefox&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vault SSH</title>
        <published>2022-04-16T15:59:30+00:00</published>
        <updated>2022-04-16T15:59:30+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vault-ssh/"/>
        <id>https://nbari.com/vault-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/vault-ssh/">&lt;p&gt;Vault &lt;code&gt;SSH&lt;&#x2F;code&gt; Secrets Engine&lt;&#x2F;p&gt;
&lt;p&gt;Enable the ssh engine:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault secrets enable ssh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or chosse a path:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault secrets enable&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -path&lt;&#x2F;span&gt;&lt;span&gt;=ssh-client-signer ssh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Configure Vault with a CA for signing client keys using the &lt;code&gt;&#x2F;config&#x2F;ca&lt;&#x2F;code&gt; endpoint:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write ssh&#x2F;config&#x2F;ca generate_signing_key=true
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get the public key:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; curl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VAULT_ADDR&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;v1&#x2F;ssh&#x2F;public_key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Copy the key to your servers and add this to &lt;code&gt;sshd_config&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;TrustedUserCAKeys &#x2F;etc&#x2F;ssh&#x2F;truasted-ca.pem
&lt;&#x2F;span&gt;&lt;span&gt;AuthorizedKeysFile &#x2F;dev&#x2F;null
&lt;&#x2F;span&gt;&lt;span&gt;PasswordAuthentication no
&lt;&#x2F;span&gt;&lt;span&gt;ChallengeResponseAuthentication no
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a role:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write ssh&#x2F;roles&#x2F;default -&amp;lt;&amp;lt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOH&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;algorithm_signer&amp;quot;: &amp;quot;rsa-sha2-256&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;allow_user_certificates&amp;quot;: true,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;allowed_users&amp;quot;: &amp;quot;*&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;allowed_extensions&amp;quot;: &amp;quot;permit-pty,permit-port-forwarding,permit-agent-forwarding&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;default_extensions&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;    {
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;      &amp;quot;permit-pty&amp;quot;: &amp;quot;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;      &amp;quot;permit-port-forwarding&amp;quot;: &amp;quot;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;      &amp;quot;permit-agent-forwarding&amp;quot;: &amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;    }
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  ],
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;key_type&amp;quot;: &amp;quot;ca&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;default_user&amp;quot;: &amp;quot;devops&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  &amp;quot;ttl&amp;quot;: &amp;quot;30m0s&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOH
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ask Vault to sign your public key.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -field&lt;&#x2F;span&gt;&lt;span&gt;=signed_key ssh&#x2F;sign&#x2F;default public_key=@$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOME&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;id_rsa.pub &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;id_rsa-cert.pub
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For a specific user:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; vault write&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -field&lt;&#x2F;span&gt;&lt;span&gt;=signed_key ssh&#x2F;sign&#x2F;default public_key=@$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOME&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;id_rsa.pub valid_principals=nbari &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;id_rsa-cert.pub
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;If you are saving the certificate directly beside your SSH keypair, suffix the
name with -cert.pub (~&#x2F;.ssh&#x2F;id_rsa-cert.pub). With this naming scheme, OpenSSH
will automatically use it during authentication.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Examine the signed certificate:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; ssh-keygen&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -Lf ~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.ssh&#x2F;id_rsa-cert.pub
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; ssh&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -i&lt;&#x2F;span&gt;&lt;span&gt; id_rsa_cert.pub&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -i&lt;&#x2F;span&gt;&lt;span&gt; id_rsa username@host
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vm-bhyve Pfsense</title>
        <published>2021-12-30T15:24:46+01:00</published>
        <updated>2021-12-30T15:24:46+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vm-bhyve-pfsense/"/>
        <id>https://nbari.com/vm-bhyve-pfsense/</id>
        
        <summary type="html">&lt;p&gt;Install &lt;code&gt;vm-bhyve&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg add https:&#x2F;&#x2F;pkg.freebsd.org&#x2F;FreeBSD:12:amd64&#x2F;latest&#x2F;All&#x2F;vm-bhyve-1.4.2.pkg
&lt;&#x2F;span&gt;&lt;span&gt;pkg add https:&#x2F;&#x2F;pkg.freebsd.org&#x2F;FreeBSD:12:amd64&#x2F;latest&#x2F;All&#x2F;uefi-edk2-bhyve-g20210226,2.pkg
&lt;&#x2F;span&gt;&lt;span&gt;pkg add https:&#x2F;&#x2F;pkg.freebsd.org&#x2F;FreeBSD:12:amd64&#x2F;latest&#x2F;All&#x2F;uefi-edk2-bhyve-csm-0.2_3,1.pkg
&lt;&#x2F;span&gt;&lt;span&gt;pkg add https:&#x2F;&#x2F;pkg.freebsd.org&#x2F;FreeBSD:12:amd64&#x2F;latest&#x2F;All&#x2F;bhyve-firmware-1.0_1.pkg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</summary>
        
    </entry>
    <entry xml:lang="en">
        <title>vncserver</title>
        <published>2021-12-26T18:24:24+01:00</published>
        <updated>2021-12-26T18:24:24+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vncserver/"/>
        <id>https://nbari.com/vncserver/</id>
        
        <content type="html" xml:base="https://nbari.com/vncserver/">&lt;p&gt;To start &lt;code&gt;vncserver&lt;&#x2F;code&gt; and listen connections from anywhere:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vncserver -localhost&lt;&#x2F;span&gt;&lt;span&gt; no :1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>GPG RemoteForward</title>
        <published>2021-12-08T20:56:49+01:00</published>
        <updated>2021-12-08T20:56:49+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gpg-remoteforward/"/>
        <id>https://nbari.com/gpg-remoteforward/</id>
        
        <content type="html" xml:base="https://nbari.com/gpg-remoteforward/">&lt;p&gt;To Forward your SSH session if using a Yubikey and &lt;code&gt;gpg-agent&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;For example to connect from a MacOS to a Linux VM:&lt;&#x2F;p&gt;
&lt;p&gt;On the client, add this to your &lt;code&gt;~&#x2F;.ssh&#x2F;config&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Host&lt;&#x2F;span&gt;&lt;span&gt; foo
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Hostname&lt;&#x2F;span&gt;&lt;span&gt; X.X.X.X
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ForwardAgent&lt;&#x2F;span&gt;&lt;span&gt; yes
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RemoteForward&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;run&#x2F;user&#x2F;1000&#x2F;gnupg&#x2F;S.gpg-agent     &#x2F;Users&#x2F;monkey&#x2F;.gnupg&#x2F;S.gpg-agent.extra
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RemoteForward&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;run&#x2F;user&#x2F;1000&#x2F;gnupg&#x2F;S.gpg-agent.ssh &#x2F;Users&#x2F;monkey&#x2F;.gnupg&#x2F;S.gpg-agent.extra.ssh
&lt;&#x2F;span&gt;&lt;span&gt;                            (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;remote&lt;&#x2F;span&gt;&lt;span&gt; socket)                  (local socket)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To find the local socket in your mac&#x2F;client do:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpgconf --list-dirs&lt;&#x2F;span&gt;&lt;span&gt; agent-extra-socket
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To find the remove socket, in the Linux VM, do:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpgconf --list-dirs&lt;&#x2F;span&gt;&lt;span&gt; agent-socket
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the remote host (the Linux VM) in &lt;code&gt;.bashrc&lt;&#x2F;code&gt; I have:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpgconf --create-socketdir
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If can&#x27;t login, remove the socket: &lt;code&gt;rm -f &#x2F;run&#x2F;user&#x2F;1000&#x2F;gnupg&#x2F;S.gpg-agent&lt;&#x2F;code&gt;, if posible add this to the &#x2F;etc&#x2F;ssh&#x2F;sshd_config: &lt;code&gt;StreamLocalBindUnlink yes&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Optional If you do not have root access to the remote machine to edit &#x2F;etc&#x2F;ssh&#x2F;sshd_config, you will need to remove the socket (located at gpgconf --list-dir agent-socket) on the remote machine before forwarding works. For example, rm &#x2F;run&#x2F;user&#x2F;1000&#x2F;gnupg&#x2F;S.gpg-agent - https:&#x2F;&#x2F;github.com&#x2F;drduh&#x2F;YubiKey-Guide#remote-machines-gpg-agent-forwarding&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Add your public key to the remove host:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg -a -o&lt;&#x2F;span&gt;&lt;span&gt; pub.key&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --export&lt;&#x2F;span&gt;&lt;span&gt; your@key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the remote host import your key and trust it:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg --import&lt;&#x2F;span&gt;&lt;span&gt; pub.key
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg --edit-key&lt;&#x2F;span&gt;&lt;span&gt; KEYID
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;trust
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;save
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You could also use:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssh -R&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;run&#x2F;user&#x2F;1000&#x2F;gnupg&#x2F;S.gpg-agent:&#x2F;Users&#x2F;monkey&#x2F;.gnupg&#x2F;S.gpg-agent.extra&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -o &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;StreamLocalBindUnlink=yes&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; user@x.x.x.x
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the remote host test with something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssh -T&lt;&#x2F;span&gt;&lt;span&gt; git@github.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Also you could list all your current keys with:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssh-add -L
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;scdaemon-conf&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#scdaemon-conf&quot; aria-label=&quot;Anchor link for: scdaemon-conf&quot;&gt;🔗&lt;&#x2F;a&gt;scdaemon.conf&lt;&#x2F;h2&gt;
&lt;p&gt;In macOS, you can use the following &lt;code&gt;~&#x2F;.gnupg&#x2F;scdaemon.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pcsc-driver &#x2F;System&#x2F;Library&#x2F;Frameworks&#x2F;PCSC.framework&#x2F;PCSC
&lt;&#x2F;span&gt;&lt;span&gt;disable-ccid
&lt;&#x2F;span&gt;&lt;span&gt;log-file &#x2F;tmp&#x2F;scdaemon.log
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pcsc-driver &#x2F;usr&#x2F;lib&#x2F;libpcsclite.so
&lt;&#x2F;span&gt;&lt;span&gt;disable-ccid
&lt;&#x2F;span&gt;&lt;span&gt;log-file &#x2F;tmp&#x2F;scdaemon.log
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;you may need to install &lt;code&gt;libusb-compat&lt;&#x2F;code&gt; to use &lt;code&gt;libpcsclite.so&lt;&#x2F;code&gt; on some systems&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>DTrace</title>
        <published>2021-09-05T20:44:01+02:00</published>
        <updated>2021-09-05T20:44:01+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/dtrace/"/>
        <id>https://nbari.com/dtrace/</id>
        
        <content type="html" xml:base="https://nbari.com/dtrace/">&lt;p&gt;To enable ensure kernel is compiled with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;makeoptions     DEBUG=-g                # Build kernel with gdb(1) debug symbols
&lt;&#x2F;span&gt;&lt;span&gt;makeoptions     WITH_CTF=1              # Run ctfconvert(1) for DTrace support
&lt;&#x2F;span&gt;&lt;span&gt;options         KDTRACE_FRAME           # Ensure frames are compiled in
&lt;&#x2F;span&gt;&lt;span&gt;options         KDTRACE_HOOKS           # Kernel DTrace hooks
&lt;&#x2F;span&gt;&lt;span&gt;options         DDB_CTF                 # Kernel ELF linker loads CTF data
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Build kernel, reboot:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kldload dtraceall
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check for example &lt;code&gt;redis-server&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;dtrace -x ustackframes=100 -n &amp;#39;profile-197 &#x2F;execname == &amp;quot;redis-server&amp;quot; &amp;amp;&amp;amp; arg1&#x2F; {@[ustack()] = count(); } tick-60s { exit(0); }&amp;#39; -o out.stacks
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;if you do a &lt;code&gt;dtrace -l&lt;&#x2F;code&gt; will find:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;47296    profile    profile-197
&lt;&#x2F;span&gt;&lt;span&gt;47297    profile    tick-60s
&lt;&#x2F;span&gt;&lt;span&gt;47298    profile    tick-10s
&lt;&#x2F;span&gt;&lt;span&gt;47299    profile    profile-99
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;arg1&lt;&#x2F;code&gt; is for user land, &lt;code&gt;arg0&lt;&#x2F;code&gt; for the kernel.&lt;&#x2F;p&gt;
&lt;p&gt;To sample the kernel:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;dtrace -x stackframes=100 -n &amp;#39;profile-197 &#x2F;arg0&#x2F; { @[stack()] = count(); } tick-60s { exit(0); }&amp;#39; -o out.stacks
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;to create a flame graph:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git clone https:&#x2F;&#x2F;github.com&#x2F;brendangregg&#x2F;FlameGraph
&lt;&#x2F;span&gt;&lt;span&gt;cd FlameGraph
&lt;&#x2F;span&gt;&lt;span&gt;.&#x2F;stackcollapse.pl out.stacks &amp;gt; out.folded
&lt;&#x2F;span&gt;&lt;span&gt;.&#x2F;flamegraph.pl out.folded &amp;gt; out.svg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check https:&#x2F;&#x2F;www.brendangregg.com&#x2F;FlameGraphs&#x2F;cpuflamegraphs.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pkg.txz.pubkeysig</title>
        <published>2021-07-27T13:39:04+02:00</published>
        <updated>2021-07-27T13:39:04+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pkg-txz-pubkeysig/"/>
        <id>https://nbari.com/pkg-txz-pubkeysig/</id>
        
        <content type="html" xml:base="https://nbari.com/pkg-txz-pubkeysig/">&lt;p&gt;If &lt;code&gt;pkg&lt;&#x2F;code&gt; can&#x27;t be installed because missing &lt;code&gt;pkg.txz.pubkeysig&lt;&#x2F;code&gt;, try this:&lt;&#x2F;p&gt;
&lt;p&gt;Go to &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;poudriere&#x2F;data&#x2F;packages&#x2F;13amd64-default&#x2F;.latest&#x2F;Latest&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo -n &amp;quot;$(sha256 -q pkg.txz)&amp;quot; | openssl dgst -sha256 -sign &#x2F;usr&#x2F;local&#x2F;etc&#x2F;ssl&#x2F;keys&#x2F;pkg.key -binary -out .&#x2F;pkg.txz.pubkeysig
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bhyve Ubuntu</title>
        <published>2021-06-02T21:41:06+02:00</published>
        <updated>2021-06-02T21:41:06+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bhyve-ubuntu/"/>
        <id>https://nbari.com/bhyve-ubuntu/</id>
        
        <content type="html" xml:base="https://nbari.com/bhyve-ubuntu/">&lt;p&gt;In &lt;code&gt;&#x2F;etc.rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cloned_interfaces=&amp;quot;lo1 bridge0 tap0&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;config_lo1=&amp;quot;inet 127.0.1.1&#x2F;8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;autobridge_interfaces=&amp;quot;bridge0&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;autobridge_bridge0=&amp;quot;tap* igb0&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig_bridge0=&amp;quot;addm igb0 addm tap0 up description bhyve&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In &lt;code&gt;&#x2F;boot&#x2F;loader.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;vmm_load=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;nmdm_load=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check that you have:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl net.link.tap.up_on_open=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the volume:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zfs create -V100G -o volmode=dev tank&#x2F;ubuntuvm
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install uefi-edk2-bhyve
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;this will create &#x2F;usr&#x2F;local&#x2F;share&#x2F;uefi-firmware&#x2F;BHYVE_UEFI.fd&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Setup and install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bhyve -AHP -w \
&lt;&#x2F;span&gt;&lt;span&gt;-s 1:0,lpc \
&lt;&#x2F;span&gt;&lt;span&gt;-s 2:0,virtio-net,tap0 \
&lt;&#x2F;span&gt;&lt;span&gt;-s 3:0,ahci-cd,&#x2F;tank&#x2F;iso&#x2F;ubuntu-20.04.2-live-server-amd64.iso \
&lt;&#x2F;span&gt;&lt;span&gt;-s 4:0,virtio-blk,&#x2F;dev&#x2F;zvol&#x2F;tank&#x2F;ubuntuvm \
&lt;&#x2F;span&gt;&lt;span&gt;-s 29,fbuf,tcp=0.0.0.0:5900,w=800,h=600,wait \
&lt;&#x2F;span&gt;&lt;span&gt;-l bootrom,&#x2F;usr&#x2F;local&#x2F;share&#x2F;uefi-firmware&#x2F;BHYVE_UEFI.fd \
&lt;&#x2F;span&gt;&lt;span&gt;-c 4 -m 8G ubuntu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install when ask to reboot, destroy the vm:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bhyvectl --destroy --vm=ubuntu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to start just remove the CD &lt;code&gt;ahci-cd&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;while true; do
&lt;&#x2F;span&gt;&lt;span&gt;bhyve -AHP -w \
&lt;&#x2F;span&gt;&lt;span&gt;-s 1:0,lpc \
&lt;&#x2F;span&gt;&lt;span&gt;-s 2:0,virtio-net,tap0 \
&lt;&#x2F;span&gt;&lt;span&gt;-s 4:0,virtio-blk,&#x2F;dev&#x2F;zvol&#x2F;tank&#x2F;ubuntuvm \
&lt;&#x2F;span&gt;&lt;span&gt;-s 29,fbuf,tcp=0.0.0.0:5900,w=800,h=600,wait \
&lt;&#x2F;span&gt;&lt;span&gt;-l bootrom,&#x2F;usr&#x2F;local&#x2F;share&#x2F;uefi-firmware&#x2F;BHYVE_UEFI.fd \
&lt;&#x2F;span&gt;&lt;span&gt;-c 4 -m 8G ubuntu
&lt;&#x2F;span&gt;&lt;span&gt;bhyve_exit=$?
&lt;&#x2F;span&gt;&lt;span&gt;if [ $bhyve_exit -ne 0 ]; then
&lt;&#x2F;span&gt;&lt;span&gt;    break
&lt;&#x2F;span&gt;&lt;span&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;done
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;usr&#x2F;sbin&#x2F;bhyvectl --destroy --vm=ubuntu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;debian&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#debian&quot; aria-label=&quot;Anchor link for: debian&quot;&gt;🔗&lt;&#x2F;a&gt;debian&lt;&#x2F;h2&gt;
&lt;p&gt;Boot using EFI file grupx64.efi then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cp &#x2F;boot&#x2F;efi&#x2F;EFI&#x2F;debian&#x2F;grubx64.efi &#x2F;boot&#x2F;efi&#x2F;EFI&#x2F;BOOT&#x2F;bootx64.efi
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To connect using the VNC client you can install it using this cask:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install --cask vnc-viewer
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;https:&#x2F;&#x2F;docs.freebsd.org&#x2F;doc&#x2F;13.0-RELEASE&#x2F;usr&#x2F;local&#x2F;share&#x2F;doc&#x2F;freebsd&#x2F;handbook&#x2F;virtualization-host-bhyve.html&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;www.cyberciti.biz&#x2F;faq&#x2F;how-to-install-linux-vm-on-freebsd-using-bhyve-and-zfs&#x2F;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mail.rc</title>
        <published>2021-05-22T19:49:23+02:00</published>
        <updated>2021-05-22T19:49:23+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mail-rc/"/>
        <id>https://nbari.com/mail-rc/</id>
        
        <content type="html" xml:base="https://nbari.com/mail-rc/">&lt;p&gt;When using AWS SES if trying to send mail to root you could get something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;554 Transaction failed: Missiong final &amp;#39;@domain&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;AWS requires that the FROM and TO have a @domain so need to modify
&lt;code&gt;&#x2F;etc&#x2F;mail.rc&lt;&#x2F;code&gt; and add the alias like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;alias root root&amp;lt;root@your.tld&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vultr shutdown -o -n -r now</title>
        <published>2021-05-21T20:17:41+02:00</published>
        <updated>2021-05-21T20:17:41+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vultr-shutdown-o-n/"/>
        <id>https://nbari.com/vultr-shutdown-o-n/</id>
        
        <content type="html" xml:base="https://nbari.com/vultr-shutdown-o-n/">&lt;p&gt;To prevent the system to hang on &quot;detaching uhub0&quot; reboot using the flag &lt;code&gt;-n&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;shutdown -o -n -r now
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pip upgrade</title>
        <published>2021-05-05T07:55:26+02:00</published>
        <updated>2021-05-05T07:55:26+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pip-upgrade/"/>
        <id>https://nbari.com/pip-upgrade/</id>
        
        <content type="html" xml:base="https://nbari.com/pip-upgrade/">&lt;p&gt;Upgrade using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip list --outdated --format=freeze | grep -v &amp;#39;^\-e&amp;#39; | cut -d = -f 1 | xargs -n1 pip3 install --upgrade --user
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>gpg: selecting card failed: Operation not supported by device</title>
        <published>2021-04-27T20:24:49+02:00</published>
        <updated>2021-04-27T20:24:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gpg-selecting-card-failed-operation-not-supported-by-device/"/>
        <id>https://nbari.com/gpg-selecting-card-failed-operation-not-supported-by-device/</id>
        
        <content type="html" xml:base="https://nbari.com/gpg-selecting-card-failed-operation-not-supported-by-device/">&lt;p&gt;If using a yubikey and getting this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gpg: selecting card failed: Operation not supported by device
&lt;&#x2F;span&gt;&lt;span&gt;gpg: OpenPGP card not available: Operation not supported by device
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add to &lt;code&gt;~&#x2F;.gnupg&#x2F;scdaemon.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;disable-ccid
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To debug you could use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;reader-port Yubico Yubi
&lt;&#x2F;span&gt;&lt;span&gt;debug-all
&lt;&#x2F;span&gt;&lt;span&gt;debug-level guru
&lt;&#x2F;span&gt;&lt;span&gt;disable-ccid
&lt;&#x2F;span&gt;&lt;span&gt;log-file &#x2F;tmp&#x2F;scd.log
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Pipenv Pyinstaller</title>
        <published>2021-04-24T16:25:34+02:00</published>
        <updated>2021-04-24T16:25:34+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pipenv-pyinstaller/"/>
        <id>https://nbari.com/pipenv-pyinstaller/</id>
        
        <content type="html" xml:base="https://nbari.com/pipenv-pyinstaller/">&lt;p&gt;Create a basic &lt;code&gt;hello world&lt;&#x2F;code&gt; using flask:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir &#x2F;tmp&#x2F;project
&lt;&#x2F;span&gt;&lt;span&gt;cd &#x2F;tmp&#x2F;project
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create &lt;code&gt;app.py&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;from flask import Flask
&lt;&#x2F;span&gt;&lt;span&gt;app = Flask(__name__)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;@app.route(&amp;quot;&#x2F;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;def hello():
&lt;&#x2F;span&gt;&lt;span&gt;    return &amp;#39;Hello World!&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;if __name__ == &amp;#39;__main__&amp;#39;:
&lt;&#x2F;span&gt;&lt;span&gt;    app.run(host=&amp;#39;0.0.0.0&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Instal flask:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; pipenv install flask
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;test the app:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv shell
&lt;&#x2F;span&gt;&lt;span&gt;python app.py
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install &lt;code&gt;pyinstaller&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv install pyinstaller
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the &lt;code&gt;requirements.txt&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv run pip freeze &amp;gt; requirements.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the binary:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; pyinstaller --onefile app.py
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test &amp;amp; run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;.&#x2F;dist&#x2F;app
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Done :-)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ZFS encryption</title>
        <published>2021-04-22T10:52:20+02:00</published>
        <updated>2021-04-22T10:52:20+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zfs-encryption/"/>
        <id>https://nbari.com/zfs-encryption/</id>
        
        <content type="html" xml:base="https://nbari.com/zfs-encryption/">&lt;p&gt;Create an encrypted file system:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zfs create -o encryption=on -o keyformat=passphrase -o keylocation=prompt tank&#x2F;test-enc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check encryption:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zfs get encryption tank&#x2F;test-enc
&lt;&#x2F;span&gt;&lt;span&gt;NAME           PROPERTY    VALUE        SOURCE
&lt;&#x2F;span&gt;&lt;span&gt;tank&#x2F;test-enc  encryption  aes-256-gcm  -
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check status:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zfs get -p encryption,keystatus,keyformat,keylocation,encryptionroot
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh comment</title>
        <published>2021-04-17T17:32:34+02:00</published>
        <updated>2021-04-17T17:32:34+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-comment/"/>
        <id>https://nbari.com/ssh-comment/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-comment/">&lt;p&gt;Create a new pair of ssh keys RSA with a custom comment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh-keygen -C &amp;quot;monkey&amp;quot; -t rsa -b 4096 -o -a 100 -f &#x2F;tmp&#x2F;monkey
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>fdesetup</title>
        <published>2021-04-15T17:09:06+02:00</published>
        <updated>2021-04-15T17:09:06+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/fdesetup/"/>
        <id>https://nbari.com/fdesetup/</id>
        
        <content type="html" xml:base="https://nbari.com/fdesetup/">&lt;p&gt;To remove a user from the login screen when booting and login from the first time:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo fdesetup remove -user monkey
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The user will not be listed any more in the login screen, but you will need
first logging with a user that can decrypt the disk and then switch to your
user.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note this will not delete or remove the user account&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh only password</title>
        <published>2021-04-14T17:03:59+02:00</published>
        <updated>2021-04-14T17:03:59+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-only-password/"/>
        <id>https://nbari.com/ssh-only-password/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-only-password/">&lt;p&gt;When using &lt;code&gt;ssh&lt;&#x2F;code&gt; if you only need to use password (no keys):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no &amp;lt;host&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>yumdownloader</title>
        <published>2021-04-07T16:30:51+02:00</published>
        <updated>2021-04-07T16:30:51+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/yumdownloader/"/>
        <id>https://nbari.com/yumdownloader/</id>
        
        <content type="html" xml:base="https://nbari.com/yumdownloader/">&lt;p&gt;To download &lt;code&gt;rpms&lt;&#x2F;code&gt; for using them in an offline environment, install first &lt;code&gt;yumdownloader&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;yum install yum-utils
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a directory to store the &lt;code&gt;rpm&#x27;s&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir &#x2F;tmp&#x2F;rpms
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Download the rpms:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;yumdownloader --destdir=&#x2F;tmp&#x2F;rpms --resolve MariaDB-server galera-4 MariaDB-client MariaDB-shared MariaDB-backup MariaDB-common
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>psql</title>
        <published>2021-03-06T17:04:38+01:00</published>
        <updated>2021-03-06T17:04:38+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/psql/"/>
        <id>https://nbari.com/psql/</id>
        
        <content type="html" xml:base="https://nbari.com/psql/">&lt;p&gt;To install &lt;code&gt;PostgreSQL&lt;&#x2F;code&gt; client on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew doctor
&lt;&#x2F;span&gt;&lt;span&gt;brew update
&lt;&#x2F;span&gt;&lt;span&gt;brew install libpq
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ psql -V
&lt;&#x2F;span&gt;&lt;span&gt;psql (PostgreSQL) 13.2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Flush DNS</title>
        <published>2021-01-29T20:34:44+01:00</published>
        <updated>2021-01-29T20:34:44+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/flush-dns/"/>
        <id>https://nbari.com/flush-dns/</id>
        
        <content type="html" xml:base="https://nbari.com/flush-dns/">&lt;p&gt;To flush DNS on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo killall -HUP mDNSResponder;sudo killall mDNSResponderHelper;sudo dscacheutil -flushcache
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Centos Disable Ipv6</title>
        <published>2020-11-29T13:38:41+01:00</published>
        <updated>2020-11-29T13:38:41+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/centos-disable-ipv6/"/>
        <id>https://nbari.com/centos-disable-ipv6/</id>
        
        <content type="html" xml:base="https://nbari.com/centos-disable-ipv6/">&lt;p&gt;Edit file &lt;code&gt;&#x2F;etc&#x2F;default&#x2F;grub&lt;&#x2F;code&gt; and add &lt;code&gt;ipv6.disable=1&lt;&#x2F;code&gt;, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# cat &#x2F;etc&#x2F;default&#x2F;grub
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_TIMEOUT=5
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_DEFAULT=saved
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_DISABLE_SUBMENU=true
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_TERMINAL_OUTPUT=&amp;quot;console&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_CMDLINE_LINUX=&amp;quot;ipv6.disable=1 crashkernel=auto rhgb quiet&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;GRUB_DISABLE_RECOVERY=&amp;quot;true&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then regenerate and reboot:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;grub2-mkconfig -o &#x2F;boot&#x2F;grub2&#x2F;grub.cfg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;reboot
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Using sysctl (no need to reboot), append below lines in &lt;code&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;net.ipv6.conf.all.disable_ipv6 = 1
&lt;&#x2F;span&gt;&lt;span&gt;net.ipv6.conf.default.disable_ipv6 = 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl -p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>storj</title>
        <published>2020-10-18T18:59:32+02:00</published>
        <updated>2020-10-18T18:59:32+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/storj/"/>
        <id>https://nbari.com/storj/</id>
        
        <content type="html" xml:base="https://nbari.com/storj/">&lt;p&gt;Setup up and configure your jail, then create user &lt;code&gt;storj&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pw useradd -n storj -m
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Clone and get and install latest version:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git clone -b v1.14.7 https:&#x2F;&#x2F;github.com&#x2F;storj&#x2F;storj.git storj
&lt;&#x2F;span&gt;&lt;span&gt;cd storj
&lt;&#x2F;span&gt;&lt;span&gt;go install -race -v storj.io&#x2F;storj&#x2F;cmd&#x2F;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a dir to contanin the identity and storage:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir &#x2F;mnt&#x2F;storj
&lt;&#x2F;span&gt;&lt;span&gt;chown -R storj:storj &#x2F;mnt&#x2F;storj
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the main host create the file system to be used in the jail:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zfs create tank&#x2F;storj
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create &lt;code&gt;fstat.storj&lt;&#x2F;code&gt; with something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;tank&#x2F;storj     &#x2F;jails&#x2F;storj&#x2F;mnt&#x2F;storj    nullfs  rw      0       0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;mkdir &#x2F;jails&#x2F;storej&#x2F;mnt&#x2F;storj&lt;&#x2F;code&gt; before starting the jail&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Change to user &lt;code&gt;storj&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;su - storj
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Setup the node:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;home&#x2F;storj&#x2F;go&#x2F;bin&#x2F;storagenode setup --config-dir &#x2F;mnt&#x2F;storj --identity-dir &#x2F;mnt&#x2F;storj&#x2F;identity
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Config lools somethinig like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;contact.external-address: &amp;quot;IP or FQDN:28967&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;identity.cert-path: &#x2F;mnt&#x2F;storj&#x2F;identity&#x2F;identity.cert
&lt;&#x2F;span&gt;&lt;span&gt;identity.key-path: &#x2F;mnt&#x2F;storj&#x2F;identity&#x2F;identity.key
&lt;&#x2F;span&gt;&lt;span&gt;log.level: info
&lt;&#x2F;span&gt;&lt;span&gt;operator.email: &amp;quot;your email address&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;operator.wallet: &amp;quot;your wallet address&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;server.address: :28967
&lt;&#x2F;span&gt;&lt;span&gt;server.private-address: 127.0.0.1:7778
&lt;&#x2F;span&gt;&lt;span&gt;server.revocation-dburl: bolt:&#x2F;&#x2F;&#x2F;mnt&#x2F;storj&#x2F;storage&#x2F;revocations.db
&lt;&#x2F;span&gt;&lt;span&gt;storage.allocated-disk-space: 2.00 TB
&lt;&#x2F;span&gt;&lt;span&gt;storage.path: &#x2F;mnt&#x2F;storj&#x2F;storage
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create an identity:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;home&#x2F;storj&#x2F;go&#x2F;bin&#x2F;identity --config-dir &#x2F;mnt&#x2F;storj&#x2F;identity create storagenode
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;this will take hours&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Backup before you continue, it should be quick! 🙏
This allows you to restore your Node in case of an unfortunate hardware or OS incident.&lt;&#x2F;p&gt;
&lt;p&gt;Authorize the identity:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;home&#x2F;storj&#x2F;go&#x2F;bin&#x2F;identity authorize storagenode &amp;lt;email:characterstring&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;documentation.storj.io&#x2F;dependencies&#x2F;identity&lt;&#x2F;p&gt;
&lt;p&gt;Startup using immortal:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install immortal
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;immortal&#x2F;storj.yml&lt;&#x2F;code&gt; with something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cmd&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;home&#x2F;storj&#x2F;go&#x2F;bin&#x2F;storagenode run --config-dir &#x2F;mnt&#x2F;storj&#x2F;storage --identity-dir &#x2F;mnt&#x2F;storj&#x2F;identity
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;user&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;storj
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;file&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;var&#x2F;log&#x2F;storj.log
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Enable &lt;code&gt;immortaldir_enable&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysrc immortaldir_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Start it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;service immortaldir start
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Follow up: https:&#x2F;&#x2F;github.com&#x2F;storj&#x2F;storj&#x2F;issues&#x2F;3935&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>libx265</title>
        <published>2020-09-14T13:08:58+02:00</published>
        <updated>2020-09-14T13:08:58+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/libx265/"/>
        <id>https://nbari.com/libx265/</id>
        
        <content type="html" xml:base="https://nbari.com/libx265/">&lt;p&gt;To reduce&#x2F;compress a video size you could use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ffmpeg -i input.mov -vcodec libx265 -crf 28 output.mp4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Be aware that &lt;code&gt;libx265&lt;&#x2F;code&gt; is not supported in many players so you can always fallback to &lt;code&gt;H.264&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ffmpeg -i input.mov output.mp4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;https:&#x2F;&#x2F;unix.stackexchange.com&#x2F;questions&#x2F;28803&#x2F;how-can-i-reduce-a-videos-size-with-ffmpeg&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>favicon</title>
        <published>2020-07-28T19:19:05+02:00</published>
        <updated>2020-07-28T19:19:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/favicon/"/>
        <id>https://nbari.com/favicon/</id>
        
        <content type="html" xml:base="https://nbari.com/favicon/">&lt;p&gt;Create a favicon from a &lt;code&gt;.png&lt;&#x2F;code&gt; using imagemagick &lt;code&gt;convert&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;convert favicon.png -define icon:auto-resize=64,48,32,16 favicon.ico
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Import large dump</title>
        <published>2020-06-12T21:59:02+02:00</published>
        <updated>2020-06-12T21:59:02+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/import-large-dump/"/>
        <id>https://nbari.com/import-large-dump/</id>
        
        <content type="html" xml:base="https://nbari.com/import-large-dump/">&lt;p&gt;To import a large dump (~300GB) you could do:&lt;&#x2F;p&gt;
&lt;p&gt;Split your file first:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;csplit -s -ftable dump.sql &amp;quot;&#x2F;-- Table structure for table&#x2F;&amp;quot; {999}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You could also use the pattern &lt;code&gt;{*}&lt;&#x2F;code&gt; but you need the &lt;code&gt;gcsplit&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install coreutils
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;BSD csplit don&#x27;t support &lt;code&gt;{*}&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Then try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gcsplit -s -ftable dump.sql &amp;quot;&#x2F;-- Table structure for table&#x2F;&amp;quot; {*}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create small &lt;code&gt;INSERT&lt;&#x2F;code&gt; chunks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gsplit -a 3 -d -n l&#x2F;200 table05 x_
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;l&#x2F;N&lt;&#x2F;code&gt;  split into N files without splitting lines&#x2F;records&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Set bulk_insert_buffer_size to 1GB:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; SET bulk_insert_buffer_size = 1024 * 1024 * 1024;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or in the &lt;code&gt;my.cnf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[mysqld]
&lt;&#x2F;span&gt;&lt;span&gt;bulk_insert_buffer_size = 1G
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;needs a restart&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Set network buffer and maximum allowed packet size length to a large byte number.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; SET GLOBAL net_buffer_length=1000000;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET GLOBAL max_allowed_packet=1000000000;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET foreign_key_checks = 0;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET unique_checks = 0;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET autocommit = 0;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Import the file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; source file.sql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ugly way to prevent mysql consuming all memory:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;for t in x_*
&lt;&#x2F;span&gt;&lt;span&gt;(echo $t; mysql db_name &amp;lt; $t &amp;amp;&amp;amp; service mysql-server restart &amp;amp;&amp;amp; sleep 2)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set back the checks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; SET foreign_key_checks = 1;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET unique_checks = 1;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; SET autocommit = 1;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Delete in chunks</title>
        <published>2020-06-12T14:12:56+02:00</published>
        <updated>2020-06-12T14:12:56+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/delete-in-chunks/"/>
        <id>https://nbari.com/delete-in-chunks/</id>
        
        <content type="html" xml:base="https://nbari.com/delete-in-chunks/">&lt;p&gt;To delete a big&#x2F;huge table in chunks, you could create this store procedure,
but the performance at the end depends of how good&#x2F;normalized is your database
(indexes):&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;A stored procedure is a prepared SQL code that you can save, so the code can
be reused over and over again. Such procedures are stored in the database data
dictionary.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Connect to the database and select the database:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; \u my_database
&lt;&#x2F;span&gt;&lt;span&gt;Database changed
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To list stored procedures&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; SHOW PROCEDURE STATUS;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the delete procedure:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; DROP PROCEDURE IF EXISTS archive_table;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;This will delete any existing procedures named &lt;code&gt;archive_table&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Change the delimiter:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; DELIMITER $$
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;When you write SQL statements, you use the semicolon (;) to separate two statements. A stored procedure, however, consists of multiple statements separated by a semicolon (;).If you use a MySQL client program to define a stored procedure that contains semicolon characters, the MySQL client program will not treat the whole stored procedure as a single statement, but many statements. Therefore, you must redefine the delimiter temporarily so that you can pass the whole stored procedure to the server as a single statement.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Create the procedure:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;CREATE PROCEDURE &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;archive_table&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;BEGIN
&lt;&#x2F;span&gt;&lt;span&gt;    REPEAT
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;DELETE FROM&lt;&#x2F;span&gt;&lt;span&gt; table_name
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WHERE&lt;&#x2F;span&gt;&lt;span&gt; time_stamp &amp;lt; unix_timestamp(NOW() - INTERVAL &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt; MONTH)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ORDER BY&lt;&#x2F;span&gt;&lt;span&gt; time_stamp &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;-- time_stamp needs an INDEX
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;LIMIT &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1000&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;-- can be tweaked
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT&lt;&#x2F;span&gt;&lt;span&gt; SLEEP(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    UNTIL ROW_COUNT() = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;END&lt;&#x2F;span&gt;&lt;span&gt; REPEAT;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;END&lt;&#x2F;span&gt;&lt;span&gt;$$
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For &lt;code&gt;MyISAM&lt;&#x2F;code&gt; you could try &lt;code&gt;DELETE LOW_PRIORITY QUICK FROM table_name&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;LIMIT leads to a warning on replication about it being non-deterministic, see more here: http:&#x2F;&#x2F;mysql.rjweb.org&#x2F;doc.php&#x2F;deletebig&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Set back the delimiter to &lt;code&gt;;&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; DELIMITER ;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And that&#x27;s it, to call the store procedure and start deleting records use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; CALL archive_table();
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bypass AllowTcpForwarding</title>
        <published>2020-05-11T13:43:01+02:00</published>
        <updated>2020-05-11T13:43:01+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bypass-allowtcpforwarding/"/>
        <id>https://nbari.com/bypass-allowtcpforwarding/</id>
        
        <content type="html" xml:base="https://nbari.com/bypass-allowtcpforwarding/">&lt;p&gt;To bypass &lt;code&gt;AllowTcpForwarding no&lt;&#x2F;code&gt; try using &lt;code&gt;socat&lt;&#x2F;code&gt; and &lt;code&gt;nc&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;socat TCP-LISTEN:&amp;lt;local port&amp;gt;,reuseaddr,fork &amp;quot;EXEC:ssh &amp;lt;server&amp;gt; nc localhost &amp;lt;remote port&amp;gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For example from your desktop run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;socat TCP-LISTEN:8080,reuseaddr,fork &amp;quot;EXEC:ssh 1.2.3.4 nc 10.0.0.1 3000&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will listen on local port &lt;code&gt;8080&lt;&#x2F;code&gt; connect via ssh to &lt;code&gt;1.2.3.4&lt;&#x2F;code&gt; and use &lt;code&gt;nc&lt;&#x2F;code&gt;
to connect &lt;code&gt;10.0.1.1:3000&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>rust strip</title>
        <published>2020-05-08T21:46:13+02:00</published>
        <updated>2020-05-08T21:46:13+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rust-strip/"/>
        <id>https://nbari.com/rust-strip/</id>
        
        <content type="html" xml:base="https://nbari.com/rust-strip/">&lt;p&gt;To build &amp;amp;&amp;amp; strip a binary use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;RUSTFLAGS=&amp;#39;-C link-arg=-s&amp;#39; cargo build --release
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;strip&lt;&#x2F;code&gt;  removes or modifies the symbol table attached to the output of the assembler and link editor.
This is useful to save space after a program has been debugged and to limit dynamically bound symbols.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sed append</title>
        <published>2020-03-29T18:29:39+02:00</published>
        <updated>2020-03-29T18:29:39+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sed-append/"/>
        <id>https://nbari.com/sed-append/</id>
        
        <content type="html" xml:base="https://nbari.com/sed-append/">&lt;p&gt;To append a line using &lt;code&gt;sed&lt;&#x2F;code&gt; that works on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sed -e &amp;#39;&#x2F;^telegraf_enab.*&#x2F;a\&amp;#39;$&amp;#39;\n&amp;#39;&amp;#39;telegraf_user=&amp;quot;root&amp;quot;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If need to do it in multiple files, you could use &lt;code&gt;find&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; find . -name &amp;quot;rc.conf&amp;quot; -exec sed -i &amp;#39;&amp;#39; -e &amp;#39;&#x2F;^telegraf_enab.*&#x2F;a\&amp;#39;$&amp;#39;\n&amp;#39;&amp;#39;telegraf_user=&amp;quot;root&amp;quot;&amp;#39; {} \;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;48406504&#x2F;1135424&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Fat16</title>
        <published>2020-03-23T16:26:45+01:00</published>
        <updated>2020-03-23T16:26:45+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/fat16/"/>
        <id>https://nbari.com/fat16/</id>
        
        <content type="html" xml:base="https://nbari.com/fat16/">&lt;p&gt;When trying to update a bios from an USB pen, probably you will need FAT16 or FAT32, to do this from macOS try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;diskutil partitiondisk &#x2F;dev&#x2F;disk3 1 MBR &amp;quot;MS-DOS FAT16&amp;quot; &amp;quot;NONAME&amp;quot; 0B
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;&#x2F;dev&#x2F;disk3 - disk device to be partitioned, found with &#x27;diskutil list&#x27;&lt;&#x2F;li&gt;
&lt;li&gt;1 - number of partitions, optional, but if given must match&lt;&#x2F;li&gt;
&lt;li&gt;MBR - partition Scheme (eg, DOS=MBR, Mac=GPT)&lt;&#x2F;li&gt;
&lt;li&gt;MS-DOS FAT16 - partition type (or fat32) *&lt;&#x2F;li&gt;
&lt;li&gt;NONAME - partition name&lt;&#x2F;li&gt;
&lt;li&gt;0B - partition size (0B=maximum)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo newfs_msdos -F 16 &#x2F;dev&#x2F;disk3s1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;See more: https:&#x2F;&#x2F;pbxbook.com&#x2F;other&#x2F;dosfat16.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>VLC keep resized window size</title>
        <published>2020-03-08T13:06:31+01:00</published>
        <updated>2020-03-08T13:06:31+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vlc-keep-resized-window-size/"/>
        <id>https://nbari.com/vlc-keep-resized-window-size/</id>
        
        <content type="html" xml:base="https://nbari.com/vlc-keep-resized-window-size/">&lt;p&gt;To prevent VLC from resizing the window every time you open a new video:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;VLC -&amp;gt; Preferences -&amp;gt; Show All -&amp;gt; Interface&#x2F;Main interface&#x2F;macosx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Uncheck the option &lt;code&gt;Resize interface to the native video size&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;vlc-preferences1.png&quot; alt=&quot;vlc&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;vlc-preferences2.png&quot; alt=&quot;vlc&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>get the Primary IP</title>
        <published>2020-02-26T14:33:47+01:00</published>
        <updated>2020-02-26T14:33:47+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/get-primary-ip/"/>
        <id>https://nbari.com/get-primary-ip/</id>
        
        <content type="html" xml:base="https://nbari.com/get-primary-ip/">&lt;p&gt;To get the primary IP in Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ip route get 1 | awk &amp;#39;{print $NF;exit}&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;In &lt;code&gt;awk&lt;&#x2F;code&gt; NF return the number of fields and by suffixing it with &lt;code&gt;$&lt;&#x2F;code&gt; is like doing &lt;code&gt;print $7&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;In macOS, to list all your interfaces:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;networksetup -listallhardwareports
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If want to get the IP assigned to the Wi-FI:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ipconfig getifaddr $(networksetup -listallhardwareports | awk &amp;#39;&#x2F;Hardware Port: Wi-Fi&#x2F;{getline; print $2}&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>redis over TLS</title>
        <published>2020-02-23T14:48:39+01:00</published>
        <updated>2020-02-23T14:48:39+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/redis-over-tls/"/>
        <id>https://nbari.com/redis-over-tls/</id>
        
        <content type="html" xml:base="https://nbari.com/redis-over-tls/">&lt;p&gt;Using &lt;code&gt;socat&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install socat
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the tunnel:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;socat -v TCP-LISTEN:6379,fork,reuseaddr ssl:your.redis.example.com:6379
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Use &lt;code&gt;redis-cli&lt;&#x2F;code&gt; as usual&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>removing the ^M character</title>
        <published>2020-02-07T19:47:46+01:00</published>
        <updated>2020-02-07T19:47:46+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/m-character-windows/"/>
        <id>https://nbari.com/m-character-windows/</id>
        
        <content type="html" xml:base="https://nbari.com/m-character-windows/">&lt;p&gt;In vim, to remove the &lt;code&gt;^M&lt;&#x2F;code&gt; character you could do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;:e ++ff=dos
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;:e ++ff=dos&lt;&#x2F;code&gt; command tells Vim to read the file again, forcing dos file
format. Vim will remove CRLF and LF-only line endings, leaving only the text of
each line in the buffer.&lt;&#x2F;p&gt;
&lt;p&gt;Then set filetype to unix:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;:set ff=unix
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And save the file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;:x
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Python quit unexpectedly macOS Catalina</title>
        <published>2020-01-20T17:21:40+01:00</published>
        <updated>2020-01-20T17:21:40+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/python-quit-unexpectedly-macos/"/>
        <id>https://nbari.com/python-quit-unexpectedly-macos/</id>
        
        <content type="html" xml:base="https://nbari.com/python-quit-unexpectedly-macos/">&lt;p&gt;When running something depending on OpenSSL you may get something like this on
&lt;code&gt;macOS 10.15.2&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;python_quit_1.png&quot; alt=&quot;python quit unexpectedly&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The output of the report:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;python_quit_2.png&quot; alt=&quot;python quit unexpectedly report&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To fix:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew reinstall openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cd &#x2F;usr&#x2F;local&#x2F;lib
&lt;&#x2F;span&gt;&lt;span&gt;sudo ln -s &#x2F;usr&#x2F;local&#x2F;opt&#x2F;openssl&#x2F;lib&#x2F;libssl.dylib libssl.dylib
&lt;&#x2F;span&gt;&lt;span&gt;sudo ln -s &#x2F;usr&#x2F;local&#x2F;opt&#x2F;openssl&#x2F;lib&#x2F;libcrypto.dylib libcrypto.dylib
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>postfix version</title>
        <published>2019-11-23T17:19:02+01:00</published>
        <updated>2019-11-23T17:19:02+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/postfix-version/"/>
        <id>https://nbari.com/postfix-version/</id>
        
        <content type="html" xml:base="https://nbari.com/postfix-version/">&lt;p&gt;In &lt;code&gt;Postfix&lt;&#x2F;code&gt; there is no &lt;code&gt;-v&lt;&#x2F;code&gt; or &lt;code&gt;--vesion&lt;&#x2F;code&gt;, to find the version run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ postconf mail_version
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>macOs catalina &amp; python</title>
        <published>2019-11-12T16:20:28+01:00</published>
        <updated>2019-11-12T16:20:28+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/catalina-python/"/>
        <id>https://nbari.com/catalina-python/</id>
        
        <content type="html" xml:base="https://nbari.com/catalina-python/">&lt;p&gt;Reinstall openssl:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew reinstall openssl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export DYLD_LIBRARY_PATH=&#x2F;usr&#x2F;local&#x2F;opt&#x2F;openssl&#x2F;lib:$DYLD_LIBRARY_PATH
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or create the link manually:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cd &#x2F;usr&#x2F;local&#x2F;lib
&lt;&#x2F;span&gt;&lt;span&gt;sudo ln -s &#x2F;usr&#x2F;local&#x2F;opt&#x2F;openssl&#x2F;lib&#x2F;libssl.dylib libssl.dylib
&lt;&#x2F;span&gt;&lt;span&gt;sudo ln -s &#x2F;usr&#x2F;local&#x2F;opt&#x2F;openssl&#x2F;lib&#x2F;libcrypto.dylib libcrypto.dylib
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Reinstall python:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew reinstall python
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Upgrade pip packages:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip install -U --user $(pip freeze | awk -F&amp;#39;[=]&amp;#39; &amp;#39;{print $1}&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Resume Tar</title>
        <published>2019-09-26T18:26:24+02:00</published>
        <updated>2019-09-26T18:26:24+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/resume-tar/"/>
        <id>https://nbari.com/resume-tar/</id>
        
        <content type="html" xml:base="https://nbari.com/resume-tar/">&lt;p&gt;To resume a terminated pr If while extracting a file, the process gets
terminated you may be available to resume it with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;    tar -xvkf file.tgz
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-k (x mode only) Do not overwrite existing files. In particular, if a file
appears more than once in an archive, later copies will not overwrite earlier
copies.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>convert svg</title>
        <published>2019-09-15T17:50:26+02:00</published>
        <updated>2019-09-15T17:50:26+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/convert-svg/"/>
        <id>https://nbari.com/convert-svg/</id>
        
        <content type="html" xml:base="https://nbari.com/convert-svg/">&lt;p&gt;Convert &lt;code&gt;svg&lt;&#x2F;code&gt; to &lt;code&gt;png&lt;&#x2F;code&gt; having transparent background:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ convert -background none -density 1200 in.svg out.png
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;brew install imagemagick librsvg&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>extent</title>
        <published>2019-09-15T10:23:40+02:00</published>
        <updated>2019-09-15T10:23:40+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/extent/"/>
        <id>https://nbari.com/extent/</id>
        
        <content type="html" xml:base="https://nbari.com/extent/">&lt;p&gt;To resize an image and adjust it to fit a fixed canvas with transparent
background:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ convert in.png \
&lt;&#x2F;span&gt;&lt;span&gt;-resize 128x128 \
&lt;&#x2F;span&gt;&lt;span&gt;-background none \
&lt;&#x2F;span&gt;&lt;span&gt;-gravity center \
&lt;&#x2F;span&gt;&lt;span&gt;-extent 128x128 \
&lt;&#x2F;span&gt;&lt;span&gt;out.png
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql CRC32</title>
        <published>2019-09-08T11:04:38+02:00</published>
        <updated>2019-09-08T11:04:38+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-crc32/"/>
        <id>https://nbari.com/mysql-crc32/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-crc32/">&lt;p&gt;If need to calculate the
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cyclic_redundancy_check&quot;&gt;&lt;code&gt;CRC32&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; of a string,
using mysql:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mysql -e &amp;quot;SELECT CRC32(&amp;#39;127.0.0.1&amp;#39;)&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;+--------------------+
&lt;&#x2F;span&gt;&lt;span&gt;| CRC32(&amp;#39;127.0.0.1&amp;#39;) |
&lt;&#x2F;span&gt;&lt;span&gt;+--------------------+
&lt;&#x2F;span&gt;&lt;span&gt;|         3619153832 |
&lt;&#x2F;span&gt;&lt;span&gt;+--------------------+
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>grep -H</title>
        <published>2019-09-07T18:41:37+02:00</published>
        <updated>2019-09-07T18:41:37+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/grep-h/"/>
        <id>https://nbari.com/grep-h/</id>
        
        <content type="html" xml:base="https://nbari.com/grep-h/">&lt;p&gt;To find path of a file containing a pattern:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cd jails
&lt;&#x2F;span&gt;&lt;span&gt;$ grep -H 34 *&#x2F;etc&#x2F;ssh&#x2F;sshd_config
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this example the path of the files containing the number &lt;code&gt;34&lt;&#x2F;code&gt; will be
printed.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>online.net IPv6</title>
        <published>2019-09-03T20:18:00+02:00</published>
        <updated>2019-09-03T20:18:00+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/online-net-ipv6/"/>
        <id>https://nbari.com/online-net-ipv6/</id>
        
        <content type="html" xml:base="https://nbari.com/online-net-ipv6/">&lt;p&gt;Configure IPv6 using &lt;code&gt;dhcp6c&lt;&#x2F;code&gt; for servers from online.net:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install dhcp6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Transform the DUID into a binary file (needed for dhcp6c):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo &amp;lt;DUID&amp;gt; | awk &amp;#39;{ gsub(&amp;quot;:&amp;quot;,&amp;quot; &amp;quot;); printf &amp;quot;0: 0a 00 %s\n&amp;quot;, $0 }&amp;#39; | xxd -r &amp;gt; &#x2F;var&#x2F;db&#x2F;dhcp6c_duid
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add this in &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;dhcp6c.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;id-assoc pd {
&lt;&#x2F;span&gt;&lt;span&gt;        prefix-interface igb0 {
&lt;&#x2F;span&gt;&lt;span&gt;        };
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;id-assoc na {
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;interface igb0 {
&lt;&#x2F;span&gt;&lt;span&gt;    send ia-pd 0;
&lt;&#x2F;span&gt;&lt;span&gt;    send ia-na 0;
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add this to &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ifconfig_igb0_ipv6=&amp;quot;inet6 -ifdisabled accept_rtadv up&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;dhcp6c_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;dhcp6c_interfaces=&amp;quot;igb0&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;rtsold_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;source: https:&#x2F;&#x2F;angristan.xyz&#x2F;configure-ipv6-freebsd-online-net-dedibox&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Start 2 XS SATA</title>
        <published>2019-09-03T09:04:14+02:00</published>
        <updated>2019-09-03T09:04:14+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/start-2-xs-sata/"/>
        <id>https://nbari.com/start-2-xs-sata/</id>
        
        <content type="html" xml:base="https://nbari.com/start-2-xs-sata/">&lt;p&gt;To install FreeBSD using the rescue system on a &lt;code&gt;Start-2-XS-SATA&lt;&#x2F;code&gt; from online.net:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh -x
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USER&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;monkey
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PASSWORD&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;secret
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; destroy&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -F&lt;&#x2F;span&gt;&lt;span&gt; ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; gpt ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; bootcode&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -b&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;boot&#x2F;pmbr&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -p&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;boot&#x2F;gptboot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -i&lt;&#x2F;span&gt;&lt;span&gt; 1 ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; freebsd-boot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span&gt; boot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; 128K ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; freebsd-swap&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span&gt; swap&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; 4g ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; freebsd-ufs&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span&gt; root ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpart&lt;&#x2F;span&gt;&lt;span&gt; set&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a&lt;&#x2F;span&gt;&lt;span&gt; active ada0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;newfs&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;dev&#x2F;gpt&#x2F;root
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mount&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;dev&#x2F;gpt&#x2F;root &#x2F;mnt
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt; http:&#x2F;&#x2F;ftp.fr.freebsd.org&#x2F;pub&#x2F;FreeBSD&#x2F;releases&#x2F;amd64&#x2F;12.0-RELEASE&#x2F;base.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt; http:&#x2F;&#x2F;ftp.fr.freebsd.org&#x2F;pub&#x2F;FreeBSD&#x2F;releases&#x2F;amd64&#x2F;12.0-RELEASE&#x2F;kernel.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tar&lt;&#x2F;span&gt;&lt;span&gt; xJf &#x2F;tmp&#x2F;base.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tar&lt;&#x2F;span&gt;&lt;span&gt; xJf &#x2F;tmp&#x2F;kernel.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rm&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp&#x2F;*.txz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &#x2F;mnt&#x2F;etc&#x2F;fstab
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;dev&#x2F;gpt&#x2F;root &#x2F; ufs rw,noatime 1 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;dev&#x2F;gpt&#x2F;swap none swap sw 0 0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &#x2F;mnt&#x2F;etc&#x2F;rc.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ifconfig_igb0=&amp;quot;DHCP&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sshd_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &#x2F;mnt&#x2F;boot&#x2F;loader.conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;boot_multicons=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;boot_serial=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;comconsole_speed=&amp;quot;9600&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;console=&amp;quot;comconsole&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;comconsole_port=&amp;quot;0x2F8&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt; &#x2F;mnt&#x2F;etc&#x2F;ttys
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ttyu1   &amp;quot;&#x2F;usr&#x2F;libexec&#x2F;getty std.9600&amp;quot;   vt100   on  secure
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOF
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;chroot&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;mnt pw useradd ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USER&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -m -G&lt;&#x2F;span&gt;&lt;span&gt; wheel&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;bin&#x2F;csh&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -h&lt;&#x2F;span&gt;&lt;span&gt; 0 &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOP
&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PASSWORD&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EOP
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;terminated&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Prevent Mac to Sleep</title>
        <published>2019-08-28T21:20:50+02:00</published>
        <updated>2019-08-28T21:20:50+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/prevent-mac-to-sleep/"/>
        <id>https://nbari.com/prevent-mac-to-sleep/</id>
        
        <content type="html" xml:base="https://nbari.com/prevent-mac-to-sleep/">&lt;p&gt;To stop sleep entirely:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo pmset -a disablesleep 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To revert, allow sleep again:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo pmset -a disablesleep 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To display global power settings:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pmset -g
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sudo SSH_CONNECTION</title>
        <published>2019-07-17T13:31:32+02:00</published>
        <updated>2019-07-17T13:31:32+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sudo-ssh-connection/"/>
        <id>https://nbari.com/sudo-ssh-connection/</id>
        
        <content type="html" xml:base="https://nbari.com/sudo-ssh-connection/">&lt;p&gt;When using ssh, if then doing something like &lt;code&gt;sudo -i&lt;&#x2F;code&gt; the environment vars
are gone, to preserve modify your &lt;code&gt;sudoers&lt;&#x2F;code&gt; (&lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;sudoers&lt;&#x2F;code&gt; or
&lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;sudoers.d&#x2F;devops&lt;&#x2F;code&gt;) and add something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Defaults env_keep += &amp;quot;SSH_TTY SSH_CONNECTION SSH_CLIENT&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case, it will preserve your SSH environment vars.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vbox headless</title>
        <published>2019-07-17T10:38:52+02:00</published>
        <updated>2019-07-17T10:38:52+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vbox-headless/"/>
        <id>https://nbari.com/vbox-headless/</id>
        
        <content type="html" xml:base="https://nbari.com/vbox-headless/">&lt;p&gt;To list your vms:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage list vms
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To run one in &lt;code&gt;headless&lt;&#x2F;code&gt; mode:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage startvm freebsd-server --type headless
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To shutdown:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage controlvm freebsd-server acpipowerbutton
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get the IPv4:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage guestproperty enumerate freebsd-server | awk &amp;#39;&#x2F;IP&#x2F;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;for this to work you will need the vboxguest tools &lt;code&gt;pkg install virtualbox-ose-additions&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ddcctl</title>
        <published>2019-07-04T18:07:05+02:00</published>
        <updated>2019-07-04T18:07:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ddcctl/"/>
        <id>https://nbari.com/ddcctl/</id>
        
        <content type="html" xml:base="https://nbari.com/ddcctl/">&lt;p&gt;To share one monitor, keyboard and mouse between two devices, mac mini and a
macbook try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew cask install barrier
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to avoid changing the input source by using the buttons in the monitor try
https:&#x2F;&#x2F;github.com&#x2F;kfix&#x2F;ddcctl:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cd &#x2F;tmp
&lt;&#x2F;span&gt;&lt;span&gt;git clone https:&#x2F;&#x2F;github.com&#x2F;kfix&#x2F;ddcctl.git
&lt;&#x2F;span&gt;&lt;span&gt;cd ddcctl
&lt;&#x2F;span&gt;&lt;span&gt;make &amp;amp;&amp;amp; make install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In my case to switch from the mac mini (HDMI) to the laptop via (DP) I use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ddcctl -d 1 -i 15
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;From the laptop (USB-C -&amp;gt; DP) to HDMI, switch back to the mac mini:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ddcctl -d 1 -i 17
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>timestamp</title>
        <published>2019-06-03T21:47:58+02:00</published>
        <updated>2019-06-03T21:47:58+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/timestamp/"/>
        <id>https://nbari.com/timestamp/</id>
        
        <content type="html" xml:base="https://nbari.com/timestamp/">&lt;p&gt;To get the current unix timestamp:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;date +%s
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get the date from a timestamp:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;date -r 1559591041
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;date -d &amp;quot;@1559591041&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>docker prune</title>
        <published>2019-05-29T00:41:33+02:00</published>
        <updated>2019-05-29T00:41:33+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/docker-prune/"/>
        <id>https://nbari.com/docker-prune/</id>
        
        <content type="html" xml:base="https://nbari.com/docker-prune/">&lt;p&gt;Docker cleanup:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; docker system prune -a
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>rust docker</title>
        <published>2019-05-28T22:16:35+02:00</published>
        <updated>2019-05-28T22:16:35+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rust-docker/"/>
        <id>https://nbari.com/rust-docker/</id>
        
        <content type="html" xml:base="https://nbari.com/rust-docker/">&lt;p&gt;&lt;code&gt;Dockerfile&lt;&#x2F;code&gt; to create small &lt;a href=&quot;https:&#x2F;&#x2F;rustlang.org&quot;&gt;rust&lt;&#x2F;a&gt; docker images:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;FROM clux&#x2F;muslrust
&lt;&#x2F;span&gt;&lt;span&gt;RUN mkdir &#x2F;source
&lt;&#x2F;span&gt;&lt;span&gt;WORKDIR &#x2F;source
&lt;&#x2F;span&gt;&lt;span&gt;COPY . .
&lt;&#x2F;span&gt;&lt;span&gt;RUN cargo build --release
&lt;&#x2F;span&gt;&lt;span&gt;RUN strip .&#x2F;target&#x2F;x86_64-unknown-linux-musl&#x2F;release&#x2F;myapp
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;FROM scratch
&lt;&#x2F;span&gt;&lt;span&gt;COPY --from=0 &#x2F;source&#x2F;target&#x2F;x86_64-unknown-linux-musl&#x2F;release&#x2F;myapp &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;CMD [&amp;quot;.&#x2F;myapp&amp;quot;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Image compatible with cloud foundry:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;FROM rust:1.35
&lt;&#x2F;span&gt;&lt;span&gt;WORKDIR &#x2F;usr&#x2F;src&#x2F;myapp
&lt;&#x2F;span&gt;&lt;span&gt;COPY . .
&lt;&#x2F;span&gt;&lt;span&gt;RUN cargo build --release
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;FROM debian:latest
&lt;&#x2F;span&gt;&lt;span&gt;RUN apt-get update &amp;amp;&amp;amp; DEBIAN_FRONTEND=noninteractive apt-get install -y openssl ca-certificates
&lt;&#x2F;span&gt;&lt;span&gt;COPY --from=0 &#x2F;usr&#x2F;src&#x2F;myapp&#x2F;target&#x2F;release&#x2F;myapp &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;CMD [&amp;quot;.&#x2F;myapp&amp;quot;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql pager</title>
        <published>2019-05-15T10:35:50+02:00</published>
        <updated>2019-05-15T10:35:50+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-pager/"/>
        <id>https://nbari.com/mysql-pager/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-pager/">&lt;p&gt;To use &lt;code&gt;less&lt;&#x2F;code&gt; command to vie the output of a mysql result you could use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; \P less
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; pager less
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then run something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; show engine innodb status\G
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In some cases you may need to search for something in specific for this &lt;code&gt;grep&lt;&#x2F;code&gt;
could be used, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; \P grep -A7 &amp;quot;ROW OPERATIONS&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;PAGER set to &amp;#39;grep -A7 &amp;quot;ROW OPERATIONS&amp;quot;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then when running the command it will only return 7 lines after &quot;ROW OPERATIONS&quot;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;disable&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#disable&quot; aria-label=&quot;Anchor link for: disable&quot;&gt;🔗&lt;&#x2F;a&gt;disable&lt;&#x2F;h2&gt;
&lt;p&gt;To disable the pager type &lt;code&gt;\n&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; \n
&lt;&#x2F;span&gt;&lt;span&gt;Pager disabled.
&lt;&#x2F;span&gt;&lt;span&gt;Time: 0.000s
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>&#x2F;&#x2F;+build disable</title>
        <published>2019-05-14T19:10:27+02:00</published>
        <updated>2019-05-14T19:10:27+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/build-disable/"/>
        <id>https://nbari.com/build-disable/</id>
        
        <content type="html" xml:base="https://nbari.com/build-disable/">&lt;p&gt;In &lt;a href=&quot;https:&#x2F;&#x2F;golang.org&quot;&gt;go&lt;&#x2F;a&gt; if need to sketch something and end having &lt;code&gt;func main()&lt;&#x2F;code&gt; in two files, you could ignore building one by adding at the top of the
file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;&#x2F; +build disable
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is a &lt;a href=&quot;https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;go&#x2F;build&#x2F;#hdr-Build_Constraints&quot;&gt;build constraint&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;A build constraint, also known as a build tag, is a line comment that begins:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;&#x2F; +build
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>delete file</title>
        <published>2019-05-06T14:44:58+02:00</published>
        <updated>2019-05-06T14:44:58+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/delete-file/"/>
        <id>https://nbari.com/delete-file/</id>
        
        <content type="html" xml:base="https://nbari.com/delete-file/">&lt;p&gt;Ways to delete a file starting with a dash &#x2F; hyphen:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;rm -- -file
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The option &lt;code&gt;--&lt;&#x2F;code&gt;  means the end of options for the command.&lt;&#x2F;p&gt;
&lt;p&gt;Another option is to indicate where is the file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;rm .&#x2F;-file
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;.&lt;&#x2F;code&gt; is current directory , path to &lt;code&gt;-file&lt;&#x2F;code&gt; is &lt;code&gt;.&#x2F;-file&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Using find:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;find . -type f -exec rm {} \;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finding the inode:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ls -li
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then using &lt;code&gt;find&lt;&#x2F;code&gt; and the inode it can be removed with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;find . -type f -inum &amp;lt;inum&amp;gt; -delete
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>galera SOS</title>
        <published>2019-04-10T19:29:55+02:00</published>
        <updated>2019-04-10T19:29:55+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/galera-sos/"/>
        <id>https://nbari.com/galera-sos/</id>
        
        <content type="html" xml:base="https://nbari.com/galera-sos/">&lt;p&gt;Check status of cluster: https:&#x2F;&#x2F;nbari.com&#x2F;post&#x2F;galera&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;Find process list not sleeping:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT user, time, state, info FROM information_schema.processlist WHERE command != &amp;#39;Sleep&amp;#39; AND time &amp;gt;= 2 ORDER BY time DESC, id;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Doing a heavy &lt;code&gt;DDL&lt;&#x2F;code&gt; (&lt;code&gt;ALTER&lt;&#x2F;code&gt;):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT * FROM information_schema.processlist WHERE command != &amp;#39;Sleep&amp;#39; AND info LIKE &amp;#39;alter%&amp;#39; AND time &amp;gt;= 2 ORDER BY time DESC, id LIMIT 1;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;DDL stands for data definition language. It is a set of SQL statements that work on the database as a whole, rather than an individual table or row. Create, alter, and drop are elements of this language.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Get locked tables:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;show open tables where in_use &amp;gt; 0;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finding locks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;show engine innodb status;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;At the end:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;---TRANSACTION 1135701157, ACTIVE 6768 sec
&lt;&#x2F;span&gt;&lt;span&gt;MySQL thread id 5208136, OS thread handle 0x7f2982e91700, query id 882213399 xxxIPxxx 82.235.36.49 my_user cleaning up
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;kill the transaction thread:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; KILL 5208136;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Information about all locks transactions are waiting for:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;select * from information_schema.innodb_lock_waits;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A list of blocking transactions:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT * FROM information_schema.INNODB_LOCKS WHERE LOCK_TRX_ID IN (SELECT BLOCKING_TRX_ID FROM INNODB_LOCK_WAITS);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT INNODB_LOCKS.* FROM information_schema.INNODB_LOCKS JOIN INNODB_LOCK_WAITS ON (INNODB_LOCKS.LOCK_TRX_ID = INNODB_LOCK_WAITS.BLOCKING_TRX_ID);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A list of transactions waiting for locks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT TRX_ID, TRX_REQUESTED_LOCK_ID, TRX_MYSQL_THREAD_ID, TRX_QUERY FROM information_schema.INNODB_TRX WHERE TRX_STATE = &amp;#39;LOCK WAIT&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check logs with &lt;code&gt;pt-query-digest&lt;&#x2F;code&gt;, first get the binlog and do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysqlbinlog --start-datetime=&amp;quot;2019-04-10 10:40:00&amp;quot; --stop-datetime=&amp;quot;2019-04-10 11:00:00&amp;quot; mysql-bin.0013* &amp;gt; out.sql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pt-query-digest --type binlog --group-by fingerprint --limit &amp;quot;100%&amp;quot; out.sql &amp;gt; report.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;in macOS if getting a segmentation fault use the full path
&lt;code&gt;&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;percona-toolkit&#x2F;3.0.13&#x2F;libexec&#x2F;bin&#x2F;pt-query-digest&lt;&#x2F;code&gt; or download
the lates version from https:&#x2F;&#x2F;www.percona.com&#x2F;get&#x2F;pt-query-digest&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Get all table sizes for specific database in MB:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT
&lt;&#x2F;span&gt;&lt;span&gt;    table_schema &amp;#39;Database Name&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;    SUM(data_length + index_length) &amp;#39;Size in Bytes&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;    ROUND(SUM(data_length + index_length) &#x2F; 1024 &#x2F; 1024, 2) &amp;#39;Size in MiB&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;FROM information_schema.tables
&lt;&#x2F;span&gt;&lt;span&gt;GROUP BY table_schema
&lt;&#x2F;span&gt;&lt;span&gt;ORDER BY 2 DESC limit 10;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For a specific database:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT
&lt;&#x2F;span&gt;&lt;span&gt;    table_schema &amp;#39;Database Name&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;    SUM(data_length + index_length) &amp;#39;Size in Bytes&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;    ROUND(SUM(data_length + index_length) &#x2F; 1024 &#x2F; 1024, 2) &amp;#39;Size in MiB&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;FROM information_schema.tables
&lt;&#x2F;span&gt;&lt;span&gt;WHERE table_schema = &amp;#39;your_db_name&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get a specific table size for a database in MB:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT table_name AS &amp;quot;Table&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;ROUND(((data_length + index_length) &#x2F; 1024 &#x2F; 1024), 2) AS &amp;quot;Size (MB)&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;FROM information_schema.TABLES
&lt;&#x2F;span&gt;&lt;span&gt;WHERE table_schema = &amp;quot;database_name&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;ORDER BY (data_length + index_length) DESC;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;How to calculate a good InnoDB log file size: (http:&#x2F;&#x2F;code.openark.org&#x2F;blog&#x2F;mysql&#x2F;how-to-calculate-a-good-innodb-log-file-size-recap)&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT
&lt;&#x2F;span&gt;&lt;span&gt;  innodb_os_log_written_per_minute*60
&lt;&#x2F;span&gt;&lt;span&gt;    AS estimated_innodb_os_log_written_per_hour,
&lt;&#x2F;span&gt;&lt;span&gt;  CONCAT(ROUND(innodb_os_log_written_per_minute*60&#x2F;1024&#x2F;1024, 1), &amp;#39;MB&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;    AS estimated_innodb_os_log_written_per_hour_mb
&lt;&#x2F;span&gt;&lt;span&gt;FROM
&lt;&#x2F;span&gt;&lt;span&gt;  (SELECT SUM(value) AS innodb_os_log_written_per_minute FROM (
&lt;&#x2F;span&gt;&lt;span&gt;    SELECT -VARIABLE_VALUE AS value
&lt;&#x2F;span&gt;&lt;span&gt;      FROM INFORMATION_SCHEMA.GLOBAL_STATUS
&lt;&#x2F;span&gt;&lt;span&gt;      WHERE VARIABLE_NAME = &amp;#39;innodb_os_log_written&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;    UNION ALL
&lt;&#x2F;span&gt;&lt;span&gt;    SELECT SLEEP(60)
&lt;&#x2F;span&gt;&lt;span&gt;      FROM DUAL
&lt;&#x2F;span&gt;&lt;span&gt;    UNION ALL
&lt;&#x2F;span&gt;&lt;span&gt;    SELECT VARIABLE_VALUE
&lt;&#x2F;span&gt;&lt;span&gt;      FROM INFORMATION_SCHEMA.GLOBAL_STATUS
&lt;&#x2F;span&gt;&lt;span&gt;      WHERE VARIABLE_NAME = &amp;#39;innodb_os_log_written&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;  ) s1
&lt;&#x2F;span&gt;&lt;span&gt;) s2;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Find if a &lt;code&gt;mysqldump&lt;&#x2F;code&gt; is running:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT * FROM information_schema.processlist WHERE info LIKE &amp;#39;SELECT &#x2F;*!40001 SQL_NO_CACHE *&#x2F;%&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Free some space in case &lt;code&gt;--log-bin&lt;&#x2F;code&gt; is enabled:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;PURGE BINARY LOGS BEFORE NOW();
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or for an specific date:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;PURGE BINARY LOGS BEFORE &amp;#39;20XX-01-01 00:00:00&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pigz</title>
        <published>2019-04-04T20:06:26+02:00</published>
        <updated>2019-04-04T20:06:26+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pigz/"/>
        <id>https://nbari.com/pigz/</id>
        
        <content type="html" xml:base="https://nbari.com/pigz/">&lt;p&gt;To compress using gzip format but using all your available cores:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tar --use-compress-program=pigz -cf archive.tgz &#x2F;path&#x2F;to&#x2F;source
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or if you want to pipe it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tar -cf - source | pigz &amp;gt; archive.tgz
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To decompress use &lt;code&gt;tar -xvf archive.tgz&lt;&#x2F;code&gt; as usual.&lt;&#x2F;p&gt;
&lt;p&gt;The output of &lt;a href=&quot;https:&#x2F;&#x2F;zlib.net&#x2F;pigz&#x2F;&quot;&gt;pigz&lt;&#x2F;a&gt; is compatible with gzip&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>zsh</title>
        <published>2019-03-23T18:32:47+01:00</published>
        <updated>2019-03-23T18:32:47+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zsh/"/>
        <id>https://nbari.com/zsh/</id>
        
        <content type="html" xml:base="https://nbari.com/zsh/">&lt;p&gt;Edit environment variables:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;vared PATH
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Diff command output creating temporary normal files&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;vimdiff =(ls &#x2F;bin) =(ls &#x2F;usr&#x2F;bin)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Print path&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;print -l $path
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Run a command detached &lt;code&gt;&amp;amp;!&lt;&#x2F;code&gt; or &lt;code&gt;&amp;amp;|&lt;&#x2F;code&gt; put it in background and disown the process,
exiting the shell will leave it running:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sleep 300 &amp;amp;!
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Google Cloud Functions</title>
        <published>2019-03-13T20:12:57+01:00</published>
        <updated>2019-03-13T20:12:57+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gcf/"/>
        <id>https://nbari.com/gcf/</id>
        
        <content type="html" xml:base="https://nbari.com/gcf/">&lt;p&gt;Testing &lt;a href=&quot;https:&#x2F;&#x2F;cloud.google.com&#x2F;functions&#x2F;&quot;&gt;Google Cloud Functions&lt;&#x2F;a&gt; using &lt;a href=&quot;https:&#x2F;&#x2F;golang.org&quot;&gt;go&lt;&#x2F;a&gt; with an average of 250 requests&#x2F;second. Cost per day close to $10USD&lt;&#x2F;p&gt;
&lt;p&gt;Request per day: 23,511,849
&lt;img src=&quot;&#x2F;img&#x2F;gcf-day-cost.png&quot; alt=&quot;cost&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Errors: 0
&lt;img src=&quot;&#x2F;img&#x2F;gcf-invocations.png&quot; alt=&quot;invocations&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;memory usage: 10.4MB
&lt;img src=&quot;&#x2F;img&#x2F;gcf-memory-usage.png&quot; alt=&quot;memory&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;execution time: 55.04ms
&lt;img src=&quot;&#x2F;img&#x2F;gcf-execution-time.png&quot; alt=&quot;execution_time&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;gcf-reports.png&quot; alt=&quot;reports&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh wireshark</title>
        <published>2019-03-10T15:42:20+01:00</published>
        <updated>2019-03-10T15:42:20+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-wireshark/"/>
        <id>https://nbari.com/ssh-wireshark/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-wireshark/">&lt;p&gt;To analyze traffic remotely over ssh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh use@server sudo tcpdump -U -s0 -i pflog0 -w -| wireshark -k -i -
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In case need an specific port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh use@server sudo tcpdump -U -s0 -i pflog0 -w - &amp;#39;port 5984&amp;#39; | wireshark -k -i -
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To ignore trafic from ssh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh use@server sudo tcpdump -U -s0 -i pflog0 -w - &amp;#39;not port 22&amp;#39; | wireshark -k -i -
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;wireshark -k -i &amp;lt;(ssh root@192.168.1.1 -p 2222 tcpdump -i em0 -U -w - not tcp port 22)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ELK  delete_by_query</title>
        <published>2019-03-07T23:52:19+01:00</published>
        <updated>2019-03-07T23:52:19+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/elk-delte-by-query/"/>
        <id>https://nbari.com/elk-delte-by-query/</id>
        
        <content type="html" xml:base="https://nbari.com/elk-delte-by-query/">&lt;p&gt;To delete indexes older than X days:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;json&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-json &quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;POST haproxy&#x2F;_delete_by_query
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;query&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;range&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;			&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ISODATE&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;				&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;lt&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;now-3d&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;			}
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>openssl SHA1 HMAC</title>
        <published>2019-03-05T12:34:33+01:00</published>
        <updated>2019-03-05T12:34:33+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/openssl-sha1-hmac/"/>
        <id>https://nbari.com/openssl-sha1-hmac/</id>
        
        <content type="html" xml:base="https://nbari.com/openssl-sha1-hmac/">&lt;p&gt;To create an &lt;code&gt;HMAC-SHA1&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ echo -n &amp;quot;string&amp;quot; | openssl sha1 -hmac &amp;quot;shared_secret&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ echo -n &amp;quot;string&amp;quot; | openssl dgst -sha1 -hmac &amp;quot;shared_secret&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>DoH Firefox</title>
        <published>2019-02-15T15:26:10+01:00</published>
        <updated>2019-02-15T15:26:10+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/doh-firefox/"/>
        <id>https://nbari.com/doh-firefox/</id>
        
        <content type="html" xml:base="https://nbari.com/doh-firefox/">&lt;p&gt;Open firefox and type:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;about:config
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Search for:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;network.trr.uri
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Probably you already have:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;https:&#x2F;&#x2F;mozilla.cloudflare-dns.com&#x2F;dns-query
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If not add it or use something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;https:&#x2F;&#x2F;cloudflare-dns.com&#x2F;dns-query
&lt;&#x2F;span&gt;&lt;span&gt;https:&#x2F;&#x2F;dns.quad9.net&#x2F;dns-query
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then enable &lt;code&gt;network.trr.mode&lt;&#x2F;code&gt; by setting it to &lt;code&gt;2&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Set &lt;code&gt;network.trr.mode&lt;&#x2F;code&gt; to 2 make DNS Over HTTPS the browser&#x27;s first choice
but use regular DNS as a fallback (0 is &quot;off by default&quot;, 1 lets Firefox pick
whichever is faster, 3 for TRR only mode, 5 to explicitly turn it off).&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>osascript</title>
        <published>2019-02-08T08:55:41+01:00</published>
        <updated>2019-02-08T08:55:41+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/osascript/"/>
        <id>https://nbari.com/osascript/</id>
        
        <content type="html" xml:base="https://nbari.com/osascript/">&lt;p&gt;In macOS, to find a path of an application, for example &lt;code&gt;Chromium&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ osascript -e &amp;#39;POSIX path of (path to application &amp;quot;Chromium&amp;quot;)&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Galera</title>
        <published>2019-02-06T09:55:15+01:00</published>
        <updated>2019-02-06T09:55:15+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/galera/"/>
        <id>https://nbari.com/galera/</id>
        
        <content type="html" xml:base="https://nbari.com/galera/">&lt;p&gt;To periodically check status of the cluster, create a script (&lt;code&gt;&#x2F;tmp&#x2F;xx&lt;&#x2F;code&gt;):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;mysql -e \
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;SHOW GLOBAL STATUS WHERE Variable_name IN (
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_cert_deps_distance&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_cluster_size&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_cluster_status&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_connected&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_evs_delayed&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_flow_control_paused&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_flow_control_paused_ns&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_flow_control_recv&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_flow_control_sent&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_local_index&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_local_state&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_local_state_comment&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_ready&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_replicated&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;wsrep_replicated_bytes&amp;#39;);&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;if credentials are in a custom path: &lt;code&gt;mysql --defaults-file=&#x2F;path&#x2F;to&#x2F;.my.cnf -s -e&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;And run it with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;watch sh &#x2F;tmp&#x2F;xx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If single node alive (ERROR 1047 WSREP has not yet prepared node for application use):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SET GLOBAL wsrep_provider_options=&amp;#39;pc.bootstrap=YES&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This node can be used now has the new master so others nodes can recover from it.&lt;&#x2F;p&gt;
&lt;p&gt;The below statement will give us an idea of the amount of data replicated by
Galera. Run the following statement on one of the Galera nodes during peak hours
(tested on MariaDB &amp;gt;10.0 and PXC &amp;gt;5.6, galera &amp;gt;3.x):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SET @start := (SELECT SUM(VARIABLE_VALUE&#x2F;1024&#x2F;1024) FROM information_schema.global_status WHERE VARIABLE_NAME LIKE &amp;#39;WSREP%bytes&amp;#39;); do sleep(60); SET @end := (SELECT SUM(VARIABLE_VALUE&#x2F;1024&#x2F;1024) FROM information_schema.global_status WHERE VARIABLE_NAME LIKE &amp;#39;WSREP%bytes&amp;#39;); SET @gcache := (SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(@@GLOBAL.wsrep_provider_options,&amp;#39;gcache.size = &amp;#39;,-1), &amp;#39;M&amp;#39;, 1)); SELECT ROUND((@end - @start),2) AS `MB&#x2F;min`, ROUND((@end - @start),2) * 60 as `MB&#x2F;hour`, @gcache as `gcache Size(MB)`, ROUND(@gcache&#x2F;round((@end - @start),2),2) as `Time to full(minutes)`;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Will output something like:
+--------+---------+-----------------+-----------------------+
| MB&#x2F;min | MB&#x2F;hour | gcache Size(MB) | Time to full(minutes) |
+--------+---------+-----------------+-----------------------+
|   7.95 |  477.00 |  128            |                 16.10 |
+--------+---------+-----------------+-----------------------+&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;src: https:&#x2F;&#x2F;severalnines.com&#x2F;database-blog&#x2F;improve-performance-galera-cluster-mysql-or-mariadb&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;grastate-dat&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#grastate-dat&quot; aria-label=&quot;Anchor link for: grastate-dat&quot;&gt;🔗&lt;&#x2F;a&gt;grastate.dat&lt;&#x2F;h2&gt;
&lt;p&gt;Try to recover from the node with max &lt;code&gt;seqno&lt;&#x2F;code&gt;, for example this is a node that shows a graceful shutdown:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;version: 2.1
&lt;&#x2F;span&gt;&lt;span&gt;uuid: cbd332a9-f617-11e2-b77d-3ee9fa637069
&lt;&#x2F;span&gt;&lt;span&gt;seqno: 43760
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This &lt;code&gt;grastate.dat&lt;&#x2F;code&gt; file shows &lt;code&gt;-1&lt;&#x2F;code&gt; in the &lt;code&gt;seqno&lt;&#x2F;code&gt;. This node crashed during transaction processing:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;version: 2.1
&lt;&#x2F;span&gt;&lt;span&gt;uuid: cbd332a9-f617-11e2-b77d-3ee9fa637069
&lt;&#x2F;span&gt;&lt;span&gt;seqno: -1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This node crashed during DDL:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;version: 2.1
&lt;&#x2F;span&gt;&lt;span&gt;uuid: 00000000-0000-0000-0000-000000000000
&lt;&#x2F;span&gt;&lt;span&gt;seqno: -1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>galera alter</title>
        <published>2019-01-29T22:50:24+01:00</published>
        <updated>2019-01-29T22:50:24+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/galera-alter/"/>
        <id>https://nbari.com/galera-alter/</id>
        
        <content type="html" xml:base="https://nbari.com/galera-alter/">&lt;p&gt;To prevent bloking the cluster while doing &lt;code&gt;ALTERS&lt;&#x2F;code&gt; (SCHEMA UPGRADES), do this per node:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SET GLOBAL wsrep_OSU_method=&amp;#39;RSU&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then Run the &lt;code&gt;ALTER&lt;&#x2F;code&gt; statement once done reset the Schema Upgrade method back to
Total Order Isolation.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SET GLOBAL wsrep_OSU_method=&amp;#39;TOI&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;http:&#x2F;&#x2F;galeracluster.com&#x2F;documentation-webpages&#x2F;clusterstallonalter.html
http:&#x2F;&#x2F;galeracluster.com&#x2F;documentation-webpages&#x2F;schemaupgrades.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mojave Iso</title>
        <published>2018-12-13T20:47:37+01:00</published>
        <updated>2018-12-13T20:47:37+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mojave-iso/"/>
        <id>https://nbari.com/mojave-iso/</id>
        
        <content type="html" xml:base="https://nbari.com/mojave-iso/">&lt;p&gt;Create 12 GB tmp disk:
hdiutil create -o &#x2F;tmp&#x2F;Mojave.cdr -size 12000m -layout SPUD -fs HFS+J&lt;&#x2F;p&gt;
&lt;p&gt;Attach the disk:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;hdiutil attach &#x2F;tmp&#x2F;Mojave.cdr.dmg -noverify -mountpoint &#x2F;Volumes&#x2F;install_build
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Extract the installer:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo &#x2F;Applications&#x2F;Install\ macOS\ Mojave.app&#x2F;Contents&#x2F;Resources&#x2F;createinstallmedia --volume &#x2F;Volumes&#x2F;install_build
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create the iso&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mv &#x2F;tmp&#x2F;Mojave.cdr.dmg ~&#x2F;Desktop&#x2F;InstallSystem.dmg
&lt;&#x2F;span&gt;&lt;span&gt;hdiutil detach &#x2F;Volumes&#x2F;Install\ macOS\ Mojave
&lt;&#x2F;span&gt;&lt;span&gt;hdiutil convert ~&#x2F;Desktop&#x2F;InstallSystem.dmg -format UDTO -o ~&#x2F;Desktop&#x2F;Mojave.iso
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Rename &lt;code&gt;Mojave.iso.cdr&lt;&#x2F;code&gt; to &lt;code&gt;Mojave.iso&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>jamf</title>
        <published>2018-12-12T08:22:37+01:00</published>
        <updated>2018-12-12T08:22:37+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/jamf/"/>
        <id>https://nbari.com/jamf/</id>
        
        <content type="html" xml:base="https://nbari.com/jamf/">&lt;p&gt;&lt;code&gt;softwareupdate -l&lt;&#x2F;code&gt; to see if there are macOS updates available.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;softwareupdate -ia&lt;&#x2F;code&gt; to install all updates.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;sudo jamf policy&lt;&#x2F;code&gt; to run all outstanding policies and updates for the apps,&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;sudo jamf recon&lt;&#x2F;code&gt; to update the inventory on the server.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>stty</title>
        <published>2018-12-10T11:02:33+01:00</published>
        <updated>2018-12-10T11:02:33+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/stty/"/>
        <id>https://nbari.com/stty/</id>
        
        <content type="html" xml:base="https://nbari.com/stty/">&lt;p&gt;If &lt;code&gt;reset&lt;&#x2F;code&gt; can&#x27;t clean your terminal, give a try to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;stty sane
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>tmux</title>
        <published>2018-12-07T13:57:16+01:00</published>
        <updated>2018-12-07T13:57:16+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/tmux/"/>
        <id>https://nbari.com/tmux/</id>
        
        <content type="html" xml:base="https://nbari.com/tmux/">&lt;p&gt;Set window title:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;,
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get pannel number:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;q
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Show clock:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;t
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Move pane to a new window:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;!
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Join panes:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: join-pane -s 0 -t 3  move pane 1 to window 3
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: join-pane -t :1      move current pane to window 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a new session:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: new -s &amp;lt;name&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;List sessions:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;s
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;w  expanded
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Move pane to a another session:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;m              mark the pane
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;w              go to the destination window&#x2F;session
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: join-pane
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or go to the pane you want to move, check the session name and windows you would like to move and try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: move-pane -t docker:0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;docker is the name of the session and 0 the window&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Split full window:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: split-window -fv      like &amp;lt;c-b&amp;gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;: split-window -fh      like &amp;lt;c-b&amp;gt;%
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Rotate panes:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;&amp;lt;c-o&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;List buffers:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;=
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Disconnect &#x2F; Detach users:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;c-b&amp;gt;D
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Attach to an existing session:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tmux a -t &amp;lt;name of session&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Block SSH on MacOS</title>
        <published>2018-12-01T09:44:00+01:00</published>
        <updated>2018-12-01T09:44:00+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/block-ssh-mac/"/>
        <id>https://nbari.com/block-ssh-mac/</id>
        
        <content type="html" xml:base="https://nbari.com/block-ssh-mac/">&lt;p&gt;To block incoming ssh connections, edit the &lt;code&gt;&#x2F;etc&#x2F;pf.conf&lt;&#x2F;code&gt; and add the following
line at the bottom:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;block in log quick proto tcp from any to any port 22
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can use vim or use something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo sh -c &amp;quot;echo &amp;#39;block in log quick proto tcp from any to any port 22&amp;#39; &amp;gt;&amp;gt; &#x2F;etc&#x2F;pf.conf&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then reload the pfrules:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo pfctl -Fa -f &#x2F;etc&#x2F;pf.conf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For this to work the firewall must be enabled.&lt;&#x2F;p&gt;
&lt;p&gt;Example of how file looks after the rule has been added: &lt;code&gt;cat &#x2F;etc&#x2F;pf.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# Default PF configuration file.
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# This file contains the main ruleset, which gets automatically loaded
&lt;&#x2F;span&gt;&lt;span&gt;# at startup.  PF will not be automatically enabled, however.  Instead,
&lt;&#x2F;span&gt;&lt;span&gt;# each component which utilizes PF is responsible for enabling and disabling
&lt;&#x2F;span&gt;&lt;span&gt;# PF via -E and -X as documented in pfctl(8).  That will ensure that PF
&lt;&#x2F;span&gt;&lt;span&gt;# is disabled only when the last enable reference is released.
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# Care must be taken to ensure that the main ruleset does not get flushed,
&lt;&#x2F;span&gt;&lt;span&gt;# as the nested anchors rely on the anchor point defined here. In addition,
&lt;&#x2F;span&gt;&lt;span&gt;# to the anchors loaded by this file, some system services would dynamically
&lt;&#x2F;span&gt;&lt;span&gt;# insert anchors into the main ruleset. These anchors will be added only when
&lt;&#x2F;span&gt;&lt;span&gt;# the system service is used and would removed on termination of the service.
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# See pf.conf(5) for syntax.
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# com.apple anchor point
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;scrub-anchor &amp;quot;com.apple&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;nat-anchor &amp;quot;com.apple&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;rdr-anchor &amp;quot;com.apple&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;dummynet-anchor &amp;quot;com.apple&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;anchor &amp;quot;com.apple&#x2F;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;load anchor &amp;quot;com.apple&amp;quot; from &amp;quot;&#x2F;etc&#x2F;pf.anchors&#x2F;com.apple&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# block incoming ssh
&lt;&#x2F;span&gt;&lt;span&gt;block in log quick proto tcp from any to any port 22
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Processlist</title>
        <published>2018-11-12T20:10:04+01:00</published>
        <updated>2018-11-12T20:10:04+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/processlist/"/>
        <id>https://nbari.com/processlist/</id>
        
        <content type="html" xml:base="https://nbari.com/processlist/">&lt;p&gt;Run &lt;code&gt;show processlist&lt;&#x2F;code&gt; every second:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysqladmin -uroot -p -i 1 processlist
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;-i 1&lt;&#x2F;code&gt; stands for interval one second&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OSI TLS</title>
        <published>2018-11-07T18:49:10+01:00</published>
        <updated>2018-11-07T18:49:10+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/osi-tls/"/>
        <id>https://nbari.com/osi-tls/</id>
        
        <content type="html" xml:base="https://nbari.com/osi-tls/">&lt;p&gt;Beside the OSI&#x2F;model, there is also the TCP&#x2F;IP Model:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Link Layer&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Internet (IP) Layer&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Transport Layer&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Application&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;tcp-ip-model.png&quot; alt=&quot;tcp-ip-model&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h1 id=&quot;osi-model&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#osi-model&quot; aria-label=&quot;Anchor link for: osi-model&quot;&gt;🔗&lt;&#x2F;a&gt;OSI Model&lt;&#x2F;h1&gt;
&lt;p&gt;The OSI model has a bit more granularity.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Physical Layer&lt;&#x2F;li&gt;
&lt;li&gt;Data Link Layer&lt;&#x2F;li&gt;
&lt;li&gt;Network Layer (IP)&lt;&#x2F;li&gt;
&lt;li&gt;Transport Layer (TCP)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Session Layer (TLS)&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Presentation Layer&lt;&#x2F;li&gt;
&lt;li&gt;Application Layer (HTTP)&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;TLS establishes an encrypted session. In the OSI model this is where TLS
operates. It sets up its session, and adds a layer of encryption for the
Application Layer (HTTP).&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;TLS and SSL do not fit neatly into any single layer of the OSI model or the TCP&#x2F;IP model. TLS runs &quot;on top of some reliable transport protocol (e.g., TCP),&quot; which would imply that it is above the transport layer. It serves encryption to higher layers, which is normally the function of the presentation layer. However, applications generally use TLS as if it were a transport layer, even though applications using TLS must actively control initiating TLS handshakes and handling of exchanged authentication certificates. https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Transport_Layer_Security&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>IRC</title>
        <published>2018-11-02T11:18:13+01:00</published>
        <updated>2018-11-02T11:18:13+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/irc/"/>
        <id>https://nbari.com/irc/</id>
        
        <content type="html" xml:base="https://nbari.com/irc/">&lt;p&gt;Change password password in irc:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;msg nickserv set password &amp;lt;password&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>combine two images</title>
        <published>2018-10-17T12:39:11+02:00</published>
        <updated>2018-10-17T12:39:11+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/combine-two-images/"/>
        <id>https://nbari.com/combine-two-images/</id>
        
        <content type="html" xml:base="https://nbari.com/combine-two-images/">&lt;p&gt;Combine in a single file 2 images:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;convert +append a.png b.png out.png
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;-append&lt;&#x2F;code&gt; will append vertically instead of horizontally (&lt;code&gt;+&lt;&#x2F;code&gt;)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>LS_COLORS</title>
        <published>2018-09-06T13:41:33+02:00</published>
        <updated>2018-09-06T13:41:33+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ls-colors/"/>
        <id>https://nbari.com/ls-colors/</id>
        
        <content type="html" xml:base="https://nbari.com/ls-colors/">&lt;p&gt;To remove the blinking of symbolic links when doing &lt;code&gt;ls&lt;&#x2F;code&gt; in Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;LS_COLORS=&amp;quot;ln=35&amp;quot; export LS_COLORS
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That will set the &lt;code&gt;ln=35&lt;&#x2F;code&gt; symbolic links to color purple.&lt;&#x2F;p&gt;
&lt;p&gt;Params for &lt;code&gt;LS_COLORS&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;di  Directory
&lt;&#x2F;span&gt;&lt;span&gt;fi  File
&lt;&#x2F;span&gt;&lt;span&gt;ln  Symbolic Link
&lt;&#x2F;span&gt;&lt;span&gt;pi  Fifo file
&lt;&#x2F;span&gt;&lt;span&gt;so  Socket file
&lt;&#x2F;span&gt;&lt;span&gt;bd  Block (buffered) special file
&lt;&#x2F;span&gt;&lt;span&gt;cd  Character (unbuffered) special file
&lt;&#x2F;span&gt;&lt;span&gt;or  Symbolic Link pointing to a non-existent file (orphan)
&lt;&#x2F;span&gt;&lt;span&gt;mi  Non-existent file pointed to by a symbolic link (visible when you type ls -l)
&lt;&#x2F;span&gt;&lt;span&gt;ex  File which is executable (ie. has &amp;#39;x&amp;#39; set in permissions).
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Another way is to edit &lt;code&gt;~&#x2F;.dircolors&lt;&#x2F;code&gt;  and replace the &lt;code&gt;05&lt;&#x2F;code&gt; (blinking) for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ORPHAN  05;37;45
&lt;&#x2F;span&gt;&lt;span&gt;MISSING 05;37;45
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ORPHAN  35
&lt;&#x2F;span&gt;&lt;span&gt;MISSING 35
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>htpasswd</title>
        <published>2018-09-02T11:50:26+02:00</published>
        <updated>2018-09-02T11:50:26+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/htpasswd/"/>
        <id>https://nbari.com/htpasswd/</id>
        
        <content type="html" xml:base="https://nbari.com/htpasswd/">&lt;p&gt;To create an &lt;code&gt;htpasswd&lt;&#x2F;code&gt; file (for htaccess &quot;authentication&quot;) using &lt;code&gt;openssl&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ printf &amp;quot;foo:$(openssl passwd -apr1 PASSWORD)\n&amp;quot; &amp;gt;&amp;gt; .htpasswd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If need to use &lt;code&gt;crypt&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ printf &amp;quot;foo:$(openssl passwd -crypt PASSWORD)\n&amp;quot; &amp;gt;&amp;gt; .htpasswd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Git SSH</title>
        <published>2018-08-29T16:26:34+02:00</published>
        <updated>2018-08-29T16:26:34+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/git-ssh/"/>
        <id>https://nbari.com/git-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/git-ssh/">&lt;p&gt;To create a git repository and access to it via ssh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh your.host
&lt;&#x2F;span&gt;&lt;span&gt;$ mkdir my-new-repo
&lt;&#x2F;span&gt;&lt;span&gt;$ cd my-new-repo
&lt;&#x2F;span&gt;&lt;span&gt;$ git --bare init
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To access your repo (clone it):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git clone ssh:&#x2F;&#x2F;user@your.host:2222&#x2F;~user&#x2F;my-new-repo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>self CA</title>
        <published>2018-08-27T12:33:05+02:00</published>
        <updated>2018-08-27T12:33:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/self-ca/"/>
        <id>https://nbari.com/self-ca/</id>
        
        <content type="html" xml:base="https://nbari.com/self-ca/">&lt;p&gt;Create a self signed CA (Certificate Authority)&lt;&#x2F;p&gt;
&lt;p&gt;Generate private key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl genrsa -des3 -out CA.key 4096
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To create a private key without password:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl genrsa -out CA.key 4096
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a root certificate:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl req -x509 -new -nodes -key CA.key -sha256 -out CA.pem -subj &amp;quot;&#x2F;CN=example.com&amp;quot; -days 365
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In one single command create the private key and the certificate:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl req -x509 -newkey rsa:4096 -sha256 -nodes -keyout CA.key -out CA.pem -subj &amp;quot;&#x2F;CN=myCA.tld&amp;quot; -days 365
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Import this cert in your system (trust it)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;create-certificates-to-be-signed-with-your-ca&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-certificates-to-be-signed-with-your-ca&quot; aria-label=&quot;Anchor link for: create-certificates-to-be-signed-with-your-ca&quot;&gt;🔗&lt;&#x2F;a&gt;Create certificates to be signed with your CA:&lt;&#x2F;h2&gt;
&lt;p&gt;Create a certificate requests &lt;code&gt;.csr&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mkdir example.tld
&lt;&#x2F;span&gt;&lt;span&gt;$ cd example.tld
&lt;&#x2F;span&gt;&lt;span&gt;$ openssl req -newkey rsa:4096 -sha256 -nodes -keyout example.key -out example.csr -subj &amp;quot;&#x2F;CN=example.tld&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Sign the certificate with the &lt;code&gt;CA&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl x509 -days 3065 -sha256 -req -in example.csr -CA ..&#x2F;CA.pem -CAkey ..&#x2F;CA.key -set_serial 01 -out example.tld.crt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bosh cheatsheet</title>
        <published>2018-08-23T11:26:21+02:00</published>
        <updated>2018-08-23T11:26:21+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bosh-cheatsheet/"/>
        <id>https://nbari.com/bosh-cheatsheet/</id>
        
        <content type="html" xml:base="https://nbari.com/bosh-cheatsheet/">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;bosh.io&#x2F;&quot;&gt;BOSH&lt;&#x2F;a&gt; is a project that unifies release engineering, deployment, and lifecycle management of small and large-scale cloud software.&lt;&#x2F;p&gt;
&lt;p&gt;Check your environment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh env
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set your deployment environment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ export BOSH_DEPLOYMENT=foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;if have multiple deployments in same &lt;code&gt;dir&lt;&#x2F;code&gt; better to use -d
&lt;code&gt;&amp;lt;deployment-name&amp;gt;&lt;&#x2F;code&gt; since many commands are bound to this variable.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To recreate your environment (virtualbox), remove the line that start with
&lt;code&gt;current_manifest&lt;&#x2F;code&gt; from the file &lt;code&gt;state.json&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sed -i &amp;quot;&amp;quot; &amp;#39;&#x2F;current_manifest_sha&#x2F;d&amp;#39; state.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Deploy your manifest:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh deploy deployments&#x2F;foo.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check your instances:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh instances
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check processes within instances:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh instances --ps
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;this is the output of &lt;code&gt;monit summary&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To ssh into the instance of your deployment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh ssh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you have multiple instances:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh ssh worker&#x2F;C17C59B3-FE07-4BAE-BD51-398010295BAD
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To login without the &lt;code&gt;uuid&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh ssh worker&#x2F;0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Show all your deployments:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh deployments
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Follow logs via ssh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh logs -f
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get logs only for a specifying &lt;code&gt;job&lt;&#x2F;code&gt; (&lt;code&gt;&#x2F;var&#x2F;vcap&#x2F;jobs&#x2F;&amp;lt;job name&amp;gt;&lt;&#x2F;code&gt;):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh logs -f --job foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Within an instance:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# tail -f &#x2F;var&#x2F;vcap&#x2F;sys&#x2F;log&#x2F;{*.log,*&#x2F;*.log}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;View a BOSH director&#x27;s Cloud Config:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh cloud-config
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Update params in default config:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh cloud-config &amp;gt; cloud.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Do you changes and then update the config:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh update-cloud-config cloud.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Update the running manifest:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh -d &amp;lt;your-deployment&amp;gt; manifest &amp;gt; manifest.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Do your changes and then re-deploy:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh -d &amp;lt;your-deployment&amp;gt; deploy manifest.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;List available stemcells:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh stemcells
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get recent tasks&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh tasks --recent
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Debug output for a task:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bosh task &amp;lt;id&amp;gt; --debug
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;bosh-lite&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#bosh-lite&quot; aria-label=&quot;Anchor link for: bosh-lite&quot;&gt;🔗&lt;&#x2F;a&gt;Bosh-lite&lt;&#x2F;h1&gt;
&lt;p&gt;To add more cpu, memory to the VM within virtualbox, edit &lt;code&gt;virtualbox&#x2F;cpi.yml&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;diff&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-diff &quot;&gt;&lt;code class=&quot;language-diff&quot; data-lang=&quot;diff&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-    cpus: 2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-    memory: 4096
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-    ephemeral_disk: 16_384
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+    cpus: 6
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+    memory: 16_384
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+    ephemeral_disk: 51_200
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To suspend (prevent bosh not starting when rebooting):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;VBoxManage controlvm $(jq -r &amp;#39;.current_vm_cid&amp;#39; state.json) savestate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To start:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;VBoxManage startvm $(jq -r &amp;#39;.current_vm_cid&amp;#39; state.json) --type headless
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;delete-every-orphaned-disk&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#delete-every-orphaned-disk&quot; aria-label=&quot;Anchor link for: delete-every-orphaned-disk&quot;&gt;🔗&lt;&#x2F;a&gt;Delete every orphaned disk&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bosh disks --orphaned | awk &amp;#39;NR&amp;gt;0 {print $1}&amp;#39; |  xargs -L1 bosh delete-disk -n
&lt;&#x2F;span&gt;&lt;span&gt;# or
&lt;&#x2F;span&gt;&lt;span&gt;bosh disks --orphaned | awk &amp;#39;$1 ~ &#x2F;^disk-&#x2F; {print $1}&amp;#39; | xargs -L1 bosh delete-disk -n
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To clean all including orphaned disks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bosh clean-up --all
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ZFS swap</title>
        <published>2018-08-20T20:51:31+02:00</published>
        <updated>2018-08-20T20:51:31+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zfs-swap/"/>
        <id>https://nbari.com/zfs-swap/</id>
        
        <content type="html" xml:base="https://nbari.com/zfs-swap/">&lt;p&gt;To add more swap on a ZFS system:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs create -V 64G -o org.freebsd:swap=on -o checksum=off -o compression=off -o dedup=off -o sync=disabled -o primarycache=none tank&#x2F;swap2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To add it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# swapon &#x2F;dev&#x2F;zvol&#x2F;tank&#x2F;swap2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To resize you could first remove it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# swapoff &#x2F;dev&#x2F;zvol&#x2F;tank&#x2F;swap
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then destroy it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs destroy tank&#x2F;swap
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>No history</title>
        <published>2018-08-11T15:59:53+02:00</published>
        <updated>2018-08-11T15:59:53+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/no-history/"/>
        <id>https://nbari.com/no-history/</id>
        
        <content type="html" xml:base="https://nbari.com/no-history/">&lt;p&gt;To avoid having command in history just prefix them with an empty space:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$⎵ uname
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If using &lt;code&gt;zsh&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ echo &amp;quot;&amp;quot; &amp;gt; ~&#x2F;.zsh_history &amp;amp; exec $SHELL -l
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>macOs sparseimage</title>
        <published>2018-08-10T11:55:08+02:00</published>
        <updated>2018-08-10T11:55:08+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/macos-sparseimage/"/>
        <id>https://nbari.com/macos-sparseimage/</id>
        
        <content type="html" xml:base="https://nbari.com/macos-sparseimage/">&lt;p&gt;To create an install disk using an spare disk:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ hdiutil create -size 6GB -fs JHFS+ -volname &amp;quot;macOS_installmedia&amp;quot; -type SPARSE ~&#x2F;Desktop&#x2F;macOS_installmedia
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Mount it (or double-click in Finder to mount):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ hdiutil mount ~&#x2F;Desktop&#x2F;macOS_installmedia.sparseimage
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Use the &lt;code&gt;createinstallmedia&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo &#x2F;Applications&#x2F;Install\ macOS\ High\ Sierra.app&#x2F;Contents&#x2F;Resources&#x2F;createinstallmedia --volume &#x2F;Volumes&#x2F;macOS_installmedia --applicationpath &#x2F;Applications&#x2F;Install\ macOS\ High\ Sierra.app
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>NATO phonetic alphabet</title>
        <published>2018-07-28T07:19:51+02:00</published>
        <updated>2018-07-28T07:19:51+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/nato-phonetic-alphabet/"/>
        <id>https://nbari.com/nato-phonetic-alphabet/</id>
        
        <content type="html" xml:base="https://nbari.com/nato-phonetic-alphabet/">&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th style=&quot;text-align: center&quot;&gt;Symbol&lt;&#x2F;th&gt;&lt;th&gt;Code word&lt;&#x2F;th&gt;&lt;th&gt;Pronunciation&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;A&lt;&#x2F;td&gt;&lt;td&gt;Alfa&lt;&#x2F;td&gt;&lt;td&gt;Al fah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;B&lt;&#x2F;td&gt;&lt;td&gt;Bravo&lt;&#x2F;td&gt;&lt;td&gt;Brah Voh&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;C&lt;&#x2F;td&gt;&lt;td&gt;Charlie&lt;&#x2F;td&gt;&lt;td&gt;Char Lee&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;D&lt;&#x2F;td&gt;&lt;td&gt;Delta&lt;&#x2F;td&gt;&lt;td&gt;Dell Tah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;E&lt;&#x2F;td&gt;&lt;td&gt;Echo&lt;&#x2F;td&gt;&lt;td&gt;Eck Oh&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;F&lt;&#x2F;td&gt;&lt;td&gt;Fox&lt;&#x2F;td&gt;&lt;td&gt;Foks Trot&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;G&lt;&#x2F;td&gt;&lt;td&gt;Golf&lt;&#x2F;td&gt;&lt;td&gt;Golf&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;H&lt;&#x2F;td&gt;&lt;td&gt;Hotel&lt;&#x2F;td&gt;&lt;td&gt;Hoh Tell&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;I&lt;&#x2F;td&gt;&lt;td&gt;India&lt;&#x2F;td&gt;&lt;td&gt;In Dee Ah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;J&lt;&#x2F;td&gt;&lt;td&gt;Juliett&lt;&#x2F;td&gt;&lt;td&gt;Jew Lee Ett&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;K&lt;&#x2F;td&gt;&lt;td&gt;Kilo&lt;&#x2F;td&gt;&lt;td&gt;Key Loh&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;L&lt;&#x2F;td&gt;&lt;td&gt;Lima&lt;&#x2F;td&gt;&lt;td&gt;Lee Mah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;M&lt;&#x2F;td&gt;&lt;td&gt;Mike&lt;&#x2F;td&gt;&lt;td&gt;Mike&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;N&lt;&#x2F;td&gt;&lt;td&gt;November&lt;&#x2F;td&gt;&lt;td&gt;No Vem Ber&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;O&lt;&#x2F;td&gt;&lt;td&gt;Oscar&lt;&#x2F;td&gt;&lt;td&gt;Oss Car&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;P&lt;&#x2F;td&gt;&lt;td&gt;Papa&lt;&#x2F;td&gt;&lt;td&gt;Pah Pah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;Q&lt;&#x2F;td&gt;&lt;td&gt;Quebec&lt;&#x2F;td&gt;&lt;td&gt;Keh Beck&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;R&lt;&#x2F;td&gt;&lt;td&gt;Romeo&lt;&#x2F;td&gt;&lt;td&gt;Row Me Oh&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;S&lt;&#x2F;td&gt;&lt;td&gt;Sierra&lt;&#x2F;td&gt;&lt;td&gt;See Air Ah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;T&lt;&#x2F;td&gt;&lt;td&gt;Tango&lt;&#x2F;td&gt;&lt;td&gt;Tang Go&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;U&lt;&#x2F;td&gt;&lt;td&gt;Uniform&lt;&#x2F;td&gt;&lt;td&gt;You Nee Form&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;V&lt;&#x2F;td&gt;&lt;td&gt;Victor&lt;&#x2F;td&gt;&lt;td&gt;Vik Tah&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;W&lt;&#x2F;td&gt;&lt;td&gt;Whiskey&lt;&#x2F;td&gt;&lt;td&gt;Wiss Key&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;X&lt;&#x2F;td&gt;&lt;td&gt;X-ray&lt;&#x2F;td&gt;&lt;td&gt;Ecks Ray&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;Y&lt;&#x2F;td&gt;&lt;td&gt;Yankee&lt;&#x2F;td&gt;&lt;td&gt;Yang Key&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;Z&lt;&#x2F;td&gt;&lt;td&gt;Zulu&lt;&#x2F;td&gt;&lt;td&gt;Zoo Loo&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;0&lt;&#x2F;td&gt;&lt;td&gt;Zero&lt;&#x2F;td&gt;&lt;td&gt;Zee Row&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;1&lt;&#x2F;td&gt;&lt;td&gt;One&lt;&#x2F;td&gt;&lt;td&gt;Wun&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;2&lt;&#x2F;td&gt;&lt;td&gt;Two&lt;&#x2F;td&gt;&lt;td&gt;Too&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;3&lt;&#x2F;td&gt;&lt;td&gt;Three&lt;&#x2F;td&gt;&lt;td&gt;Tree&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;4&lt;&#x2F;td&gt;&lt;td&gt;Four&lt;&#x2F;td&gt;&lt;td&gt;Fow Er&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;5&lt;&#x2F;td&gt;&lt;td&gt;Five&lt;&#x2F;td&gt;&lt;td&gt;Fife&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;6&lt;&#x2F;td&gt;&lt;td&gt;Six&lt;&#x2F;td&gt;&lt;td&gt;Six&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;7&lt;&#x2F;td&gt;&lt;td&gt;Seven&lt;&#x2F;td&gt;&lt;td&gt;Sev En&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;8&lt;&#x2F;td&gt;&lt;td&gt;Eight&lt;&#x2F;td&gt;&lt;td&gt;Ait&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td style=&quot;text-align: center&quot;&gt;9&lt;&#x2F;td&gt;&lt;td&gt;Nine&lt;&#x2F;td&gt;&lt;td&gt;Nine Er&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ZFS send receive</title>
        <published>2018-06-21T12:00:34+02:00</published>
        <updated>2018-06-21T12:00:34+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zfs-send-receive/"/>
        <id>https://nbari.com/zfs-send-receive/</id>
        
        <content type="html" xml:base="https://nbari.com/zfs-send-receive/">&lt;p&gt;To send a &lt;code&gt;zfs&lt;&#x2F;code&gt; dataset being no root, on the origin server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs allow -g wheel send,snapshot,hold tank&#x2F;foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the receiver, create the dataset and allow users in group wheel:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs create -o mountpoint=&#x2F;foo tank&#x2F;foo
&lt;&#x2F;span&gt;&lt;span&gt;# zfs allow -g wheel compression,mountpoint,create,mount,receive tank&#x2F;foo
&lt;&#x2F;span&gt;&lt;span&gt;# umount &#x2F;foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the origin server create the snapshot to send:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs snapshot -r tank&#x2F;foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the origin server send the dataset by using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zfs send -Rc tank&#x2F;foo@today | ssh -p 23 nbari@X.X.X.X &amp;#39;zfs receive -sFvu tank&#x2F;foo&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;-c&lt;&#x2F;code&gt; is for compress&quot; on the origin,  and &lt;code&gt;-s&lt;&#x2F;code&gt; to resume on the receiver if ssh goes down&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Then you may need to mount it on the receiver:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs mount tank&#x2F;foo
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;pbzip&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#pbzip&quot; aria-label=&quot;Anchor link for: pbzip&quot;&gt;🔗&lt;&#x2F;a&gt;pbzip&lt;&#x2F;h1&gt;
&lt;p&gt;To send the dataset locally:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs send -Rv tank&#x2F;vmail@today | pbzip &amp;gt; vmail.bz2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To receive:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# pbzip2 -dc | zfs receive -Fv tank&#x2F;vmail
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Enable Paste</title>
        <published>2018-06-19T19:55:16+02:00</published>
        <updated>2018-06-19T19:55:16+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/enable-paste/"/>
        <id>https://nbari.com/enable-paste/</id>
        
        <content type="html" xml:base="https://nbari.com/enable-paste/">&lt;p&gt;To enable paste in chrome, open the console and enter:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;var allowPaste = function(e){
&lt;&#x2F;span&gt;&lt;span&gt;  e.stopImmediatePropagation();
&lt;&#x2F;span&gt;&lt;span&gt;  return true;
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span&gt;document.addEventListener(&amp;#39;paste&amp;#39;, allowPaste, true);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>kld_list</title>
        <published>2018-06-15T09:46:25+02:00</published>
        <updated>2018-06-15T09:46:25+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/kld-list/"/>
        <id>https://nbari.com/kld-list/</id>
        
        <content type="html" xml:base="https://nbari.com/kld-list/">&lt;p&gt;To load kernel modules after local disks are mounted add this to &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kld_list=&amp;quot;fuse&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;in this case module fuse will be loaded&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>hw.(machine|model|ncpu)</title>
        <published>2018-06-13T15:27:01+02:00</published>
        <updated>2018-06-13T15:27:01+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/hw-machine-model-ncpu/"/>
        <id>https://nbari.com/hw-machine-model-ncpu/</id>
        
        <content type="html" xml:base="https://nbari.com/hw-machine-model-ncpu/">&lt;p&gt;To get an overview of the system:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# sysctl -a | egrep -i &amp;#39;hw.machine|hw.model|hw.ncpu&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;hw.machine: amd64
&lt;&#x2F;span&gt;&lt;span&gt;hw.model: Intel(R) Xeon(R) Silver 4110 CPU @ 2.10GHz
&lt;&#x2F;span&gt;&lt;span&gt;hw.ncpu: 16
&lt;&#x2F;span&gt;&lt;span&gt;hw.machine_arch: amd64
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>moosefs</title>
        <published>2018-06-12T21:29:49+02:00</published>
        <updated>2018-06-12T21:29:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/moosefs/"/>
        <id>https://nbari.com/moosefs/</id>
        
        <content type="html" xml:base="https://nbari.com/moosefs/">&lt;p&gt;Create a small distributed file system using 2 servers one acting as a mater&#x2F;chunkserver and other only as a chunkserver.&lt;&#x2F;p&gt;
&lt;p&gt;Install the required packages:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install moosefs3-cgi moosefs3-cgiserv moosefs3-chunkserver moosefs3-client
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For the master just add:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install moosefs3-master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In all the servers add to your &lt;code&gt;&#x2F;etc&#x2F;hosts&lt;&#x2F;code&gt; and entry for the &lt;code&gt;mfsmaster&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;X.X.X.X     mfsmaster
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Before starting the master, crate the file &lt;code&gt;&#x2F;var&#x2F;mfs&#x2F;metadata.mfs&lt;&#x2F;code&gt; with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;MFSM NEW
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a pool to share:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zfs create tank&#x2F;mfs -o mountpoint=&#x2F;mfs tank&#x2F;mfs
&lt;&#x2F;span&gt;&lt;span&gt;chown mfs:mfs &#x2F;mfs
&lt;&#x2F;span&gt;&lt;span&gt;chmod 770 &#x2F;mfs
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add to &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;mfs&#x2F;mfshdd.cfg&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;mfs
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And to &lt;code&gt;&#x2F;etc&#x2F;fstab&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mfsmount_magic  &#x2F;mnt&#x2F;mfs moosefs  rw,mfsmaster=mfsmaster,mfscachemode=DIRECT,mountprog=&#x2F;usr&#x2F;local&#x2F;bin&#x2F;mfsmount,failok  0  0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;notice the &lt;code&gt;failok&lt;&#x2F;code&gt; it will allow to boot in case master is down&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;As an alternative to &lt;code&gt;&#x2F;etc&#x2F;fstab&lt;&#x2F;code&gt;, edit &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;mfs&#x2F;mfsmount.cfg&lt;&#x2F;code&gt; with something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;rw
&lt;&#x2F;span&gt;&lt;span&gt;mfsmaster=mfsmaster
&lt;&#x2F;span&gt;&lt;span&gt;mfscachemode=DIRECT
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;mnt&#x2F;mfs
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then just by typing &lt;code&gt;mfsmount&lt;&#x2F;code&gt; will mount it.&lt;&#x2F;p&gt;
&lt;p&gt;Create the mount point:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir &#x2F;mnt&#x2F;mfs
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add to &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mfscgiserv_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;mfschunkserver_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And for the mater:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mfsmaster_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then load &lt;code&gt;fuse&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kldload fuse
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or by adding it to &lt;code&gt;&#x2F;boot&#x2F;loader.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;fuse_load=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;reboot and try to access: http:&#x2F;&#x2F;x.x.x.x:9425&#x2F;mfs.cgi you should see the moosefs admin page, also try to check your mount points, change to &lt;code&gt;&#x2F;mnt&#x2F;mfs&lt;&#x2F;code&gt; and give a try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;dd if=&#x2F;dev&#x2F;zero of=&#x2F;mnt&#x2F;mfs&#x2F;testfile bs=1G count=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In both server you may have the same file, to check the directory info:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mfsdirinfo -l *
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>MANIFEST No Such File or Directory</title>
        <published>2018-06-12T12:28:36+02:00</published>
        <updated>2018-06-12T12:28:36+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/manifest-no-such-file-or-directory/"/>
        <id>https://nbari.com/manifest-no-such-file-or-directory/</id>
        
        <content type="html" xml:base="https://nbari.com/manifest-no-such-file-or-directory/">&lt;p&gt;If when trying to install FreeBSD using &lt;code&gt;bsdinstall&lt;&#x2F;code&gt; you get:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;Error while fetching file:&#x2F;&#x2F;&#x2F;usr&#x2F;freebsd-dist&#x2F;MANIFEST&amp;quot; - no such file or directory
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;root@rescue:~ # mkdir -p &#x2F;usr&#x2F;freebsd-dist&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;root@rescue:~ # touch &#x2F;usr&#x2F;freebsd-dist&#x2F;MANIFEST
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then start again&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ctrl-backslash</title>
        <published>2018-06-11T17:49:59+02:00</published>
        <updated>2018-06-11T17:49:59+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ctrl-backslash/"/>
        <id>https://nbari.com/ctrl-backslash/</id>
        
        <content type="html" xml:base="https://nbari.com/ctrl-backslash/">&lt;p&gt;To send a quit signal to the process:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ctrl-\ # (backslash)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will send a &lt;code&gt;SIGQUIT&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>python site packages</title>
        <published>2018-06-07T14:22:46+02:00</published>
        <updated>2018-06-07T14:22:46+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/site-packages/"/>
        <id>https://nbari.com/site-packages/</id>
        
        <content type="html" xml:base="https://nbari.com/site-packages/">&lt;p&gt;To find the python &lt;code&gt;site-packages&lt;&#x2F;code&gt; paths:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ python -m site
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>DNS TCP</title>
        <published>2018-06-01T07:25:42+02:00</published>
        <updated>2018-06-01T07:25:42+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/dns-tcp/"/>
        <id>https://nbari.com/dns-tcp/</id>
        
        <content type="html" xml:base="https://nbari.com/dns-tcp/">&lt;p&gt;Unbound using DNS over TCP:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server:
&lt;&#x2F;span&gt;&lt;span&gt;private-domain: &amp;quot;plex.direct&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;forward-zone:
&lt;&#x2F;span&gt;&lt;span&gt;  name: &amp;quot;.&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  forward-ssl-upstream: yes
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 1.1.1.1@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 9.9.9.9@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 1.0.0.1@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 149.112.112.112@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 2606:4700:4700::1111@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 2606:4700:4700::1001@853
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 2620:fe::fe@853;
&lt;&#x2F;span&gt;&lt;span&gt;  forward-addr: 2620:fe::9@853;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# unbound-control -c &#x2F;var&#x2F;unbound&#x2F;unbound.conf lookup .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It should return something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;The following name servers are used for lookup of .
&lt;&#x2F;span&gt;&lt;span&gt;forwarding request:
&lt;&#x2F;span&gt;&lt;span&gt;Delegation with 0 names, of which 0 can be examined to query further addresses.
&lt;&#x2F;span&gt;&lt;span&gt;It provides 8 IP addresses.
&lt;&#x2F;span&gt;&lt;span&gt;1.1.1.1                 rto 401 msec, ttl 880, ping 33 var 92 rtt 401, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;9.9.9.9                 not in infra cache.
&lt;&#x2F;span&gt;&lt;span&gt;1.0.0.1                 rto 397 msec, ttl 899, ping 13 var 96 rtt 397, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;149.112.112.112         rto 418 msec, ttl 880, ping 58 var 90 rtt 418, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;2606:4700:4700::1111    rto 376 msec, ttl 880, ping 0 var 94 rtt 376, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;2606:4700:4700::1001    rto 376 msec, ttl 888, ping 0 var 94 rtt 376, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;2620:fe::fe             rto 376 msec, ttl 884, ping 0 var 94 rtt 376, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;span&gt;2620:fe::9              rto 376 msec, ttl 899, ping 0 var 94 rtt 376, tA 0, tAAAA 0, tother 0, EDNS 0 assumed.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh CanonicalDomains</title>
        <published>2018-05-30T12:22:23+02:00</published>
        <updated>2018-05-30T12:22:23+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-canonicaldomains/"/>
        <id>https://nbari.com/ssh-canonicaldomains/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-canonicaldomains/">&lt;p&gt;SSH Canonicalization&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CanonicalDomains example.com example.net example.org
&lt;&#x2F;span&gt;&lt;span&gt;# CanonicalizeFallbackLocal no
&lt;&#x2F;span&gt;&lt;span&gt;CanonicalizeHostname yes
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;Host *.example.com
&lt;&#x2F;span&gt;&lt;span&gt;	IdentityFile ~&#x2F;.ssh&#x2F;exampleCOM
&lt;&#x2F;span&gt;&lt;span&gt;	User foo
&lt;&#x2F;span&gt;&lt;span&gt;Host *.example.net
&lt;&#x2F;span&gt;&lt;span&gt;	IdentityFile ~&#x2F;.ssh&#x2F;exampleNET
&lt;&#x2F;span&gt;&lt;span&gt;	User foo
&lt;&#x2F;span&gt;&lt;span&gt;Host *.example.org
&lt;&#x2F;span&gt;&lt;span&gt;	User foo
&lt;&#x2F;span&gt;&lt;span&gt;	IdentityFile ~&#x2F;.ssh&#x2F;exampleORG
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;more info: https:&#x2F;&#x2F;dotfiles.tnetconsulting.net&#x2F;articles&#x2F;2016&#x2F;0109&#x2F;ssh-canonicalization.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pfsense</title>
        <published>2018-05-29T21:40:18+02:00</published>
        <updated>2018-05-29T21:40:18+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pfsense/"/>
        <id>https://nbari.com/pfsense/</id>
        
        <content type="html" xml:base="https://nbari.com/pfsense/">&lt;p&gt;How to connect using serial (usb&#x2F;com RJ45) port on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo cu -s 115200 -l &#x2F;dev&#x2F;tty.usbserial-DN04FSAL
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To bail out when you&#x27;re done, type &lt;code&gt;~.&lt;&#x2F;code&gt; as you would with SSH.&lt;&#x2F;p&gt;
&lt;p&gt;Boot example:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;pfsense-serial-1.png&quot; alt=&quot;pfsense boot&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;After installing (zfs on root):&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;pfsense-serial-2.png&quot; alt=&quot;pfsense setup&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The toy:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;pfsense-fw4.jpg&quot; alt=&quot;pfsense fw4a&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>packagecloud</title>
        <published>2018-05-28T11:22:19+02:00</published>
        <updated>2018-05-28T11:22:19+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/packagecloud/"/>
        <id>https://nbari.com/packagecloud/</id>
        
        <content type="html" xml:base="https://nbari.com/packagecloud/">&lt;p&gt;To upload all packages to packagecloud:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;package_cloud push immortal&#x2F;immortal&#x2F;el&#x2F;7 immortal_0.19.0_*.rpm --skip-errors
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;for .deb 386 needs to be i386&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>gzip</title>
        <published>2018-05-25T20:48:09+02:00</published>
        <updated>2018-05-25T20:48:09+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gzip/"/>
        <id>https://nbari.com/gzip/</id>
        
        <content type="html" xml:base="https://nbari.com/gzip/">&lt;p&gt;Gzip all files within a directory:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gzip -r .&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;find . -type f ! -name &amp;#39;*.gz&amp;#39; -exec gzip &amp;quot;{}&amp;quot; \;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>odroid C2</title>
        <published>2018-05-15T01:06:41+02:00</published>
        <updated>2018-05-15T01:06:41+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/odroid-c2/"/>
        <id>https://nbari.com/odroid-c2/</id>
        
        <content type="html" xml:base="https://nbari.com/odroid-c2/">&lt;p&gt;Disabling blinking blue led:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo none &amp;gt; &#x2F;sys&#x2F;class&#x2F;leds&#x2F;blue:heartbeat&#x2F;trigger
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To make the change permanent add the line to &lt;code&gt;&#x2F;etc&#x2F;rc.local&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>exec</title>
        <published>2018-05-14T11:46:01+02:00</published>
        <updated>2018-05-14T11:46:01+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/exec/"/>
        <id>https://nbari.com/exec/</id>
        
        <content type="html" xml:base="https://nbari.com/exec/">&lt;p&gt;&lt;strong&gt;exec&lt;&#x2F;strong&gt; is a functionality of an operating system that runs an executable
file in the context of an already existing process, replacing the previous
executable. https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Exec_(system_call)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;exec&lt;&#x2F;code&gt; replaces the current program in the current process, without &lt;code&gt;fork&lt;&#x2F;code&gt;ing a
new process.&lt;&#x2F;p&gt;
&lt;p&gt;Examples to use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;exec csh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;This will just replace the existing shell with &lt;code&gt;csh&lt;&#x2F;code&gt; and only need to type
&lt;code&gt;exit&lt;&#x2F;code&gt; once&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Within a script to startup python scripts, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;ENV_FOO=$(uname -a)
&lt;&#x2F;span&gt;&lt;span&gt;exec gunicorn
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case the &lt;code&gt;exec&lt;&#x2F;code&gt; tells sh to replace itself with &lt;code&gt;gunicorn&lt;&#x2F;code&gt; this helps to
send signals directly to &lt;code&gt;gunicorn&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;When using &lt;code&gt;exec&lt;&#x2F;code&gt; if command is not specified, any redirections take effect in the current shell:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;exec 2&amp;gt;&amp;amp;1
&lt;&#x2F;span&gt;&lt;span&gt;command
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If then calling the script:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ .&#x2F;script 1&amp;gt; out 2&amp;gt; err
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;All the output will be combined in &lt;code&gt;out&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sockstat</title>
        <published>2018-05-13T17:32:02+02:00</published>
        <updated>2018-05-13T17:32:02+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sockstat/"/>
        <id>https://nbari.com/sockstat/</id>
        
        <content type="html" xml:base="https://nbari.com/sockstat/">&lt;p&gt;The &lt;code&gt;sockstat&lt;&#x2F;code&gt; command list open Internet or UNIX domain sockets.&lt;&#x2F;p&gt;
&lt;p&gt;List open tcp in ipv4:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# sockstat -4l
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Show connectd sockets in port 443 and tcp:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# sockstat -P tcp -p 443 -c
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;List unix sockets:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# sockstat -u
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Ansible ad-hoc</title>
        <published>2018-05-09T10:24:04+02:00</published>
        <updated>2018-05-09T10:24:04+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ansible-adhoc/"/>
        <id>https://nbari.com/ansible-adhoc/</id>
        
        <content type="html" xml:base="https://nbari.com/ansible-adhoc/">&lt;p&gt;To send a command to all the servers within a playbook:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ansible all -a &amp;quot;service chronyd restart&amp;quot; -u devops --become
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;what-s-an-ad-hoc-command&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#what-s-an-ad-hoc-command&quot; aria-label=&quot;Anchor link for: what-s-an-ad-hoc-command&quot;&gt;🔗&lt;&#x2F;a&gt;What’s an ad-hoc command?&lt;&#x2F;h2&gt;
&lt;p&gt;An ad-hoc command is something that you might type in to do something really
quick, but don’t want to save for later.&lt;&#x2F;p&gt;
&lt;p&gt;http:&#x2F;&#x2F;docs.ansible.com&#x2F;ansible&#x2F;latest&#x2F;user_guide&#x2F;intro_adhoc.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>freebsd-update</title>
        <published>2018-05-05T15:58:57+02:00</published>
        <updated>2018-05-05T15:58:57+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/freebsd-update/"/>
        <id>https://nbari.com/freebsd-update/</id>
        
        <content type="html" xml:base="https://nbari.com/freebsd-update/">&lt;p&gt;Update Freebsd using &lt;code&gt;freebsd-update&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;Set in &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;kern_securelevel_enable=&amp;quot;NO&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;kern_securelevel=&amp;quot;0&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;reboot and then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# freebsd-update upgrade -r 10.4-RELEASE
&lt;&#x2F;span&gt;&lt;span&gt;# freebsd-update install
&lt;&#x2F;span&gt;&lt;span&gt;# reboot
&lt;&#x2F;span&gt;&lt;span&gt;# freebsd-update install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Repeate then to upgrade to 11.1 &lt;code&gt;freebsd-update upgrade -r 11.1-RELEASE&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Only security patches:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# freebsd-update fetch
&lt;&#x2F;span&gt;&lt;span&gt;# freebsd-update install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To update the packages:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# pkg-static upgrade -f
&lt;&#x2F;span&gt;&lt;span&gt;# freebsd-update install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;A forced upgrade of all installed packages will replace the packages with fresh versions from the repository even if the version number has not increased. This is required because of the ABI version change when upgrading between major versions of FreeBSD. The forced upgrade can be accomplished by performing:&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Influxdb</title>
        <published>2018-05-05T10:55:00+02:00</published>
        <updated>2018-05-05T10:55:00+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/influxdb/"/>
        <id>https://nbari.com/influxdb/</id>
        
        <content type="html" xml:base="https://nbari.com/influxdb/">&lt;p&gt;Basic influxdb queries, setup.&lt;&#x2F;p&gt;
&lt;p&gt;You can use &lt;code&gt;influx&lt;&#x2F;code&gt; (the influxdb shell) or use the http API on port &lt;code&gt;:8086&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Create and apply retention policy to a database: &lt;strong&gt;warning&lt;&#x2F;strong&gt; this may remove&#x2F;purge existing data&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CREATE RETENTION POLICY &amp;quot;30_days&amp;quot; ON collectd DURATION 30d REPLICATION 1 default
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;notice the ending &lt;code&gt;default&lt;&#x2F;code&gt; that means to apply the created policy&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;For 1 year, use &lt;code&gt;52w&lt;&#x2F;code&gt; (52 weeks)&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CREATE RETENTION POLICY &amp;quot;a_year&amp;quot; ON telegraf DURATION 52w REPLICATION 1 default
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Show retention policies:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; show retention policies
&lt;&#x2F;span&gt;&lt;span&gt;name    duration shardGroupDuration replicaN default
&lt;&#x2F;span&gt;&lt;span&gt;----    -------- ------------------ -------- -------
&lt;&#x2F;span&gt;&lt;span&gt;autogen 0s       168h0m0s           1        false
&lt;&#x2F;span&gt;&lt;span&gt;30_days 720h0m0s 24h0m0s            1        true
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Show databases contents (measurements):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; show measurements on collectd
&lt;&#x2F;span&gt;&lt;span&gt;name: measurements
&lt;&#x2F;span&gt;&lt;span&gt;name
&lt;&#x2F;span&gt;&lt;span&gt;----
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value
&lt;&#x2F;span&gt;&lt;span&gt;df_value
&lt;&#x2F;span&gt;&lt;span&gt;disk_io_time
&lt;&#x2F;span&gt;&lt;span&gt;disk_read
&lt;&#x2F;span&gt;&lt;span&gt;disk_weighted_io_time
&lt;&#x2F;span&gt;&lt;span&gt;disk_write
&lt;&#x2F;span&gt;&lt;span&gt;filecount_value
&lt;&#x2F;span&gt;&lt;span&gt;interface_rx
&lt;&#x2F;span&gt;&lt;span&gt;interface_tx
&lt;&#x2F;span&gt;&lt;span&gt;load_longterm
&lt;&#x2F;span&gt;&lt;span&gt;load_midterm
&lt;&#x2F;span&gt;&lt;span&gt;load_shortterm
&lt;&#x2F;span&gt;&lt;span&gt;memory_value
&lt;&#x2F;span&gt;&lt;span&gt;ntpd_value
&lt;&#x2F;span&gt;&lt;span&gt;processes_value
&lt;&#x2F;span&gt;&lt;span&gt;swap_value
&lt;&#x2F;span&gt;&lt;span&gt;tcpconns_value
&lt;&#x2F;span&gt;&lt;span&gt;uptime_value
&lt;&#x2F;span&gt;&lt;span&gt;users_value
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To see all series on a database:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; show series on collectd limit 4
&lt;&#x2F;span&gt;&lt;span&gt;key
&lt;&#x2F;span&gt;&lt;span&gt;---
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=idle
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=interrupt
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=nice
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get a specific serie:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; show series on collectd from cpu_value WHERE host = &amp;#39;aruba&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;key
&lt;&#x2F;span&gt;&lt;span&gt;---
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=idle
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=interrupt
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=nice
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=system
&lt;&#x2F;span&gt;&lt;span&gt;cpu_value,host=aruba,instance=0,type=percent,type_instance=user
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;loglevel-warn&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#loglevel-warn&quot; aria-label=&quot;Anchor link for: loglevel-warn&quot;&gt;🔗&lt;&#x2F;a&gt;loglevel warn&lt;&#x2F;h2&gt;
&lt;p&gt;To avoid multiple log lines like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;error=&amp;quot;NaN is an unsupported value for field value&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set the log level to &lt;code&gt;warn&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[logging]
&lt;&#x2F;span&gt;&lt;span&gt;  format = &amp;quot;auto&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  level = &amp;quot;info&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  suppress-logo = false
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;If you don&#x27;t have this entry add it to your &lt;code&gt;influxd.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h1 id=&quot;drop-series-not-getting-data&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#drop-series-not-getting-data&quot; aria-label=&quot;Anchor link for: drop-series-not-getting-data&quot;&gt;🔗&lt;&#x2F;a&gt;Drop series not getting data&lt;&#x2F;h1&gt;
&lt;p&gt;For example if using &lt;code&gt;collectd&lt;&#x2F;code&gt; and want to remove series that haven&#x27;t receive data in less than 10 days:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;HOSTS=$(influx -database &amp;quot;collectd&amp;quot; -execute &amp;quot;SHOW TAG VALUES WITH KEY=host&amp;quot; | awk &amp;#39;&#x2F;^host&#x2F; &amp;amp;&amp;amp; !a[$2]++ { print $2}&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;for i in ${HOSTS}
&lt;&#x2F;span&gt;&lt;span&gt;do
&lt;&#x2F;span&gt;&lt;span&gt;    PURGE=$(influx -database &amp;quot;collectd&amp;quot; -execute &amp;quot;SELECT last(value) FROM cpu_value WHERE host = &amp;#39;${i}&amp;#39; and time &amp;gt; now() -10d&amp;quot; | head -c1 | wc -c)
&lt;&#x2F;span&gt;&lt;span&gt;    if [ ${PURGE} -eq 0 ]; then
&lt;&#x2F;span&gt;&lt;span&gt;        echo &amp;quot;droping ${i}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        influx -database &amp;quot;collectd&amp;quot; -execute &amp;quot;DROP series WHERE host=&amp;#39;${i}&amp;#39;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    fi;
&lt;&#x2F;span&gt;&lt;span&gt;done
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;time-format&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#time-format&quot; aria-label=&quot;Anchor link for: time-format&quot;&gt;🔗&lt;&#x2F;a&gt;Time format&lt;&#x2F;h1&gt;
&lt;p&gt;Within the CLI use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; precision rfc3339
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Query using ssl:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ influx -ssl -unsafeSsl
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>womp</title>
        <published>2018-05-04T17:34:49+02:00</published>
        <updated>2018-05-04T17:34:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/womp/"/>
        <id>https://nbari.com/womp/</id>
        
        <content type="html" xml:base="https://nbari.com/womp/">&lt;p&gt;To enable &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Wake-on-LAN&quot;&gt;WoL (Wake-on-LAN)&lt;&#x2F;a&gt; on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo pmset womp 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then check the settings:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pmset -g
&lt;&#x2F;span&gt;&lt;span&gt;System-wide power settings:
&lt;&#x2F;span&gt;&lt;span&gt;Currently in use:
&lt;&#x2F;span&gt;&lt;span&gt; standbydelay         10800
&lt;&#x2F;span&gt;&lt;span&gt; standby              1
&lt;&#x2F;span&gt;&lt;span&gt; womp                 1
&lt;&#x2F;span&gt;&lt;span&gt; halfdim              1
&lt;&#x2F;span&gt;&lt;span&gt; hibernatefile        &#x2F;var&#x2F;vm&#x2F;sleepimage
&lt;&#x2F;span&gt;&lt;span&gt; powernap             1
&lt;&#x2F;span&gt;&lt;span&gt; gpuswitch            2
&lt;&#x2F;span&gt;&lt;span&gt; networkoversleep     0
&lt;&#x2F;span&gt;&lt;span&gt; disksleep            10
&lt;&#x2F;span&gt;&lt;span&gt; sleep                1 (sleep prevented by coreaudiod, coreaudiod, iTunes)
&lt;&#x2F;span&gt;&lt;span&gt; autopoweroffdelay    28800
&lt;&#x2F;span&gt;&lt;span&gt; hibernatemode        3
&lt;&#x2F;span&gt;&lt;span&gt; autopoweroff         1
&lt;&#x2F;span&gt;&lt;span&gt; ttyskeepawake        1
&lt;&#x2F;span&gt;&lt;span&gt; displaysleep         10
&lt;&#x2F;span&gt;&lt;span&gt; tcpkeepalive         1
&lt;&#x2F;span&gt;&lt;span&gt; acwake               0
&lt;&#x2F;span&gt;&lt;span&gt; lidwake              1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Domain Fronting</title>
        <published>2018-05-02T12:42:22+02:00</published>
        <updated>2018-05-02T12:42:22+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/domain-fronting/"/>
        <id>https://nbari.com/domain-fronting/</id>
        
        <content type="html" xml:base="https://nbari.com/domain-fronting/">&lt;p&gt;If your domain becomes blocked you &quot;could use&quot; another one to bypass the block:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl -s -H &amp;quot;Host: your-blocked-domain&amp;quot; -H &amp;quot;Connection: close&amp;quot; &amp;quot;https:&#x2F;&#x2F;new-tld&#x2F;your&#x2F;path&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Both domains must be hosted within the same CDN, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl -s -H &amp;quot;Host: images-na.ssl-images-amazon.com&amp;quot; -H &amp;quot;Connection: close&amp;quot; &amp;quot;https:&#x2F;&#x2F;cdn.atlassian.com&#x2F;images&#x2F;I&#x2F;01rgQ3jqo7L.css&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;https:&#x2F;&#x2F;www.optiv.com&#x2F;blog&#x2F;escape-and-evasion-egressing-restricted-networks&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;www.peew.pw&#x2F;blog&#x2F;2018&#x2F;2&#x2F;22&#x2F;how-i-identified-93k-domain-frontable-cloudfront-domains&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>IDNA</title>
        <published>2018-04-29T13:35:43+02:00</published>
        <updated>2018-04-29T13:35:43+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/idna/"/>
        <id>https://nbari.com/idna/</id>
        
        <content type="html" xml:base="https://nbari.com/idna/">&lt;p&gt;To encode&#x2F;decode a domain using &quot;Internationalized Domain Names&quot;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ python
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; x = u&amp;#39;qép.com&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; x.encode(&amp;#39;idna&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;b&amp;#39;xn--qp-bja.com&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; x.encode(&amp;#39;idna&amp;#39;).decode(&amp;#39;idna&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;qép.com&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; x == x.encode(&amp;#39;idna&amp;#39;).decode(&amp;#39;idna&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;True
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;To prevent non-international domain names containing hyphens from being accidentally interpreted as Punycode, international domain name Punycode sequences have a so-called ASCII Compatible Encoding (ACE) prefix, &quot;xn--&quot;, prepended.[2] Thus the domain name &quot;bücher.tld&quot; would be represented in ASCII as &quot;xn--bcher-kva.tld&quot;.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Find Windows Product Key</title>
        <published>2018-04-26T15:45:05+02:00</published>
        <updated>2018-04-26T15:45:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/find-windows-product-key/"/>
        <id>https://nbari.com/find-windows-product-key/</id>
        
        <content type="html" xml:base="https://nbari.com/find-windows-product-key/">&lt;p&gt;To retrive the windows product key you can run this within a windows power
shell:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;PS C:\Users\Monkey&amp;gt; (Get-WmiObject -query &amp;#39;select * from SoftwareLicensingService&amp;#39;).OA3xOriginalProductKey
&lt;&#x2F;span&gt;&lt;span&gt;xxxxx-xxxxx-xxxxx-xxxxx-xxxxx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>parallel xargs</title>
        <published>2018-04-26T15:18:01+02:00</published>
        <updated>2018-04-26T15:18:01+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/parallel-xargs/"/>
        <id>https://nbari.com/parallel-xargs/</id>
        
        <content type="html" xml:base="https://nbari.com/parallel-xargs/">&lt;p&gt;To run a script in parallel using  &lt;code&gt;xargs&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;printf %d\\n {0..9} | xargs -n 1 -P8 sleep
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case sleep is going to be call 8 times &lt;code&gt;(-P8)&lt;&#x2F;code&gt; using has the input an
int from 0 to 9.&lt;&#x2F;p&gt;
&lt;p&gt;From the man:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;-P maxprocs
&lt;&#x2F;span&gt;&lt;span&gt;    Parallel mode: run at most maxprocs invocations of utility at once.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>tmp</title>
        <published>2018-04-24T18:20:47+02:00</published>
        <updated>2018-04-24T18:20:47+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/tmp/"/>
        <id>https://nbari.com/tmp/</id>
        
        <content type="html" xml:base="https://nbari.com/tmp/">&lt;p&gt;Ways to create a temp file:&lt;&#x2F;p&gt;
&lt;p&gt;Using &lt;code&gt;mktemp&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mktemp &#x2F;tmp&#x2F;file.XXX
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The trailing &lt;code&gt;Xs&lt;&#x2F;code&gt; will be replaced with the process number and&#x2F;or a unique letter combination&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Creating a temp dir:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mktemp -d &#x2F;tmp&#x2F;dir.XXX
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Output could be saved into a variable:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;TMPDIR=$(mktemp -d &#x2F;tmp&#x2F;dir.XXXX)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#&quot; aria-label=&quot;Anchor link for: &quot;&gt;🔗&lt;&#x2F;a&gt;$$&lt;&#x2F;h2&gt;
&lt;p&gt;Using &lt;code&gt;$$&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;OUT=&#x2F;tmp&#x2F;file.out.$$
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here &lt;code&gt;$$&lt;&#x2F;code&gt; will be replaced with the current process PID.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;random&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#random&quot; aria-label=&quot;Anchor link for: random&quot;&gt;🔗&lt;&#x2F;a&gt;$RANDOM&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;OUT=&#x2F;tmp&#x2F;file.out.${RANDOM}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;$RANDOM&lt;&#x2F;code&gt; is an internal bash&#x2F;zsh function (not a constant) that returns a pseudorandom [1] integer in the range 0 - 32767&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pkg -o OSVERSION</title>
        <published>2018-04-21T20:38:04+02:00</published>
        <updated>2018-04-21T20:38:04+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pkg-osversion/"/>
        <id>https://nbari.com/pkg-osversion/</id>
        
        <content type="html" xml:base="https://nbari.com/pkg-osversion/">&lt;p&gt;When updating if get something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg: Newer FreeBSD version for package jsoncpp:
&lt;&#x2F;span&gt;&lt;span&gt;- package: 1101503
&lt;&#x2F;span&gt;&lt;span&gt;- running kernel: 1100506
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try &lt;code&gt;uname -KU&lt;&#x2F;code&gt; to get the version, and then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg -o OSVERSION=1100506 update -f
&lt;&#x2F;span&gt;&lt;span&gt;pkg -o OSVERSION=1100506 upgrade
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Ansible Patterns</title>
        <published>2018-04-19T21:56:08+02:00</published>
        <updated>2018-04-19T21:56:08+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ansible-patterns/"/>
        <id>https://nbari.com/ansible-patterns/</id>
        
        <content type="html" xml:base="https://nbari.com/ansible-patterns/">&lt;p&gt;To match hosts only starting with certain string a &lt;code&gt;regex&lt;&#x2F;code&gt; could be used for example to match hosts starting with the word &lt;code&gt;fabrik&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;---
&lt;&#x2F;span&gt;&lt;span&gt;- hosts: ~fabrik.*
&lt;&#x2F;span&gt;&lt;span&gt;  become: True
&lt;&#x2F;span&gt;&lt;span&gt;  tasks:
&lt;&#x2F;span&gt;&lt;span&gt;    - name: uname
&lt;&#x2F;span&gt;&lt;span&gt;      shell: uname -a
&lt;&#x2F;span&gt;&lt;span&gt;      register: uname
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    - debug:
&lt;&#x2F;span&gt;&lt;span&gt;        var: uname.stdout
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;notice the &lt;code&gt;~&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>MTU 1453</title>
        <published>2018-04-10T21:16:59+02:00</published>
        <updated>2018-04-10T21:16:59+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mtu-1453/"/>
        <id>https://nbari.com/mtu-1453/</id>
        
        <content type="html" xml:base="https://nbari.com/mtu-1453/">&lt;p&gt;If after upgrading macOS to &lt;code&gt;10.13.4&lt;&#x2F;code&gt; wifi stop working give a try to change the &lt;code&gt;MTU&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;mtu-1453.png&quot; alt=&quot;mtu&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>radtest</title>
        <published>2018-03-26T14:23:55+02:00</published>
        <updated>2018-03-26T14:23:55+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/radtest/"/>
        <id>https://nbari.com/radtest/</id>
        
        <content type="html" xml:base="https://nbari.com/radtest/">&lt;p&gt;To test a radius server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ brew install freeradius-server
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ radtest {username} {password} {hostname} 10 {radius_secret}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;10&lt;&#x2F;code&gt; is the &lt;code&gt;nas-port-number&lt;&#x2F;code&gt;. Is an integer between &lt;code&gt;0&lt;&#x2F;code&gt; and &lt;code&gt;2^31&lt;&#x2F;code&gt;, and it really
doesn&#x27;t matter what you put here.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>git basics</title>
        <published>2018-03-25T19:45:41+02:00</published>
        <updated>2018-03-25T19:45:41+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/git/"/>
        <id>https://nbari.com/git/</id>
        
        <content type="html" xml:base="https://nbari.com/git/">&lt;h3 id=&quot;git-branch-a&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#git-branch-a&quot; aria-label=&quot;Anchor link for: git-branch-a&quot;&gt;🔗&lt;&#x2F;a&gt;git branch -a&lt;&#x2F;h3&gt;
&lt;p&gt;This will print all branches, local or remote, to see only local branches:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git branch
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To only see remote branches:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git branch -r
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When you clone a repo after typing &lt;code&gt;git branch -a&lt;&#x2F;code&gt; the output will look
something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git branch -a
&lt;&#x2F;span&gt;&lt;span&gt;* master
&lt;&#x2F;span&gt;&lt;span&gt;  remotes&#x2F;origin&#x2F;HEAD -&amp;gt; origin&#x2F;master
&lt;&#x2F;span&gt;&lt;span&gt;  remotes&#x2F;origin&#x2F;master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;master&lt;&#x2F;code&gt; is a branch in the local repository, &lt;code&gt;remotes&#x2F;origin&#x2F;master&lt;&#x2F;code&gt; is a branch named master on the remote named &lt;code&gt;origin&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;remotes&#x2F;origin&#x2F;master
&lt;&#x2F;span&gt;&lt;span&gt;          |      |
&lt;&#x2F;span&gt;&lt;span&gt;          |    name of branch
&lt;&#x2F;span&gt;&lt;span&gt;   name of remote
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The branch can be referred as either &lt;code&gt;orign&#x2F;master&lt;&#x2F;code&gt; or &lt;code&gt;remotes&#x2F;origin&#x2F;master&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;remotes&#x2F;origin&#x2F;HEAD&lt;&#x2F;code&gt; is the default branch for the remote named &lt;code&gt;origin&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;clean-extra-files&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#clean-extra-files&quot; aria-label=&quot;Anchor link for: clean-extra-files&quot;&gt;🔗&lt;&#x2F;a&gt;Clean extra files&lt;&#x2F;h2&gt;
&lt;p&gt;For testing within your repository do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ touch foo{001..100}.tmp
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove all the files and untracked directories you can do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git clean -fd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;search-for-commit-content&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#search-for-commit-content&quot; aria-label=&quot;Anchor link for: search-for-commit-content&quot;&gt;🔗&lt;&#x2F;a&gt;Search for commit content&lt;&#x2F;h2&gt;
&lt;p&gt;To search for commit content, actual lines of source:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git grep &amp;lt;regexp&amp;gt; $(git rev-list --all)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or in case you get &quot;Argument list too long&quot;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git rev-list --all | xargs git grep expression
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;merge-squash-rebase&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#merge-squash-rebase&quot; aria-label=&quot;Anchor link for: merge-squash-rebase&quot;&gt;🔗&lt;&#x2F;a&gt;merge, squash, rebase&lt;&#x2F;h2&gt;
&lt;p&gt;So you are working on branch &lt;code&gt;master&lt;&#x2F;code&gt; haven&#x27;t add &amp;amp; commit your changes but
there has been an update on the origin&#x2F;master, you would like to keep your
changes, update master to be in sync with the origin and later in in one single
commit once you are done working submit your changes.&lt;&#x2F;p&gt;
&lt;p&gt;So if you are in &lt;code&gt;master&lt;&#x2F;code&gt; branch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git fetch -p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The -p is for prune and clean unused branches&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Now save your changes by creating a new branch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git checkout -b my-changes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add and commit your changes:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git add .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git commit -a -m &amp;quot;some changes&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To update master:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git checkout master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git pull
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To continue working on your changes go back to your branch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git checkout my-changes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can work here commit etc, but once you are done if you would like to just
have 1 single commit, you can &lt;code&gt;squash&lt;&#x2F;code&gt; your commits, for example to squash your
latest 6 commits, run this &lt;code&gt;git log --pretty=oneline --abbrev-commit&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; 1	    * 2018-03-28 dd34521 (HEAD -&amp;gt; my-changes) 5 &amp;lt;nbari&amp;gt; (1 second ago)
&lt;&#x2F;span&gt;&lt;span&gt; 2	    * 2018-03-28 f31a830 4 &amp;lt;nbari&amp;gt; (8 seconds ago)
&lt;&#x2F;span&gt;&lt;span&gt; 3	    * 2018-03-28 15a6af0 3 &amp;lt;nbari&amp;gt; (18 seconds ago)
&lt;&#x2F;span&gt;&lt;span&gt; 4	    * 2018-03-28 9aaf8b3 2 &amp;lt;nbari&amp;gt; (24 seconds ago)
&lt;&#x2F;span&gt;&lt;span&gt; 5	    * 2018-03-28 452b764 1 &amp;lt;nbari&amp;gt; (29 seconds ago)
&lt;&#x2F;span&gt;&lt;span&gt; 6	    * 2018-03-28 447dae2 my changes for foo bar &amp;lt;nbari&amp;gt; (42 seconds ago)
&lt;&#x2F;span&gt;&lt;span&gt;      | * 2018-03-28 4dcbf9b (origin&#x2F;master, origin&#x2F;HEAD) --- remote origin master --- &amp;lt;nbari&amp;gt; (9 minutes ago)
&lt;&#x2F;span&gt;&lt;span&gt;      | * 2018-03-28 b8c35f4 Update date.txt &amp;lt;nbari&amp;gt; (37 minutes ago)
&lt;&#x2F;span&gt;&lt;span&gt;      | * 2018-03-28 fae7a75 udpate &amp;lt;nbari&amp;gt; (49 minutes ago)
&lt;&#x2F;span&gt;&lt;span&gt;      | * 2018-03-28 7ff5384 Update date.txt &amp;lt;nbari&amp;gt; (77 minutes ago)
&lt;&#x2F;span&gt;&lt;span&gt;      |&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create an alias &lt;code&gt;gl&lt;&#x2F;code&gt; with this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git log --decorate --graph --oneline --all --date=short --pretty=format:&amp;#39;%C(bold blue)%ad%Creset %C(yellow)%h%Creset%C(auto)%d%Creset %s %C(dim magenta)&amp;lt;%an    &amp;gt;%Creset %C(dim green)(%ar)%Creset&amp;#39;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To squash the latest commits:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git rebase -i HEAD~6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will open your editor probably with something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pick 447dae2 my changes for foo bar
&lt;&#x2F;span&gt;&lt;span&gt;s 452b764 1
&lt;&#x2F;span&gt;&lt;span&gt;s 9aaf8b3 2
&lt;&#x2F;span&gt;&lt;span&gt;s 15a6af0 3
&lt;&#x2F;span&gt;&lt;span&gt;s f31a830 4
&lt;&#x2F;span&gt;&lt;span&gt;s dd34521 5
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Rebase 5302aa0..dd34521 onto 5302aa0 (6 commands)
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# Commands:
&lt;&#x2F;span&gt;&lt;span&gt;# p, pick = use commit
&lt;&#x2F;span&gt;&lt;span&gt;# r, reword = use commit, but edit the commit message
&lt;&#x2F;span&gt;&lt;span&gt;# e, edit = use commit, but stop for amending
&lt;&#x2F;span&gt;&lt;span&gt;# s, squash = use commit, but meld into previous commit
&lt;&#x2F;span&gt;&lt;span&gt;# f, fixup = like &amp;quot;squash&amp;quot;, but discard this commit&amp;#39;s log message
&lt;&#x2F;span&gt;&lt;span&gt;# x, exec = run command (the rest of the line) using shell
&lt;&#x2F;span&gt;&lt;span&gt;# d, drop = remove commit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Once you are done if you would like to merge (fast forward) you could rebase
your &lt;code&gt;my-changes&lt;&#x2F;code&gt; branch with &lt;code&gt;master&lt;&#x2F;code&gt;, so beeing in &lt;code&gt;my-changes&lt;&#x2F;code&gt; branch, do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git rebase master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you have conflics fix them  &lt;code&gt;git rebase --continue&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Then to merge your changes on master:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git checkout master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And finally:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git merge my-changes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;git-pull-rebase&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#git-pull-rebase&quot; aria-label=&quot;Anchor link for: git-pull-rebase&quot;&gt;🔗&lt;&#x2F;a&gt;git pull --rebase&lt;&#x2F;h2&gt;
&lt;p&gt;In some cases you may not want to create a branch to keep your changes and just
would like to have the lates changes, so if some cases this can be achived by
doing:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git  pull --rebase
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;reset-local-repository-branch-to-be-just-like-remote-repository&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#reset-local-repository-branch-to-be-just-like-remote-repository&quot; aria-label=&quot;Anchor link for: reset-local-repository-branch-to-be-just-like-remote-repository&quot;&gt;🔗&lt;&#x2F;a&gt;reset local repository branch to be just like remote repository&lt;&#x2F;h2&gt;
&lt;p&gt;In case you want have the repositories in sync:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git fetch origin
&lt;&#x2F;span&gt;&lt;span&gt;$ git reset --hard origin&#x2F;master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can do the same for a local branch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git reset --hard master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set fork to be the same as upstream:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git remote add upstream https:&#x2F;&#x2F;github.com&#x2F;some_user&#x2F;some_repo
&lt;&#x2F;span&gt;&lt;span&gt;git fetch upstream
&lt;&#x2F;span&gt;&lt;span&gt;git checkout master
&lt;&#x2F;span&gt;&lt;span&gt;git reset --hard upstream&#x2F;master
&lt;&#x2F;span&gt;&lt;span&gt;git push origin master --force
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Git Web Deployment Workflow</title>
        <published>2018-03-25T12:28:19+02:00</published>
        <updated>2018-03-25T12:28:19+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/git-web-deployment-workflow/"/>
        <id>https://nbari.com/git-web-deployment-workflow/</id>
        
        <content type="html" xml:base="https://nbari.com/git-web-deployment-workflow/">&lt;p&gt;The idea behind is to push to a remote repository on the same web&#x2F;service server
and a &lt;code&gt;post-receive&lt;&#x2F;code&gt; hook will checkout the files to the public directory.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;configuring-the-server&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configuring-the-server&quot; aria-label=&quot;Anchor link for: configuring-the-server&quot;&gt;🔗&lt;&#x2F;a&gt;Configuring the server&lt;&#x2F;h2&gt;
&lt;p&gt;Create the repository:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cd $HOME
&lt;&#x2F;span&gt;&lt;span&gt;$ mkdir my-site.git
&lt;&#x2F;span&gt;&lt;span&gt;$ cd my-site.git
&lt;&#x2F;span&gt;&lt;span&gt;$ git init --bare
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The idea of using &lt;code&gt;.git&lt;&#x2F;code&gt; as a suffix is just to distinguish between other
directories.&lt;&#x2F;p&gt;
&lt;p&gt;Crate the directory where you would like to deploy, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mkdir &#x2F;home&#x2F;sites&#x2F;my-site
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;create-a-post-receive-hook&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-a-post-receive-hook&quot; aria-label=&quot;Anchor link for: create-a-post-receive-hook&quot;&gt;🔗&lt;&#x2F;a&gt;Create a post-receive hook&lt;&#x2F;h3&gt;
&lt;p&gt;When you create a &lt;strong&gt;bare&lt;&#x2F;strong&gt; repo, normally you get this structure:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; my-site.git
&lt;&#x2F;span&gt;&lt;span&gt;├── HEAD
&lt;&#x2F;span&gt;&lt;span&gt;├── config
&lt;&#x2F;span&gt;&lt;span&gt;├── description
&lt;&#x2F;span&gt;&lt;span&gt;├── hooks
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── applypatch-msg.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── commit-msg.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── fsmonitor-watchman.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── post-update.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── pre-applypatch.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── pre-commit.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── pre-push.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── pre-rebase.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── pre-receive.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── prepare-commit-msg.sample
&lt;&#x2F;span&gt;&lt;span&gt;│   └── update.sample
&lt;&#x2F;span&gt;&lt;span&gt;├── info
&lt;&#x2F;span&gt;&lt;span&gt;│   └── exclude
&lt;&#x2F;span&gt;&lt;span&gt;├── objects
&lt;&#x2F;span&gt;&lt;span&gt;│   ├── info
&lt;&#x2F;span&gt;&lt;span&gt;│   └── pack
&lt;&#x2F;span&gt;&lt;span&gt;└── refs
&lt;&#x2F;span&gt;&lt;span&gt;    ├── heads
&lt;&#x2F;span&gt;&lt;span&gt;    └── tags
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;post-receive&lt;&#x2F;code&gt; hook (located within the &lt;code&gt;hooks&lt;&#x2F;code&gt; directory) will
be called after git has received commits, for example create the file
&lt;code&gt;$HOME&#x2F;my-site.git&#x2F;hooks&#x2F;post-receive&lt;&#x2F;code&gt; with this contents:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;git --work-tree=&#x2F;home&#x2F;sites&#x2F;my-site checkout -f
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Set &lt;code&gt;exec&lt;&#x2F;code&gt; permissions to the hook:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;chmod +x hooks&#x2F;post-receive
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;configure-your-local-machine&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configure-your-local-machine&quot; aria-label=&quot;Anchor link for: configure-your-local-machine&quot;&gt;🔗&lt;&#x2F;a&gt;Configure your local machine&lt;&#x2F;h2&gt;
&lt;p&gt;Once you have setup your remote repository and the &lt;code&gt;post-receive&lt;&#x2F;code&gt; hook, you
could add a second origin, something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git remote add live ssh:&#x2F;&#x2F;username@your-host.tld&#x2F;~&#x2F;my-site.git
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Normally your project already has a remote named &quot;origin&quot; in where you can
continue pushing your changes, branches etc; this new remote named &lt;code&gt;live&lt;&#x2F;code&gt; will
be only used to checkout&#x2F;publish your changes after receiving a commit.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;deploy&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#deploy&quot; aria-label=&quot;Anchor link for: deploy&quot;&gt;🔗&lt;&#x2F;a&gt;Deploy&lt;&#x2F;h2&gt;
&lt;p&gt;Just need to push to your remote named &lt;strong&gt;live&lt;&#x2F;strong&gt; in this example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git push live master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After doing this, you could check your remote server and check the contents of
&lt;code&gt;&#x2F;home&#x2F;sites&#x2F;my-site&lt;&#x2F;code&gt; it should be updated to your latest changes.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OBJC_DISABLE_INITIALIZE_FORK_SAFETY</title>
        <published>2018-03-22T15:28:13+01:00</published>
        <updated>2018-03-22T15:28:13+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/objc-disable-initialize-fork-safety/"/>
        <id>https://nbari.com/objc-disable-initialize-fork-safety/</id>
        
        <content type="html" xml:base="https://nbari.com/objc-disable-initialize-fork-safety/">&lt;p&gt;In macOS High Sierra if getting this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;objc[55492]: +[__NSPlaceholderDate initialize] may have been in progress in another thread when fork() was called.
&lt;&#x2F;span&gt;&lt;span&gt;objc[55492]: +[__NSPlaceholderDate initialize] may have been in progress in another thread when fork() was called. We cannot safely call it or ignore it in the fork() child process. Crashing instead. Set a breakpoint on objc_initializeAfterForkError to debug.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Define:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will fix temporally fix the problem and allow program to continue
executing, more about this issue here: http:&#x2F;&#x2F;sealiesoftware.com&#x2F;blog&#x2F;archive&#x2F;2017&#x2F;6&#x2F;5&#x2F;Objective-C_and_fork_in_macOS_1013.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>bash git prompt</title>
        <published>2018-03-20T22:28:21+01:00</published>
        <updated>2018-03-20T22:28:21+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bash-git-prompt/"/>
        <id>https://nbari.com/bash-git-prompt/</id>
        
        <content type="html" xml:base="https://nbari.com/bash-git-prompt/">&lt;p&gt;To display the current branch in the terminal prompt using bash, add the
following lines to &lt;code&gt;~&#x2F;.bash_profile&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;parse_git_branch() {
&lt;&#x2F;span&gt;&lt;span&gt;    git branch 2&amp;gt; &#x2F;dev&#x2F;null | sed -e &amp;#39;&#x2F;^[^*]&#x2F;d&amp;#39; -e &amp;#39;s&#x2F;* \(.*\)&#x2F; (\1)&#x2F;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;export PS1=&amp;quot;\u@\h \[\033[32m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\] $ &amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>terms</title>
        <published>2018-03-18T22:10:55+01:00</published>
        <updated>2018-03-18T22:10:55+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/terms/"/>
        <id>https://nbari.com/terms/</id>
        
        <content type="html" xml:base="https://nbari.com/terms/">&lt;p&gt;Some common terms and definition&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;IT is full of buzzwords ...&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;sre-site-reliability-engineering&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#sre-site-reliability-engineering&quot; aria-label=&quot;Anchor link for: sre-site-reliability-engineering&quot;&gt;🔗&lt;&#x2F;a&gt;SRE -- Site Reliability Engineering&lt;&#x2F;h2&gt;
&lt;p&gt;Site Reliability Engineering (SRE) is a discipline that incorporates aspects of
software engineering and applies that to IT operations problems. The main goals
are to create ultra-scalable and highly reliable software systems.&lt;&#x2F;p&gt;
&lt;p&gt;A site reliability engineer (SRE) will spend up to 50% of their time doing &quot;ops&quot;
related work and spend the other 50% of their time on development&lt;&#x2F;p&gt;
&lt;h2 id=&quot;devops&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#devops&quot; aria-label=&quot;Anchor link for: devops&quot;&gt;🔗&lt;&#x2F;a&gt;DevOps&lt;&#x2F;h2&gt;
&lt;p&gt;DevOps (development and operations) is a software development phrase used to
describe a type of agile relationship between Development and IT Operations. The
main characteristic of the DevOps movement is to strongly advocate automation
and monitoring at all steps of software construction, from integration, testing,
releasing to deployment and infrastructure management.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;DevOps isn&#x27;t a job description&#x2F;title, is a methodology.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;provisioning&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#provisioning&quot; aria-label=&quot;Anchor link for: provisioning&quot;&gt;🔗&lt;&#x2F;a&gt;Provisioning&lt;&#x2F;h2&gt;
&lt;p&gt;Provisioning is the process of preparing new systems for users. The systems are
generally virtualized and instantiated on demand. Configuration of the machines
to install operating systems, middleware etc. is handled by automated system
configuration management tools, which also verify that the desired configuration is maintained.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;canary-release&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#canary-release&quot; aria-label=&quot;Anchor link for: canary-release&quot;&gt;🔗&lt;&#x2F;a&gt;Canary Release&lt;&#x2F;h2&gt;
&lt;p&gt;A go-live strategy in which a new application version is released to a small
subset of production servers and heavily monitored to determine whether it
behaves as expected. If everything seems stable, the new version is rolled out
to the entire production environment.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;configuration-management&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configuration-management&quot; aria-label=&quot;Anchor link for: configuration-management&quot;&gt;🔗&lt;&#x2F;a&gt;Configuration Management&lt;&#x2F;h2&gt;
&lt;p&gt;A term for establishing and maintaining consistent settings and functional
attributes for a system. It includes tools for system administration tasks such
as IT infrastructure automation. (ansible&#x2F;salt)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;orchestrator&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#orchestrator&quot; aria-label=&quot;Anchor link for: orchestrator&quot;&gt;🔗&lt;&#x2F;a&gt;Orchestrator&lt;&#x2F;h2&gt;
&lt;p&gt;A tool to provision, deploy, manage network, check security groups, create
VM&#x27;s that in some cases can do the whole in an automated way based on defined
conditions. (saltstack)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;iac-infrastructure-as-code&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#iac-infrastructure-as-code&quot; aria-label=&quot;Anchor link for: iac-infrastructure-as-code&quot;&gt;🔗&lt;&#x2F;a&gt;IaC -- Infrastructure as code&lt;&#x2F;h2&gt;
&lt;p&gt;The process of managing and provisioning computer data centers through
machine-readable definition files, rather than physical hardware configuration
or interactive configuration tools. (terraform)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;osi-model-open-systems-interconnection&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#osi-model-open-systems-interconnection&quot; aria-label=&quot;Anchor link for: osi-model-open-systems-interconnection&quot;&gt;🔗&lt;&#x2F;a&gt;OSI model (Open Systems Interconnection)&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; 7. Application   --- (your app)
&lt;&#x2F;span&gt;&lt;span&gt; 6. Presentation
&lt;&#x2F;span&gt;&lt;span&gt; 5. Session
&lt;&#x2F;span&gt;&lt;span&gt; 4. Transport     --- (TCP&#x2F;UDP)
&lt;&#x2F;span&gt;&lt;span&gt; 3. Network
&lt;&#x2F;span&gt;&lt;span&gt; 2. Data link
&lt;&#x2F;span&gt;&lt;span&gt; 1. Physical layer
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;nbari.com&#x2F;post&#x2F;osi&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Linux Mac Address</title>
        <published>2018-03-14T14:51:38+01:00</published>
        <updated>2018-03-14T14:51:38+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/linux-mac-address/"/>
        <id>https://nbari.com/linux-mac-address/</id>
        
        <content type="html" xml:base="https://nbari.com/linux-mac-address/">&lt;p&gt;To get the &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;MAC_address&quot;&gt;MAC address&lt;&#x2F;a&gt; from an
interface in linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cat &#x2F;sys&#x2F;class&#x2F;net&#x2F;eth1&#x2F;address
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh permissions are too open</title>
        <published>2018-03-12T20:41:19+01:00</published>
        <updated>2018-03-12T20:41:19+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-permissions-are-too-open/"/>
        <id>https://nbari.com/ssh-permissions-are-too-open/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-permissions-are-too-open/">&lt;p&gt;To set mode &lt;code&gt;0400&lt;&#x2F;code&gt; to all your ssh keys:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ find ~&#x2F;.ssh&#x2F;* -type f -name &amp;quot;id*&amp;quot; -not -iname &amp;quot;*.pub&amp;quot; -exec chmod 0400 {} \+
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>nohup - disown</title>
        <published>2018-03-10T16:07:46+01:00</published>
        <updated>2018-03-10T16:07:46+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/nohup-disown/"/>
        <id>https://nbari.com/nohup-disown/</id>
        
        <content type="html" xml:base="https://nbari.com/nohup-disown/">&lt;p&gt;In case you don&#x27;t have screen&#x2F;tmux and need to run a process that won&#x27;t be
terminated after closing the terminal:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ nohup your command &amp;amp;
&lt;&#x2F;span&gt;&lt;span&gt;$ exit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ your command &amp;amp;
&lt;&#x2F;span&gt;&lt;span&gt;$ disown
&lt;&#x2F;span&gt;&lt;span&gt;$ exit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you have multiple commands:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sleep 3600 &amp;amp;
&lt;&#x2F;span&gt;&lt;span&gt;$ sleep 86400 &amp;amp;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;By typing &lt;code&gt;jobs&lt;&#x2F;code&gt; something like this appears:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[1]  - running    sleep 3600
&lt;&#x2F;span&gt;&lt;span&gt;[2]  + running    sleep 86400
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To &lt;code&gt;disown&lt;&#x2F;code&gt; let&#x27;s say only job 2:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ disown %2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;process-already-running&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#process-already-running&quot; aria-label=&quot;Anchor link for: process-already-running&quot;&gt;🔗&lt;&#x2F;a&gt;process already running&lt;&#x2F;h1&gt;
&lt;p&gt;You can pause it &lt;code&gt;ctrl+z&lt;&#x2F;code&gt;,  something like this will appear:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sleep 3600
&lt;&#x2F;span&gt;&lt;span&gt;^Z
&lt;&#x2F;span&gt;&lt;span&gt;zsh: suspended  sleep 3600
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then type &lt;code&gt;bg&lt;&#x2F;code&gt; to put it in background:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ bg
&lt;&#x2F;span&gt;&lt;span&gt;[1]  + continued  sleep 3600
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After that you can disown and exit:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ disown
&lt;&#x2F;span&gt;&lt;span&gt;$ exit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>wait_for_connection</title>
        <published>2018-03-07T20:46:56+01:00</published>
        <updated>2018-03-07T20:46:56+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/wait-for-connection/"/>
        <id>https://nbari.com/wait-for-connection/</id>
        
        <content type="html" xml:base="https://nbari.com/wait-for-connection/">&lt;p&gt;Reboot and wait until server is reachable&#x2F;usable:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;- name: Something that may reboot
&lt;&#x2F;span&gt;&lt;span&gt;  shell: echo &amp;quot;true&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  register: should_reboot
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;- name: Rebooting ...
&lt;&#x2F;span&gt;&lt;span&gt;  shell: sleep 2 &amp;amp;&amp;amp; &#x2F;sbin&#x2F;shutdown -r now &amp;quot;Reboot required&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  async: 1
&lt;&#x2F;span&gt;&lt;span&gt;  poll: 0
&lt;&#x2F;span&gt;&lt;span&gt;  ignore_errors: true
&lt;&#x2F;span&gt;&lt;span&gt;  register: rebooting
&lt;&#x2F;span&gt;&lt;span&gt;  when: should_reboot.stdout == &amp;quot;true&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;- name: Wait for rebooted servers to come back
&lt;&#x2F;span&gt;&lt;span&gt;  wait_for_connection:
&lt;&#x2F;span&gt;&lt;span&gt;    connect_timeout: 20
&lt;&#x2F;span&gt;&lt;span&gt;    sleep: 5
&lt;&#x2F;span&gt;&lt;span&gt;    delay: 5
&lt;&#x2F;span&gt;&lt;span&gt;    timeout: 60
&lt;&#x2F;span&gt;&lt;span&gt;  when: rebooting|changed
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For checking&#x2F;testing if a remote host&#x2F;service is up:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;- name: Wait for service to be ready
&lt;&#x2F;span&gt;&lt;span&gt;  wait_for:
&lt;&#x2F;span&gt;&lt;span&gt;    port: 8080
&lt;&#x2F;span&gt;&lt;span&gt;    host: 127.0.0.1
&lt;&#x2F;span&gt;&lt;span&gt;    connect_timeout: 3
&lt;&#x2F;span&gt;&lt;span&gt;    delay: 3
&lt;&#x2F;span&gt;&lt;span&gt;    timeout: 30
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Linux version</title>
        <published>2018-03-02T10:20:22+01:00</published>
        <updated>2018-03-02T10:20:22+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/linux-version/"/>
        <id>https://nbari.com/linux-version/</id>
        
        <content type="html" xml:base="https://nbari.com/linux-version/">&lt;p&gt;To determine what linux version you are using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cat &#x2F;etc&#x2F;*elease
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Delete Guest</title>
        <published>2018-02-28T09:53:50+01:00</published>
        <updated>2018-02-28T09:53:50+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/delete-guest/"/>
        <id>https://nbari.com/delete-guest/</id>
        
        <content type="html" xml:base="https://nbari.com/delete-guest/">&lt;p&gt;To delete macOS Guest user:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo dscl . -delete &#x2F;Users&#x2F;Guest
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will avoid showing the Guest user on the login screen&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>gpg</title>
        <published>2018-02-27T12:33:49+01:00</published>
        <updated>2018-02-27T12:33:49+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/gpg/"/>
        <id>https://nbari.com/gpg/</id>
        
        <content type="html" xml:base="https://nbari.com/gpg/">&lt;p&gt;Install gpg on macOS:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install gnupg pinentry-mac
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;if required restart gpg-agent with &lt;code&gt;gpgconf --kill gpg-agent&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To create a &lt;code&gt;gpg&lt;&#x2F;code&gt; key in batch mode, create a file named &lt;code&gt;gpg-key-script&lt;&#x2F;code&gt; with
this value:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Key-Type: 1
&lt;&#x2F;span&gt;&lt;span&gt;Key-Length: 2048
&lt;&#x2F;span&gt;&lt;span&gt;Subkey-Type: 1
&lt;&#x2F;span&gt;&lt;span&gt;Subkey-Length: 2048
&lt;&#x2F;span&gt;&lt;span&gt;Name-Real: your name
&lt;&#x2F;span&gt;&lt;span&gt;Name-Comment: your comment
&lt;&#x2F;span&gt;&lt;span&gt;Name-Email: your@email
&lt;&#x2F;span&gt;&lt;span&gt;Expire-Date: 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next you could do something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ gpg --homedir &#x2F;salt&#x2F;gpgkeys --batch --gen-key gen-key-script
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;backup-private-key&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#backup-private-key&quot; aria-label=&quot;Anchor link for: backup-private-key&quot;&gt;🔗&lt;&#x2F;a&gt;Backup private key&lt;&#x2F;h2&gt;
&lt;p&gt;To save the private key to a file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gpg --homedir &#x2F;salt&#x2F;gpgkeys -a --export-secret-keys &amp;gt; private.key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;No need to export the public key&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To import the pair of keys later just do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;gpg --import private.key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;rngd-linux&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#rngd-linux&quot; aria-label=&quot;Anchor link for: rngd-linux&quot;&gt;🔗&lt;&#x2F;a&gt;rngd (linux)&lt;&#x2F;h1&gt;
&lt;p&gt;If you don&#x27;t have an source of entropy it may take a while to generate the keys,
if you are in a linux system you could install &lt;code&gt;rngd&lt;&#x2F;code&gt; or (&lt;code&gt;rng-tools&lt;&#x2F;code&gt;) and then type:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# rngd -v
&lt;&#x2F;span&gt;&lt;span&gt;Unable to open file: &#x2F;dev&#x2F;tpm0
&lt;&#x2F;span&gt;&lt;span&gt;can&amp;#39;t open any entropy source
&lt;&#x2F;span&gt;&lt;span&gt;Maybe RNG device modules are not loaded
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To start &lt;code&gt;rngd&lt;&#x2F;code&gt; usind &lt;code&gt;&#x2F;dev&#x2F;urandom&lt;&#x2F;code&gt;, do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# cp &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;rngd.service &#x2F;etc&#x2F;systemd&#x2F;system
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;rngd.service&lt;&#x2F;code&gt; and replace the line starting with &lt;code&gt;ExecStart&lt;&#x2F;code&gt; with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ExecStart=&#x2F;sbin&#x2F;rngd -f -r &#x2F;dev&#x2F;urandom
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Reload systemd:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# systemctl daemon-reload
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And restart &lt;code&gt;rngd&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# systemctl restart rngd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;using-gpg-as-ssh&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#using-gpg-as-ssh&quot; aria-label=&quot;Anchor link for: using-gpg-as-ssh&quot;&gt;🔗&lt;&#x2F;a&gt;using gpg as ssh&lt;&#x2F;h1&gt;
&lt;p&gt;You need to install &lt;code&gt;monkeysphere&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ brew install monkeysphere
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove password from a subkey &quot;authentication [A]&quot; and convert later to ssh id_rsa:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ gpg --export-secret-subkey F6C7D705867D430! | gpg --home &#x2F;tmp&#x2F;x --import
&lt;&#x2F;span&gt;&lt;span&gt;$ gpg --home &#x2F;tmp&#x2F;x --change-passphrase F6C7D705867D430!
&lt;&#x2F;span&gt;&lt;span&gt;$ gpg --home &#x2F;tmp&#x2F;x --export-secret-subkey F6C7D705867D430! | openpgp2ssh F6C7D705867D430  &amp;gt; &#x2F;tmp&#x2F;naked-id_rsa
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to add password again to the key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh-keygen -f &#x2F;tmp&#x2F;naked-id_rsa -p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sasl_username</title>
        <published>2018-02-24T09:32:04+01:00</published>
        <updated>2018-02-24T09:32:04+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sasl-username/"/>
        <id>https://nbari.com/sasl-username/</id>
        
        <content type="html" xml:base="https://nbari.com/sasl-username/">&lt;p&gt;Find users sending email:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tail -F &#x2F;var&#x2F;log&#x2F;all.log | grep -i sasl_username
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ldap_auth_disable_tls_never_use_in_production</title>
        <published>2018-02-21T15:38:30+01:00</published>
        <updated>2018-02-21T15:38:30+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ldap-auth-disable-tls-never-use-in-production/"/>
        <id>https://nbari.com/ldap-auth-disable-tls-never-use-in-production/</id>
        
        <content type="html" xml:base="https://nbari.com/ldap-auth-disable-tls-never-use-in-production/">&lt;p&gt;To use &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;System_Security_Services_Daemon&quot;&gt;sssd&lt;&#x2F;a&gt;
disabling TLS ( sssd doesn&#x27;t work without TLS but there is this undocumented
option you can use ):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ldap_auth_disable_tls_never_use_in_production = true
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In case you get this error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Attribute &amp;#39;ldap_auth_disable_tls_never_use_in_production&amp;#39; is not allowed in section
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try running this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;authconfig --enablemkhomedir --enablesssdauth --updateall
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;enablemkhomedir&lt;&#x2F;code&gt; is a plus&lt;&#x2F;p&gt;
&lt;p&gt;If when running &lt;code&gt;authconfig&lt;&#x2F;code&gt; your &lt;code&gt;&#x2F;etc&#x2F;sssd&#x2F;sssd.conf&lt;&#x2F;code&gt; gets overwritten, set to
no this options:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;USELDAP=no
&lt;&#x2F;span&gt;&lt;span&gt;USELDAPAUTH=no
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>SElinux</title>
        <published>2018-02-21T09:39:12+01:00</published>
        <updated>2018-02-21T09:39:12+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/selinux/"/>
        <id>https://nbari.com/selinux/</id>
        
        <content type="html" xml:base="https://nbari.com/selinux/">&lt;p&gt;To disable SElinux temporaly:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;setenforce 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To disable SELinux Permanetly, edit file &lt;code&gt;&#x2F;etc&#x2F;sysconfig&#x2F;selinux&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# This file controls the state of SELinux on the system.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# SELINUX= can take one of these three values:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     enforcing - SELinux security policy is enforced.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     permissive - SELinux prints warnings instead of enforcing.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     disabled - No SELinux policy is loaded.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SELINUX&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;enforcing
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# SELINUXTYPE= can take one of three two values:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     targeted - Targeted processes are protected,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     minimum - Modification of targeted policy. Only selected processes are protected.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#     mls - Multi Level Security protection.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SELINUXTYPE&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;targeted
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change &lt;code&gt;SELINUX=enforcing&lt;&#x2F;code&gt; to &lt;code&gt;SELINUX=disabled&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Check the status of SELinux using &lt;code&gt;sestatus&lt;&#x2F;code&gt; command&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>UseKeychain</title>
        <published>2018-02-13T10:01:54+01:00</published>
        <updated>2018-02-13T10:01:54+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/usekeychain/"/>
        <id>https://nbari.com/usekeychain/</id>
        
        <content type="html" xml:base="https://nbari.com/usekeychain/">&lt;p&gt;To save SSH keys in macOS Sierra keychain add this to &lt;code&gt;~&#x2F;.ssh&#x2F;config&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Host *
&lt;&#x2F;span&gt;&lt;span&gt;    AddKeysToAgent yes
&lt;&#x2F;span&gt;&lt;span&gt;    UseKeychain yes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;keychain-changes&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#keychain-changes&quot; aria-label=&quot;Anchor link for: keychain-changes&quot;&gt;🔗&lt;&#x2F;a&gt;Keychain changes&lt;&#x2F;h2&gt;
&lt;p&gt;Prior to macOS Sierra, ssh would present a dialog asking for your passphrase and
would offer the option to store it into the keychain. This UI was deprecated
some time ago and has been removed.&lt;&#x2F;p&gt;
&lt;p&gt;Instead, a new UseKeychain option was introduced in macOS Sierra allowing users
to specify whether they would like for the passphrase to be stored in the
keychain. This option was enabled by default on macOS Sierra, which caused all
passphrases to be stored in the keychain.&lt;&#x2F;p&gt;
&lt;p&gt;This was not the intended default behavior, so this has been changed in macOS
10.12.2. To store passphrases in the keychain, set this option in your ssh
configuration file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;UseKeychain yes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;content&#x2F;technotes&#x2F;tn2449&#x2F;_index.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Find and replace recursive</title>
        <published>2018-01-17T10:08:38+01:00</published>
        <updated>2018-01-17T10:08:38+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/find-and-replace-recursive/"/>
        <id>https://nbari.com/find-and-replace-recursive/</id>
        
        <content type="html" xml:base="https://nbari.com/find-and-replace-recursive/">&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; Do not run this command on a folder including a git repo - changes to
.git could corrupt your get index.&lt;&#x2F;p&gt;
&lt;p&gt;For example to replace an IP on multiple files:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;find &#x2F;tmp&#x2F;path -type f -exec sed -i &amp;#39;&amp;#39; &amp;#39;s&#x2F;193.111.141.1&#x2F;82.14.220.137&#x2F;g&amp;#39; {} +
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Multiple AMI&#x27;s&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;find . -type f -name &amp;quot;variables.tf&amp;quot; -exec sed -i &amp;#39;s&#x2F;ami-0e4168a4236171887&#x2F;ami-00bec4c01ec9355e2&#x2F;g&amp;#39; {} +
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;On BSD, MAC by passing an empty string to sed&#x27;s -i args will create no backup&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;perl-pi-e&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#perl-pi-e&quot; aria-label=&quot;Anchor link for: perl-pi-e&quot;&gt;🔗&lt;&#x2F;a&gt;perl -pi -e&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;perl -pi -e &amp;#39;s&#x2F;replace_this&#x2F;with_this&#x2F;&amp;#39; files-*
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is useful when you don&#x27;t want to change the file ending like in &lt;code&gt;sed&lt;&#x2F;code&gt; that
adds an &lt;code&gt;\n&lt;&#x2F;code&gt; ad the end of the file&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ciphers supported</title>
        <published>2018-01-08T11:38:18+01:00</published>
        <updated>2018-01-08T11:38:18+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ciphers-supported/"/>
        <id>https://nbari.com/ciphers-supported/</id>
        
        <content type="html" xml:base="https://nbari.com/ciphers-supported/">&lt;p&gt;List ciphers supported by an HTTP server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nmap --script ssl-enum-ciphers -p 443 www.nbari.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example of output:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PORT&lt;&#x2F;span&gt;&lt;span&gt;    STATE SERVICE
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;443&#x2F;tcp&lt;&#x2F;span&gt;&lt;span&gt; open  https
&lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ssl-enum-ciphers:
&lt;&#x2F;span&gt;&lt;span&gt;|   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLSv1.1:
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphers:
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_256_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_128_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;compressors:
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NULL
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cipher&lt;&#x2F;span&gt;&lt;span&gt; preference: server
&lt;&#x2F;span&gt;&lt;span&gt;|   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLSv1.2:
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphers:
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (secp256r1) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_128_GCM_SHA256&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_256_GCM_SHA384&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_128_CBC_SHA256&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_256_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TLS_RSA_WITH_AES_128_CBC_SHA&lt;&#x2F;span&gt;&lt;span&gt; (rsa 2048) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; A
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;compressors:
&lt;&#x2F;span&gt;&lt;span&gt;|       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NULL
&lt;&#x2F;span&gt;&lt;span&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cipher&lt;&#x2F;span&gt;&lt;span&gt; preference: server
&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_&lt;&#x2F;span&gt;&lt;span&gt;  least strength: A
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Nmap&lt;&#x2F;span&gt;&lt;span&gt; done: 1 IP address (1 host up) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;scanned&lt;&#x2F;span&gt;&lt;span&gt; in 9.18 seconds
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Also check &lt;code&gt;sslscan&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install sslscan
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>attachments from console</title>
        <published>2018-01-03T10:50:58+01:00</published>
        <updated>2018-01-03T10:50:58+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/attachments-from-console/"/>
        <id>https://nbari.com/attachments-from-console/</id>
        
        <content type="html" xml:base="https://nbari.com/attachments-from-console/">&lt;p&gt;To send attachments within the terminal&#x2F;console:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; $ uuencode file.bz2 attach-name.bz2 | mail -s &amp;quot;attachment&amp;quot; foo@bar.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>update port</title>
        <published>2017-12-30T11:25:34+01:00</published>
        <updated>2017-12-30T11:25:34+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/update-port/"/>
        <id>https://nbari.com/update-port/</id>
        
        <content type="html" xml:base="https://nbari.com/update-port/">&lt;p&gt;Make a copy of the current port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cp -R &amp;lt;port-name&amp;gt; &amp;lt;port-name&amp;gt;.orig
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or create a branch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git checkout -b &amp;lt;port-name&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Update the Makefile, then run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;make makesum
&lt;&#x2F;span&gt;&lt;span&gt;make checksum
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Update crates if required by using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;make cargo-crates
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Work on the port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;make makesum
&lt;&#x2F;span&gt;&lt;span&gt;make checksum
&lt;&#x2F;span&gt;&lt;span&gt;make stage
&lt;&#x2F;span&gt;&lt;span&gt;make check-orphans
&lt;&#x2F;span&gt;&lt;span&gt;make package
&lt;&#x2F;span&gt;&lt;span&gt;make install
&lt;&#x2F;span&gt;&lt;span&gt;make deinstall
&lt;&#x2F;span&gt;&lt;span&gt;make clean
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Crete the diff, first change one level up:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;diff -u port-name.orig port-name &amp;gt; port-name.diff
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or if you are using git:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git commit
&lt;&#x2F;span&gt;&lt;span&gt;git format-patch main
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Submit the patch.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;poudriere&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#poudriere&quot; aria-label=&quot;Anchor link for: poudriere&quot;&gt;🔗&lt;&#x2F;a&gt;poudriere&lt;&#x2F;h2&gt;
&lt;p&gt;Test port with poudriere, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;poudriere testport -p default -j 14amd64 net&#x2F;s3m
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>raidz2</title>
        <published>2017-12-28T22:20:37+01:00</published>
        <updated>2017-12-28T22:20:37+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/raidz2/"/>
        <id>https://nbari.com/raidz2/</id>
        
        <content type="html" xml:base="https://nbari.com/raidz2/">&lt;p&gt;If using a DELL PERL 6&#x2F;i Integrated, configure each disk as RAID-0:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;gt; mfiutil &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;show&lt;&#x2F;span&gt;&lt;span&gt; config
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfi0&lt;&#x2F;span&gt;&lt;span&gt; Configuration: 8 arrays, 8 volumes, 1 spares
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 0 of 2 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  1 ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BX6V&amp;gt; SATA
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  6 ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BY&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;35&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SATA
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 1 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  0 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST500NM0001 PS07 serial=Z1M17ZJ&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SCSI-6
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 2 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  2 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST500NM0001 0002 serial=Z1M0DAVE&amp;gt; SCSI-6
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 3 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  3 (  932G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST1000NM0023 0004 serial=Z1W54HJV&amp;gt; SCSI-6
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 4 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  4 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L94N&amp;gt; SAS
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 5 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  5 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L9C&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SAS
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 6 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  8 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L8DD&amp;gt; SAS
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 7 of 1 drives:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;drive&lt;&#x2F;span&gt;&lt;span&gt;  9 (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;824&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SAS
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid0 (1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-1&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;raid1&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid1 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r0&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid2 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r2&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid3 (931G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r3&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 3
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid4 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r4&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 4
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid5 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r5&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 5
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid6 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r8&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 6
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volume&lt;&#x2F;span&gt;&lt;span&gt; mfid7 (465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt; 64K OPTIMAL &amp;lt;r9&amp;gt; spans:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 7
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dedicated&lt;&#x2F;span&gt;&lt;span&gt; spare  7 ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOT&lt;&#x2F;span&gt;&lt;span&gt; SPARE &amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BPTG&amp;gt; SATA backs:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;array&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Array has one RAID-1 using 3 disks and the others are disk are each one a RAID-0 volume&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;gt; mfiutil &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;show&lt;&#x2F;span&gt;&lt;span&gt; volumes
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfi0&lt;&#x2F;span&gt;&lt;span&gt; Volumes:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Id&lt;&#x2F;span&gt;&lt;span&gt;     Size    Level   Stripe  State   Cache   Name
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid0&lt;&#x2F;span&gt;&lt;span&gt; ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-1&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;raid1&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid1&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r0&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid2&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r2&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid3&lt;&#x2F;span&gt;&lt;span&gt; (  931G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r3&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid4&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r4&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid5&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r5&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid6&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r8&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid7&lt;&#x2F;span&gt;&lt;span&gt; (  465G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RAID-0&lt;&#x2F;span&gt;&lt;span&gt;      64K OPTIMAL Disabled &amp;lt;r9&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To configure the raid:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zpool create -f &amp;lt;pool-name&amp;gt; raidz2 mfid1 mfid2 mfid3 mfid4 mfid5 mfid6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add a spare:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zpool add  &amp;lt;pool-name&amp;gt; spare mfid7
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is the output of &lt;code&gt;zpool status&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;gt; zpool &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pool:&lt;&#x2F;span&gt;&lt;span&gt; sas
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;state:&lt;&#x2F;span&gt;&lt;span&gt; ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;scan:&lt;&#x2F;span&gt;&lt;span&gt; none requested
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config:
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NAME&lt;&#x2F;span&gt;&lt;span&gt;        STATE
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sas&lt;&#x2F;span&gt;&lt;span&gt;         ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raidz2-0&lt;&#x2F;span&gt;&lt;span&gt;  ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid1&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid2&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid3&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid4&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid5&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid6&lt;&#x2F;span&gt;&lt;span&gt;   ONLINE
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;spares
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfid7&lt;&#x2F;span&gt;&lt;span&gt;     AVAIL
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;errors:&lt;&#x2F;span&gt;&lt;span&gt; No known data errors
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case the pool named &lt;code&gt;sas&lt;&#x2F;code&gt; is a mix of SAS, SCSI of different sizes:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;gt; mfiutil &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;show&lt;&#x2F;span&gt;&lt;span&gt; drives
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mfi0&lt;&#x2F;span&gt;&lt;span&gt; Physical Drives:
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST500NM0001 PS07 serial=Z1M17ZJ&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SCSI-6 E1:S0
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt; ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BX6V&amp;gt; SATA E1:S1
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST500NM0001 0002 serial=Z1M0DAVE&amp;gt; SCSI-6 E1:S2
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt; (  932G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST1000NM0023 0004 serial=Z1W54HJV&amp;gt; SCSI-6 E1:S3
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L94N&amp;gt; SAS E1:S4
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L9C&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SAS E1:S5
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6&lt;&#x2F;span&gt;&lt;span&gt; ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BY&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;35&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SATA E1:S6
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;7&lt;&#x2F;span&gt;&lt;span&gt; ( 1863G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOT&lt;&#x2F;span&gt;&lt;span&gt; SPARE &amp;lt;ST2000DM006-2DM1 CC26 serial=Z4Z8BPTG&amp;gt; SATA E1:S7
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L8DD&amp;gt; SAS E1:S8
&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;9&lt;&#x2F;span&gt;&lt;span&gt; (  466G) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ONLINE    &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;SEAGATE ST3500620SS MS04 serial=9QM5L&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;824&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; SAS E1:S9
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Enable cache on all disks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;i=0; while [ $i -le 9 ]; do mfiutil cache mfid${i} enable; i=`expr $i + 1`; done
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>DRAC5 Update</title>
        <published>2017-12-28T01:39:30+01:00</published>
        <updated>2017-12-28T01:39:30+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/drac5-update/"/>
        <id>https://nbari.com/drac5-update/</id>
        
        <content type="html" xml:base="https://nbari.com/drac5-update/">&lt;p&gt;Download the firmware: http:&#x2F;&#x2F;www.dell.com&#x2F;support&#x2F;home&#x2F;de&#x2F;de&#x2F;debsdt1&#x2F;Drivers&#x2F;DriversDetails?driverId=F3FXW&lt;&#x2F;p&gt;
&lt;p&gt;In mac you can unzip the exe:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;unzip f_drac5v160_A00.exe
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the DRAC web interface go to &quot;Remote Access&quot; and upload the file &lt;strong&gt;firmimg.d5&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If getting errors like:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Unsigned application requesting unrestricted access to system. The following resource is signed with a weak signature algorithm MD5withRSA and is treated as unsigned.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;In windows file is in: &lt;code&gt;c:\Program Files\Java\jre7\lib\security\java.security&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;On mac os, edit this file: &lt;code&gt;&#x2F;Library&#x2F;Internet Plug-Ins&#x2F;JavaAppletPlugin.plugin&#x2F;Contents&#x2F;Home&#x2F;lib&#x2F;security&#x2F;java.security&lt;&#x2F;code&gt; and comment this lines:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# jdk.jar.disabledAlgorithms=MD2, MD5, RSA keySize &amp;lt; 1024
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This one is if while connecting you get an  Error when reading from SSL socket connection:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize &amp;lt; 768, \
&lt;&#x2F;span&gt;&lt;span&gt;# EC keySize &amp;lt; 224
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To load the &lt;strong&gt;Virtual Media&lt;&#x2F;strong&gt; you may need a 32 bit version of java
(virtualbox&#x2F;windows), and deleting the &lt;code&gt;java.security&lt;&#x2F;code&gt; file works&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;drac-virtual-media.png&quot; alt=&quot;drac virtual media&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh update Host Keys</title>
        <published>2017-12-26T16:19:15+01:00</published>
        <updated>2017-12-26T16:19:15+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-update-host-keys/"/>
        <id>https://nbari.com/ssh-update-host-keys/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-update-host-keys/">&lt;p&gt;To create new ssh keys on the server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh-keygen -f &#x2F;etc&#x2F;ssh&#x2F;ssh_host_rsa_key -N &amp;#39;&amp;#39; -t rsa
&lt;&#x2F;span&gt;&lt;span&gt;ssh-keygen -f &#x2F;etc&#x2F;ssh&#x2F;ssh_host_ecdsa_key -N &amp;#39;&amp;#39; -t ecdsa -b 521
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check the fingerprint:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh-keygen -lf ssh_host_ecdsa_key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the client side:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;&#x2F;span&gt;&lt;span&gt;@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
&lt;&#x2F;span&gt;&lt;span&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;&#x2F;span&gt;&lt;span&gt;IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
&lt;&#x2F;span&gt;&lt;span&gt;Someone could be eavesdropping on you right now (man-in-the-middle attack)!
&lt;&#x2F;span&gt;&lt;span&gt;It is also possible that a host key has just been changed.
&lt;&#x2F;span&gt;&lt;span&gt;The fingerprint for the ECDSA key sent by the remote host is
&lt;&#x2F;span&gt;&lt;span&gt;SHA256:kY&#x2F;TymCiskD0nhhyWaovohYvfCyZ7ymrEsmujeawaww.
&lt;&#x2F;span&gt;&lt;span&gt;Please contact your system administrator.
&lt;&#x2F;span&gt;&lt;span&gt;Add correct host key in &#x2F;Users&#x2F;monkey&#x2F;.ssh&#x2F;known_hosts to get rid of this message.
&lt;&#x2F;span&gt;&lt;span&gt;Offending ECDSA key in &#x2F;Users&#x2F;monkey&#x2F;.ssh&#x2F;known_hosts:236
&lt;&#x2F;span&gt;&lt;span&gt;ECDSA host key for [76.9.57.82]:2222 has changed and you have requested strict checking.
&lt;&#x2F;span&gt;&lt;span&gt;Host key verification failed.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To see the key on line 236:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;awk &amp;#39;NR==236&amp;#39; know_hosts
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To remove the key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh-keygen -R &amp;quot;[76.9.57.82]:2222&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try to ssh again and veriy the key matches the one on the server.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql SHA512 CRYPT</title>
        <published>2017-12-23T10:41:29+01:00</published>
        <updated>2017-12-23T10:41:29+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-sha512-crypt/"/>
        <id>https://nbari.com/mysql-sha512-crypt/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-sha512-crypt/">&lt;p&gt;To create a password using the  &lt;code&gt;SHA512-CRYPT&lt;&#x2F;code&gt; schema:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;SELECT ENCRYPT(&amp;quot;password&amp;quot;, CONCAT(&amp;#39;$6$&amp;#39;,sha(RAND())));
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To create an user:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;INSERT INTO users SET password=ENCRYPT(&amp;quot;password&amp;quot;, CONCAT(&amp;#39;$6$&amp;#39;,sha(RAND())));
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To use with postfix or dovecot:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;INSERT INTO users SET password=CONCAT(&amp;#39;{SHA512-CRYPT}&amp;#39;, ENCRYPT(&amp;quot;password&amp;quot;, CONCAT(&amp;#39;$6$&amp;#39;,sha(RAND()))));
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>syslog-ng Ubuntu</title>
        <published>2017-12-15T11:25:12+01:00</published>
        <updated>2017-12-15T11:25:12+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/syslog-ng-ubuntu/"/>
        <id>https://nbari.com/syslog-ng-ubuntu/</id>
        
        <content type="html" xml:base="https://nbari.com/syslog-ng-ubuntu/">&lt;p&gt;Errors you may get:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Can&amp;#39;t find class; class_name=&amp;#39;org.syslog_ng.elasticsearch_v2.ElasticSearchDestination&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Working configuration:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;@version:3.13
&lt;&#x2F;span&gt;&lt;span&gt;@module mod-java
&lt;&#x2F;span&gt;&lt;span&gt;@include &amp;quot;scl.conf&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;options {
&lt;&#x2F;span&gt;&lt;span&gt;    flush_lines(0);
&lt;&#x2F;span&gt;&lt;span&gt;    keep_hostname(yes);
&lt;&#x2F;span&gt;&lt;span&gt;    normalize_hostnames(yes);
&lt;&#x2F;span&gt;&lt;span&gt;    threaded(yes);
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span&gt;source      s_local   { system(); internal();   };
&lt;&#x2F;span&gt;&lt;span&gt;source      s_network { syslog(transport(tcp)); };
&lt;&#x2F;span&gt;&lt;span&gt;destination d_all { file (&amp;quot;&#x2F;var&#x2F;log&#x2F;all.log&amp;quot;); };
&lt;&#x2F;span&gt;&lt;span&gt;destination d_elastic {
&lt;&#x2F;span&gt;&lt;span&gt;  elasticsearch2(
&lt;&#x2F;span&gt;&lt;span&gt;    client-lib-dir(&amp;quot;&#x2F;usr&#x2F;lib&#x2F;syslog-ng&#x2F;3.13&#x2F;java-modules&#x2F;elastic-jest-client&#x2F;*.jar:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;lib&#x2F;:&#x2F;usr&#x2F;lib&#x2F;syslog-ng&#x2F;3.13&#x2F;java-modules&#x2F;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    client_mode(&amp;quot;http&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    cluster_url(&amp;quot;http:&#x2F;&#x2F;your-elasticsearch:9200&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    index(&amp;quot;syslog-ng_${YEAR}.${MONTH}.${DAY}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    type(&amp;quot;syslog&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    cluster(&amp;quot;test&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    flush-limit(&amp;quot;1000&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    template(&amp;quot;$(format-json --scope rfc5424 --scope nv-pairs --exclude DATE --key ISODATE)&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    time-zone(&amp;quot;UTC&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;  );
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span&gt;log { source(s_network); destination(d_elastic); };
&lt;&#x2F;span&gt;&lt;span&gt;log { source(s_local); destination(d_all); };
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice the &lt;code&gt;client-lib-dir&lt;&#x2F;code&gt; line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;client-lib-dir(&amp;quot;&#x2F;usr&#x2F;lib&#x2F;syslog-ng&#x2F;3.13&#x2F;java-modules&#x2F;elastic-jest-client&#x2F;*.jar:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;lib&#x2F;:&#x2F;usr&#x2F;lib&#x2F;syslog-ng&#x2F;3.13&#x2F;java-modules&#x2F;&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>80</title>
        <published>2017-12-11T19:09:58+01:00</published>
        <updated>2017-12-11T19:09:58+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/80/"/>
        <id>https://nbari.com/80/</id>
        
        <content type="html" xml:base="https://nbari.com/80/">&lt;p&gt;To start an application on port &lt;code&gt;80&lt;&#x2F;code&gt; being not root:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl net.inet.ip.portrange.reservedhigh=79
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That will allow to bind an application in any port &amp;gt; 79, to allow any port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl net.inet.ip.portrange.reservedhigh=0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add this to &lt;code&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&#x2F;code&gt; to keep changes persistent across reboots:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;net.inet.ip.portrange.reservedhigh=79
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ntpdate</title>
        <published>2017-12-11T10:56:33+01:00</published>
        <updated>2017-12-11T10:56:33+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ntpdate/"/>
        <id>https://nbari.com/ntpdate/</id>
        
        <content type="html" xml:base="https://nbari.com/ntpdate/">&lt;p&gt;If you want to execute &lt;code&gt;ntpdate&lt;&#x2F;code&gt; with the ntp daemon already up and running, use
the following command:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ntpdate -v -b -u 0.pool.ntp.org
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To only test an NTP server or responding to queries:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ntpdate -q time.google.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>nginx + lua + redis</title>
        <published>2017-12-06T17:15:19+01:00</published>
        <updated>2017-12-06T17:15:19+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/nginx-lua-redis/"/>
        <id>https://nbari.com/nginx-lua-redis/</id>
        
        <content type="html" xml:base="https://nbari.com/nginx-lua-redis/">&lt;p&gt;Basic &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Web_application_firewall&quot;&gt;WAF&lt;&#x2F;a&gt; example
using &lt;a href=&quot;https:&#x2F;&#x2F;www.lua.org&#x2F;&quot;&gt;lua&lt;&#x2F;a&gt; + &lt;a href=&quot;https:&#x2F;&#x2F;redis.io&#x2F;&quot;&gt;redis&lt;&#x2F;a&gt; within nginx.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;--
&lt;&#x2F;span&gt;&lt;span&gt;--   lua_package_path &amp;quot;&#x2F;usr&#x2F;share&#x2F;lua&#x2F;5.1&#x2F;nginx&#x2F;?.lua;;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;--   lua_shared_dict ip_blacklist 4m;
&lt;&#x2F;span&gt;&lt;span&gt;--
&lt;&#x2F;span&gt;&lt;span&gt;local redis_host               = &amp;quot;your.redis.tld&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;local redis_port               = 6379
&lt;&#x2F;span&gt;&lt;span&gt;local redis_connection_timeout = 300
&lt;&#x2F;span&gt;&lt;span&gt;local redis_pattern            = &amp;quot;block-&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;local cache_ttl                = 3 -- seconds
&lt;&#x2F;span&gt;&lt;span&gt;local ip                       = ngx.var.remote_addr
&lt;&#x2F;span&gt;&lt;span&gt;local ip_blacklist             = ngx.shared.ip_blacklist
&lt;&#x2F;span&gt;&lt;span&gt;local last_update_time         = ip_blacklist:get(&amp;quot;last_update_time&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;-- block if ip found in the local nginx dict
&lt;&#x2F;span&gt;&lt;span&gt;if ip_blacklist:get(ip) then
&lt;&#x2F;span&gt;&lt;span&gt;    ngx.log(ngx.DEBUG, &amp;quot;Banned IP detected and refused access: &amp;quot; .. ip);
&lt;&#x2F;span&gt;&lt;span&gt;    return ngx.exit(429);
&lt;&#x2F;span&gt;&lt;span&gt;end
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;-- only update ip_blacklist from Redis once every cache_ttl seconds:
&lt;&#x2F;span&gt;&lt;span&gt;if last_update_time == nil or last_update_time &amp;lt; ( ngx.now() - cache_ttl ) then
&lt;&#x2F;span&gt;&lt;span&gt;    local redis = require &amp;quot;redis&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;    local red = redis:new();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    red:set_timeout(redis_connect_timeout);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    local ok, err = red:connect(redis_host, redis_port);
&lt;&#x2F;span&gt;&lt;span&gt;    if not ok then
&lt;&#x2F;span&gt;&lt;span&gt;        ngx.log(ngx.DEBUG, &amp;quot;Redis connection error while retrieving ip_blacklist: &amp;quot; .. err);
&lt;&#x2F;span&gt;&lt;span&gt;    else
&lt;&#x2F;span&gt;&lt;span&gt;        local res, err = red:get(redis_pattern .. ip);
&lt;&#x2F;span&gt;&lt;span&gt;        if err then
&lt;&#x2F;span&gt;&lt;span&gt;            ngx.log(ngx.DEBUG, &amp;quot;Redis read error while retrieving ip_blacklist: &amp;quot; .. err);
&lt;&#x2F;span&gt;&lt;span&gt;            return
&lt;&#x2F;span&gt;&lt;span&gt;        end
&lt;&#x2F;span&gt;&lt;span&gt;        if res ~= ngx.null then
&lt;&#x2F;span&gt;&lt;span&gt;            local ttl, err = red:ttl(redis_pattern .. ip);
&lt;&#x2F;span&gt;&lt;span&gt;            if not ttl then
&lt;&#x2F;span&gt;&lt;span&gt;                ngx.log(ngx.DEBUG, &amp;quot;Redis connection error while retrieving ttl&amp;quot; .. err);
&lt;&#x2F;span&gt;&lt;span&gt;                return
&lt;&#x2F;span&gt;&lt;span&gt;            end
&lt;&#x2F;span&gt;&lt;span&gt;            -- add IP to the ip_blacklist dict inheriting the TTL form redis
&lt;&#x2F;span&gt;&lt;span&gt;            ip_blacklist:set(ip, true, ttl);
&lt;&#x2F;span&gt;&lt;span&gt;            ip_blacklist:set(&amp;quot;last_update_time&amp;quot;, ngx.now());
&lt;&#x2F;span&gt;&lt;span&gt;        end
&lt;&#x2F;span&gt;&lt;span&gt;    end
&lt;&#x2F;span&gt;&lt;span&gt;end
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In nginx add this lines:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;resolver&lt;&#x2F;span&gt;&lt;span&gt; 10.10.0.2 valid=10s; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# depends on your redis host
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lua_package_path &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;usr&#x2F;share&#x2F;lua&#x2F;5.1&#x2F;nginx&#x2F;?.lua;&#x2F;etc&#x2F;nginx&#x2F;lua&#x2F;?.lua;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lua_shared_dict&lt;&#x2F;span&gt;&lt;span&gt; ip_blacklist 4m;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And call the scrip in the server section:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;server &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    listen 80;
&lt;&#x2F;span&gt;&lt;span&gt;    server_name _;
&lt;&#x2F;span&gt;&lt;span&gt;    access_by_lua_file &#x2F;etc&#x2F;nginx&#x2F;lua&#x2F;ip_blacklist.lua;
&lt;&#x2F;span&gt;&lt;span&gt;    ...
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In Linux (ubuntu) this may be required:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;apt install nginx-extras lua-nginx-redis
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Golang HTTP Timeouts</title>
        <published>2017-12-01T20:00:24+01:00</published>
        <updated>2017-12-01T20:00:24+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/golang-http-timeouts/"/>
        <id>https://nbari.com/golang-http-timeouts/</id>
        
        <content type="html" xml:base="https://nbari.com/golang-http-timeouts/">&lt;p&gt;If this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;http: Accept error: accept tcp [::]:80: accept4: too many open files; retrying in 40ms
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check that your go server is using proper timeouts, example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;srv &lt;&#x2F;span&gt;&lt;span&gt;:= &amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;http&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Server&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Addr&lt;&#x2F;span&gt;&lt;span&gt;:         &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;:80&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Handler&lt;&#x2F;span&gt;&lt;span&gt;:      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;router&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ReadTimeout&lt;&#x2F;span&gt;&lt;span&gt;:  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;5 &lt;&#x2F;span&gt;&lt;span&gt;* &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Second&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;WriteTimeout&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10 &lt;&#x2F;span&gt;&lt;span&gt;* &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Second&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Fatal&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;srv&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ListenAndServe&lt;&#x2F;span&gt;&lt;span&gt;())
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;blog.cloudflare.com&#x2F;the-complete-guide-to-golang-net-http-timeouts&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Measuring the Listen Queue</title>
        <published>2017-12-01T11:46:32+01:00</published>
        <updated>2017-12-01T11:46:32+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/measuring-the-listen-queue/"/>
        <id>https://nbari.com/measuring-the-listen-queue/</id>
        
        <content type="html" xml:base="https://nbari.com/measuring-the-listen-queue/">&lt;p&gt;Run the command:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;netstat -Lan
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The command output may be the following:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Current&lt;&#x2F;span&gt;&lt;span&gt; listen queue sizes (qlen&#x2F;incqlen&#x2F;maxqlen)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Proto&lt;&#x2F;span&gt;&lt;span&gt; Listen                           Local Address
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tcp46&lt;&#x2F;span&gt;&lt;span&gt; 1863&#x2F;0&#x2F;32768                     *.80
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tcp4&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;128                          *.31025
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tcp6&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;128                          *.31025
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Some&lt;&#x2F;span&gt;&lt;span&gt; tcp sockets may have been deleted.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;unix&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;32768                        &#x2F;var&#x2F;run&#x2F;immortal&#x2F;tuip&#x2F;immortal.sock
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;unix&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;255                          &#x2F;var&#x2F;db&#x2F;syslog-ng.ctl
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;unix&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;4                            &#x2F;var&#x2F;run&#x2F;devd.pipe
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;unix&lt;&#x2F;span&gt;&lt;span&gt;  0&#x2F;0&#x2F;4                            &#x2F;var&#x2F;run&#x2F;devd.seqpacket.pipe
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The command output shows that there are &lt;strong&gt;1863&lt;&#x2F;strong&gt; unaccepted connections in the listen
queue on Port 80, while the connection limit is &lt;strong&gt;32768&lt;&#x2F;strong&gt; connections, and this
situation is normal.&lt;&#x2F;p&gt;
&lt;p&gt;However, the command output may be as follows:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Current listen queue sizes (qlen&#x2F;incqlen&#x2F;maxqlen)
&lt;&#x2F;span&gt;&lt;span&gt;Listen         Local Address
&lt;&#x2F;span&gt;&lt;span&gt;0&#x2F;0&#x2F;128        *.12345
&lt;&#x2F;span&gt;&lt;span&gt;192&#x2F;0&#x2F;128        *.80
&lt;&#x2F;span&gt;&lt;span&gt;0&#x2F;0&#x2F;128        *.8080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The command output shows &lt;strong&gt;192&lt;&#x2F;strong&gt; unaccepted connections which exceeds the limit of
&lt;strong&gt;128&lt;&#x2F;strong&gt; connections. This is quite common when a web site experience heavy traffic.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;tuning-the-operating-system&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tuning-the-operating-system&quot; aria-label=&quot;Anchor link for: tuning-the-operating-system&quot;&gt;🔗&lt;&#x2F;a&gt;Tuning the Operating System&lt;&#x2F;h2&gt;
&lt;p&gt;Increase the value of the &lt;code&gt;somaxconn&lt;&#x2F;code&gt; key from its default value (&lt;strong&gt;128&lt;&#x2F;strong&gt;)
to the value high enough to be able to handle a high burst of traffic:&lt;&#x2F;p&gt;
&lt;p&gt;For FreeBSD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl kern.ipc.somaxconn=4096
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo sysctl -w net.core.somaxconn=4096
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;tuning-nginx&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tuning-nginx&quot; aria-label=&quot;Anchor link for: tuning-nginx&quot;&gt;🔗&lt;&#x2F;a&gt;Tuning NGINX&lt;&#x2F;h2&gt;
&lt;p&gt;If you set the somaxconn key to a value greater than &lt;strong&gt;512&lt;&#x2F;strong&gt;, change the backlog
parameter of the NGINX listen directive to match:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;    listen 80 backlog=4096;
&lt;&#x2F;span&gt;&lt;span&gt;    # The rest of server configuration
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;See also:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;post&#x2F;time_wait&quot;&gt;Time Wait&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;www.nginx.com&#x2F;resources&#x2F;admin-guide&#x2F;serving-static-content&#x2F;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>appengine cost &gt; 150&#x2F;s requests</title>
        <published>2017-12-01T10:33:35+01:00</published>
        <updated>2017-12-01T10:33:35+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/appengine/"/>
        <id>https://nbari.com/appengine/</id>
        
        <content type="html" xml:base="https://nbari.com/appengine/">&lt;p&gt;Between $5 and $7 USD per day will cost to host in
&lt;a href=&quot;https:&#x2F;&#x2F;cloud.google.com&#x2F;appengine&#x2F;&quot;&gt;appengine&lt;&#x2F;a&gt; a tiny &lt;a href=&quot;https:&#x2F;&#x2F;golang.org&quot;&gt;go&lt;&#x2F;a&gt;
application, with an average of 150 request&#x2F;second, incoming bandwidth &amp;gt; 7GB and
outgoing bandwidth &amp;lt; 1GB.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;close to $25 per month, including the network internet egress&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;appengine-cost.png&quot; alt=&quot;appengine cost&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Sumary:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;appengine-sumary.png&quot; alt=&quot;appengine summary&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Upgrade Insecure Requests</title>
        <published>2017-11-28T15:55:03+01:00</published>
        <updated>2017-11-28T15:55:03+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/upgrade-insecure-requests/"/>
        <id>https://nbari.com/upgrade-insecure-requests/</id>
        
        <content type="html" xml:base="https://nbari.com/upgrade-insecure-requests/">&lt;p&gt;The &quot;Upgrade Insecure Requests&quot; Content Security Policy can be used to
automatically upgrade insecure (e.g. http:) requests to a secure alternative
(e.g. https:) before a browser fetches them.&lt;&#x2F;p&gt;
&lt;p&gt;In practice, this helps avoid mixed-content warnings when a page is accessed via
https:, but it contains references to resources using absolute http: URLs.&lt;&#x2F;p&gt;
&lt;p&gt;Like other Content Security Policies, the recommend approach is to enable it
via a HTTP response header:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Content-Security-Policy: upgrade-insecure-requests
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Nginx example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;add_header Content-Security-Policy upgrade-insecure-requests;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;However, if you do not have control over the underlying web server, an
alternative is to include this meta tag in your HTML&#x27;s &lt;code&gt;&amp;lt;head&amp;gt;&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;meta http-equiv=&amp;quot;Content-Security-Policy&amp;quot; content=&amp;quot;upgrade-insecure-requests&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info:&lt;&#x2F;p&gt;
&lt;p&gt;https:&#x2F;&#x2F;googlechrome.github.io&#x2F;samples&#x2F;csp-upgrade-insecure-requests&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>osxfuse</title>
        <published>2017-11-26T09:26:07+01:00</published>
        <updated>2017-11-26T09:26:07+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/osxfuse/"/>
        <id>https://nbari.com/osxfuse/</id>
        
        <content type="html" xml:base="https://nbari.com/osxfuse/">&lt;p&gt;To install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew cask install osxfuse
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To install sshfuse:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install sshfs
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Mount the root volume of remote host:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sshfs bastion:&#x2F; &#x2F;tmp&#x2F;host -o reconnect,follow_symlinks,volname=&amp;quot;LocalRemote&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To unmount:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo diskutil umount force &#x2F;tmp&#x2F;bastion
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sh loop</title>
        <published>2017-11-23T18:46:11+01:00</published>
        <updated>2017-11-23T18:46:11+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sh-loop/"/>
        <id>https://nbari.com/sh-loop/</id>
        
        <content type="html" xml:base="https://nbari.com/sh-loop/">&lt;p&gt;Easy shell &lt;code&gt;sh&lt;&#x2F;code&gt; loop within a range:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ for i in $(seq 1 3); do echo $i; done
&lt;&#x2F;span&gt;&lt;span&gt;1
&lt;&#x2F;span&gt;&lt;span&gt;2
&lt;&#x2F;span&gt;&lt;span&gt;3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>git format-patch</title>
        <published>2017-11-19T20:34:45+01:00</published>
        <updated>2017-11-19T20:34:45+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/git-format-patch/"/>
        <id>https://nbari.com/git-format-patch/</id>
        
        <content type="html" xml:base="https://nbari.com/git-format-patch/">&lt;p&gt;To create a patch of the latest commit:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git format-patch -1 HEAD
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The last 10 patches from head in a single patch file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git format-patch -10 HEAD --stdout &amp;gt; last-10-commits.patch
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Apply the patch:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git apply path-file-name
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>rsyslog 2 syslog-ng</title>
        <published>2017-11-16T17:21:16+01:00</published>
        <updated>2017-11-16T17:21:16+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rsyslog2syslog-ng/"/>
        <id>https://nbari.com/rsyslog2syslog-ng/</id>
        
        <content type="html" xml:base="https://nbari.com/rsyslog2syslog-ng/">&lt;p&gt;To forward all logs from &lt;code&gt;rsyslog&lt;&#x2F;code&gt; to &lt;code&gt;syslog-ng&lt;&#x2F;code&gt;, add at the end of file &lt;code&gt;&#x2F;etc&#x2F;rsyslog.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;*.* @@(o)log.server.tld:601;RSYSLOG_SyslogProtocol23Format
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;@@&lt;&#x2F;code&gt; is for sending logs via TCP on port 601&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;(o)&lt;&#x2F;code&gt; configures proper framing&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;RSYSLOG_SyslogProtocol23Format&lt;&#x2F;code&gt; adds the RFC5424 template&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Using the RFC5424 syslog protocol with plain TCP between rsyslog and syslog-ng: https:&#x2F;&#x2F;www.balabit.com&#x2F;blog&#x2F;using-rfc5424-syslog-protocol-plain-tcp-rsyslog-syslog-ng&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ncdu</title>
        <published>2017-11-14T10:19:51+01:00</published>
        <updated>2017-11-14T10:19:51+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ncdu/"/>
        <id>https://nbari.com/ncdu/</id>
        
        <content type="html" xml:base="https://nbari.com/ncdu/">&lt;p&gt;&lt;code&gt;ncdu&lt;&#x2F;code&gt; helps displaying disk usage in an easy way, to install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install ncdu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To scan and browse the directory you&#x27;re currently in, all you need is a simple:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ncdu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you want to scan a full filesystem, your root filesystem, for example, then
you&#x27;ll want to use &quot;-x&quot;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ncdu -x &#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;All files read only and in local machine:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo ncdu -rx &#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;-r&lt;&#x2F;code&gt; option is for read only mode, option &lt;code&gt;-x&lt;&#x2F;code&gt; is to stay in the same file
system (do not traverse other filesystem mounts)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>openvpn 2fa</title>
        <published>2017-11-13T18:36:27+01:00</published>
        <updated>2017-11-13T18:36:27+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/openvpn-2fa/"/>
        <id>https://nbari.com/openvpn-2fa/</id>
        
        <content type="html" xml:base="https://nbari.com/openvpn-2fa/">&lt;p&gt;Setup OpenVPN + 2fa&lt;&#x2F;p&gt;
&lt;p&gt;The way it works is that openvpn besides only allowing guest with a valid
certificate it will prompt users for a username and password in where username is
a system user and password is the OTP generated by the google authenticator.&lt;&#x2F;p&gt;
&lt;p&gt;First you need to install &lt;code&gt;google-authenticator&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install pam_google_authenticator
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next create the file &lt;code&gt;&#x2F;etc&#x2F;pam.d&#x2F;openvpn&lt;&#x2F;code&gt; with this contents:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;auth            required        &#x2F;usr&#x2F;local&#x2F;lib&#x2F;pam_google_authenticator.so
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The openvpn configuration should look like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ------------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# routed VPN
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ------------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;port&lt;&#x2F;span&gt;&lt;span&gt; 1194
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;proto&lt;&#x2F;span&gt;&lt;span&gt; udp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dev&lt;&#x2F;span&gt;&lt;span&gt; tun
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;topology&lt;&#x2F;span&gt;&lt;span&gt; subnet
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;server&lt;&#x2F;span&gt;&lt;span&gt; 172.16.13.0 255.255.255.0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tun-mtu&lt;&#x2F;span&gt;&lt;span&gt; 1400
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ca&lt;&#x2F;span&gt;&lt;span&gt; keys&#x2F;ca.crt
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cert&lt;&#x2F;span&gt;&lt;span&gt; keys&#x2F;server.crt
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt; keys&#x2F;server.key
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dh&lt;&#x2F;span&gt;&lt;span&gt; keys&#x2F;dh2048.pem
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tls-auth&lt;&#x2F;span&gt;&lt;span&gt; keys&#x2F;ta.key 0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key-direction&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;dhcp-option DNS 4.2.2.2&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;dhcp-option DNS 8.8.8.8&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;redirect-gateway def1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;client-config-dir&lt;&#x2F;span&gt;&lt;span&gt; ccd
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plugin&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;openvpn&#x2F;plugins&#x2F;openvpn-plugin-auth-pam.so openvpn
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;duplicate-cn
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cipher&lt;&#x2F;span&gt;&lt;span&gt; AES-256-CBC
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth&lt;&#x2F;span&gt;&lt;span&gt; SHA512
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;comp-lzo
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max-clients&lt;&#x2F;span&gt;&lt;span&gt; 100
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;user&lt;&#x2F;span&gt;&lt;span&gt; nobody
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;group&lt;&#x2F;span&gt;&lt;span&gt; nobody
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;persist-key
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;persist-tun
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt; openvpn-status.log
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;verb&lt;&#x2F;span&gt;&lt;span&gt; 4
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;keepalive&lt;&#x2F;span&gt;&lt;span&gt; 20 40
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# certificate revoking list
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# crl-verify keys&#x2F;crl.pem
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice the line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;plugin &#x2F;usr&#x2F;local&#x2F;lib&#x2F;openvpn&#x2F;plugins&#x2F;openvpn-plugin-auth-pam.so openvpn
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The client side should be something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;client
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dev&lt;&#x2F;span&gt;&lt;span&gt; tun
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;proto&lt;&#x2F;span&gt;&lt;span&gt; udp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;remote&lt;&#x2F;span&gt;&lt;span&gt; X.X.X.X 1194
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;resolv-retry&lt;&#x2F;span&gt;&lt;span&gt; infinite
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nobind
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;persist-key
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;persist-tun
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;comp-lzo
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key-direction&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cipher&lt;&#x2F;span&gt;&lt;span&gt; AES-256-CBC
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth&lt;&#x2F;span&gt;&lt;span&gt; SHA512
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;verb&lt;&#x2F;span&gt;&lt;span&gt; 3
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth-user-pass
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth-nocache
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;ca&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----BEGIN&lt;&#x2F;span&gt;&lt;span&gt; CERTIFICATE-----
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----END&lt;&#x2F;span&gt;&lt;span&gt; CERTIFICATE-----
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;ca&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;cert&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----BEGIN&lt;&#x2F;span&gt;&lt;span&gt; CERTIFICATE-----
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----END&lt;&#x2F;span&gt;&lt;span&gt; CERTIFICATE-----
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;cert&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;key&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----BEGIN&lt;&#x2F;span&gt;&lt;span&gt; PRIVATE KEY-----
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----END&lt;&#x2F;span&gt;&lt;span&gt; PRIVATE KEY-----
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;key&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;tls-auth&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----BEGIN&lt;&#x2F;span&gt;&lt;span&gt; OpenVPN Static key V1-----
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-----END&lt;&#x2F;span&gt;&lt;span&gt; OpenVPN Static key V1-----
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;tls-auth&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Notice the:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;auth-user-pass
&lt;&#x2F;span&gt;&lt;span&gt;auth-nocache
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;add-users-create-sign-certs&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#add-users-create-sign-certs&quot; aria-label=&quot;Anchor link for: add-users-create-sign-certs&quot;&gt;🔗&lt;&#x2F;a&gt;Add users (create &amp;amp; sign certs)&lt;&#x2F;h3&gt;
&lt;p&gt;First create user certificate by doing something like (this can be created by user and the admin could only sign the cert):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;openssl req -new -newkey rsa:2048 -nodes -out guest.csr -keyout guest.key -subj &amp;quot;&#x2F;C=DE&#x2F;ST=Germany&#x2F;L=Berlin&#x2F;O=acme&#x2F;OU=IT&#x2F;CN=guest&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With the server key you need to sign the &lt;code&gt;guest.csr&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;openssl x509 -req -in guest.csr -CA ca.crt -CAkey ca.key -set_serial 01 -out users&#x2F;guest.crt -days 7
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case the &lt;code&gt;guest.crt&lt;&#x2F;code&gt; will be only valid for 7 days.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;create-the-2fa-codes-for-the-user&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-the-2fa-codes-for-the-user&quot; aria-label=&quot;Anchor link for: create-the-2fa-codes-for-the-user&quot;&gt;🔗&lt;&#x2F;a&gt;create the 2fA codes for the user&lt;&#x2F;h3&gt;
&lt;p&gt;The easy way is to create &#x2F; add user to the system &lt;code&gt;adduser&lt;&#x2F;code&gt;, once the user has been created you could run this command:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;su - guest -c google-authenticator
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will create a file in the &lt;code&gt;guest&lt;&#x2F;code&gt; user $HOME: &lt;code&gt;&#x2F;home&#x2F;test&#x2F;.google_authenticator&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cat .google_authenticator
&lt;&#x2F;span&gt;&lt;span&gt;35NIQ7S2T44WT5ZC
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; RATE_LIMIT 3 30 1510594908 1510594922
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; WINDOW_SIZE 17
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; DISALLOW_REUSE 50353163
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; TOTP_AUTH
&lt;&#x2F;span&gt;&lt;span&gt;53344656
&lt;&#x2F;span&gt;&lt;span&gt;94746893
&lt;&#x2F;span&gt;&lt;span&gt;13420893
&lt;&#x2F;span&gt;&lt;span&gt;11387169
&lt;&#x2F;span&gt;&lt;span&gt;23988009
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;35NIQ7S2T44WT5ZC&lt;&#x2F;code&gt; is the seed &#x2F; code you need to use within your app that
generates the codes for example in authy it will be here:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;authy-enter-code.png&quot; alt=&quot;authy enter code&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This should be enough for a starting point.&lt;&#x2F;p&gt;
&lt;p&gt;To test that the &lt;code&gt;pam&lt;&#x2F;code&gt; settings are working you could use &lt;code&gt;pamtester&lt;&#x2F;code&gt;, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# pamtester -v openvpn guest authenticate
&lt;&#x2F;span&gt;&lt;span&gt;pamtester: invoking pam_start(openvpn, test, ...)
&lt;&#x2F;span&gt;&lt;span&gt;pamtester: performing operation - authenticate
&lt;&#x2F;span&gt;&lt;span&gt;Verification code:
&lt;&#x2F;span&gt;&lt;span&gt;pamtester: successfully authenticated
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The verification code should be the one generated by your application.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pamtester</title>
        <published>2017-11-13T18:06:41+01:00</published>
        <updated>2017-11-13T18:06:41+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pamtester/"/>
        <id>https://nbari.com/pamtester/</id>
        
        <content type="html" xml:base="https://nbari.com/pamtester/">&lt;p&gt;&lt;code&gt;pamtester&lt;&#x2F;code&gt; can be used to test your PAM setup, to install it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install pamtester
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test for example openvpn:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pamtester -v openvpn test authenticate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Wait Process to Finish</title>
        <published>2017-11-11T09:27:21+01:00</published>
        <updated>2017-11-11T09:27:21+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/wait-process-to-finish/"/>
        <id>https://nbari.com/wait-process-to-finish/</id>
        
        <content type="html" xml:base="https://nbari.com/wait-process-to-finish/">&lt;p&gt;Cross platform solutution:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;while kill -0 PID 2&amp;gt; &#x2F;dev&#x2F;null; do sleep 1; done;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sleep 60 &amp;amp;
&lt;&#x2F;span&gt;&lt;span&gt;$ while kill -0 $!; do echo 1 &amp;amp;&amp;amp; sleep 0.5; done
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If using FreeBSD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pwait
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Also &lt;code&gt;lsoft&lt;&#x2F;code&gt; can be used but requires that the &lt;code&gt;$pid&lt;&#x2F;code&gt; has open files:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;lsof -p $pid +r 1 &amp;amp;&amp;gt;&#x2F;dev&#x2F;null
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>netcat</title>
        <published>2017-11-10T20:50:51+01:00</published>
        <updated>2017-11-10T20:50:51+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/netcat/"/>
        <id>https://nbari.com/netcat/</id>
        
        <content type="html" xml:base="https://nbari.com/netcat/">&lt;p&gt;As a replacement to telnet now that has been removed from macOS,
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Netcat&quot;&gt;netcat&lt;&#x2F;a&gt; can be used.&lt;&#x2F;p&gt;
&lt;p&gt;To test the response from a web server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo -en &amp;quot;GET &#x2F; HTTP&#x2F;1.0\n\n\n&amp;quot; | nc google.com 80
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If using HTTP&#x2F;1.1 the host will be required:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo -en &amp;quot;GET &#x2F; HTTP&#x2F;1.1\nHost: google.com\n\n&amp;quot; | nc google.com 80
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test to see if port accepts connections:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; nc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -vz&lt;&#x2F;span&gt;&lt;span&gt; google.com 80
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found&lt;&#x2F;span&gt;&lt;span&gt; 0 associations
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found&lt;&#x2F;span&gt;&lt;span&gt; 1 connections:
&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1:&lt;&#x2F;span&gt;&lt;span&gt; flags=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;82&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;CONNECTED,PREFERRED&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;outif&lt;&#x2F;span&gt;&lt;span&gt; en1
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;src&lt;&#x2F;span&gt;&lt;span&gt; 192.168.1.100 port 50532
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dst&lt;&#x2F;span&gt;&lt;span&gt; 216.58.211.110 port 80
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rank&lt;&#x2F;span&gt;&lt;span&gt; info not available
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TCP&lt;&#x2F;span&gt;&lt;span&gt; aux info available
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Connection&lt;&#x2F;span&gt;&lt;span&gt; to google.com port 80 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;tcp&#x2F;http&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt; succeeded!
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The -z option is specifies that &lt;code&gt;nc&lt;&#x2F;code&gt; should just scan for listening daemons,
without sending any data to them. If using just -v it will keep connection open
and &lt;code&gt;ctrl + c&lt;&#x2F;code&gt; could be used to close the connection.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;like-telnet&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#like-telnet&quot; aria-label=&quot;Anchor link for: like-telnet&quot;&gt;🔗&lt;&#x2F;a&gt;like telnet&lt;&#x2F;h3&gt;
&lt;p&gt;To send data instead like where in telnet use the option &lt;code&gt;-t&lt;&#x2F;code&gt; which causes &lt;code&gt;nc&lt;&#x2F;code&gt;
to send RFC 854 DON&#x27;T and WON&#x27;T responses to RFC 854 DO and WILL requests. This
makes it possible to use &lt;code&gt;nc&lt;&#x2F;code&gt; to script telnet sessions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; nc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -vt&lt;&#x2F;span&gt;&lt;span&gt; google.com 80
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found&lt;&#x2F;span&gt;&lt;span&gt; 0 associations
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found&lt;&#x2F;span&gt;&lt;span&gt; 1 connections:
&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1:&lt;&#x2F;span&gt;&lt;span&gt; flags=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;82&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;CONNECTED,PREFERRED&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;outif&lt;&#x2F;span&gt;&lt;span&gt; en1
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;src&lt;&#x2F;span&gt;&lt;span&gt; 192.168.1.100 port 50532
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dst&lt;&#x2F;span&gt;&lt;span&gt; 216.58.211.110 port 80
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rank&lt;&#x2F;span&gt;&lt;span&gt; info not available
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TCP&lt;&#x2F;span&gt;&lt;span&gt; aux info available
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Connection&lt;&#x2F;span&gt;&lt;span&gt; to google.com port 80 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;tcp&#x2F;http&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt; succeeded!
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;GET&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;   &amp;lt;------- you write this
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;scan&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#scan&quot; aria-label=&quot;Anchor link for: scan&quot;&gt;🔗&lt;&#x2F;a&gt;scan&lt;&#x2F;h3&gt;
&lt;p&gt;To scan a range of ports:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nc -zvn your-target.tld 1-1000
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;-n&lt;&#x2F;code&gt; option is to avoid doing any DNS or service lookups&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To print the TPC banner of the running service this could be used:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;echo &amp;quot;&amp;quot; | nc -vn -w1 -G1 your-target.tld -r 1-1000
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;-w1&lt;&#x2F;code&gt; is for waiting no more than 1 second if the connection and stdin are
idle, the &lt;code&gt;echo &quot;&quot;&lt;&#x2F;code&gt; send a black string to the open port and print out any
banner received in response.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;-G1&lt;&#x2F;code&gt; sets the ctp connection timeout to 1 second.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;-r&lt;&#x2F;code&gt; specifies that the source and&#x2F;or destination ports should chosen
randomly instead of sequentially.&lt;&#x2F;p&gt;
&lt;p&gt;https:&#x2F;&#x2F;docs.saltstack.com&#x2F;en&#x2F;latest&#x2F;topics&#x2F;mine&#x2F;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;listen-for-connections&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#listen-for-connections&quot; aria-label=&quot;Anchor link for: listen-for-connections&quot;&gt;🔗&lt;&#x2F;a&gt;listen for connections&lt;&#x2F;h3&gt;
&lt;p&gt;To open a port and keep listening on it, useful for testing incoming
connections:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nc -lk 8080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test you can connect to the opened port by doing:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nc -vt 0 8080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;0 stands for localhost but you could use the IP (192.168.X.X) for example&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;transfer-a-file&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#transfer-a-file&quot; aria-label=&quot;Anchor link for: transfer-a-file&quot;&gt;🔗&lt;&#x2F;a&gt;transfer a file&lt;&#x2F;h3&gt;
&lt;p&gt;On the server where you want to store the file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nc -l 8080 &amp;gt;  outfile
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the client where you have the file that you want to send:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nc X.X.X.X 8080 &amp;lt; infile
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>shasum</title>
        <published>2017-11-08T11:40:03+01:00</published>
        <updated>2017-11-08T11:40:03+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/shasum/"/>
        <id>https://nbari.com/shasum/</id>
        
        <content type="html" xml:base="https://nbari.com/shasum/">&lt;p&gt;Create a &lt;code&gt;checksum&lt;&#x2F;code&gt; file for all files within a directory:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ shasum * &amp;gt; checksum
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check the checksum:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ shasum -c checksum
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To use &lt;code&gt;sha256&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ shasum -a 256 * &amp;gt; checksum
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>RF clock setting the time manully</title>
        <published>2017-10-29T11:35:38+01:00</published>
        <updated>2017-10-29T11:35:38+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rf-clock-setting-the-time-manully/"/>
        <id>https://nbari.com/rf-clock-setting-the-time-manully/</id>
        
        <content type="html" xml:base="https://nbari.com/rf-clock-setting-the-time-manully/">&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;rf-wall-clock.jpg&quot; alt=&quot;rf clock&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;rf-wall-clock-back.png&quot; alt=&quot;rf clock&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Press and hold the M.SET button for 3 seconds to set the time:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Press the M.SET button for 1 second to advance 1 minute.&lt;&#x2F;li&gt;
&lt;li&gt;Press the M.SET button for more than 1 second to auto advance the minute hand.&lt;&#x2F;li&gt;
&lt;li&gt;If the M.SET button is not pressed for 8 seconds, or press REC button, the clock is set.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;start-manual-reception&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#start-manual-reception&quot; aria-label=&quot;Anchor link for: start-manual-reception&quot;&gt;🔗&lt;&#x2F;a&gt;Start manual reception&lt;&#x2F;h2&gt;
&lt;p&gt;Press the REC button for 3 seconds. The hands will move to the 12:00 position
and the clock will start searching for the DCF signal. Once the DCF signal will
be received properly, it will automatically set to the correct time. If no
signal is received, the clock returns to the previously stored time.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pipenv + ansible</title>
        <published>2017-10-24T23:37:05+02:00</published>
        <updated>2017-10-24T23:37:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pipenv-ansible/"/>
        <id>https://nbari.com/pipenv-ansible/</id>
        
        <content type="html" xml:base="https://nbari.com/pipenv-ansible/">&lt;p&gt;First install &lt;a href=&quot;https:&#x2F;&#x2F;docs.pipenv.org&#x2F;&quot;&gt;pipenv&lt;&#x2F;a&gt; in case you don&#x27;t have it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip install --user pipenv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, for testing create a directory &lt;code&gt;&#x2F;tmp&#x2F;my-ansible&lt;&#x2F;code&gt;, within that directory
create a file named &lt;code&gt;requirements.txt&lt;&#x2F;code&gt; with the following content:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;ansible==&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2.4.0.0
&lt;&#x2F;span&gt;&lt;span&gt;boto==&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2.48.0
&lt;&#x2F;span&gt;&lt;span&gt;boto3==&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1.4.4
&lt;&#x2F;span&gt;&lt;span&gt;paramiko==&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2.0.6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;cd&lt;&#x2F;code&gt; in to &lt;code&gt;&#x2F;tmp&#x2F;my-ansible&lt;&#x2F;code&gt; or if you already have a working project &lt;code&gt;cd&lt;&#x2F;code&gt; in to
it and run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv install -r requirements.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or you could just run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv install ansible
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It will create 2 new files &lt;code&gt;Pipfile&lt;&#x2F;code&gt; and &lt;code&gt;Pipfile.lock&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To active &lt;a href=&quot;https:&#x2F;&#x2F;virtualenv.pypa.io&#x2F;en&#x2F;stable&#x2F;&quot;&gt;virtualenv&lt;&#x2F;a&gt; in the project just run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv shell
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That will activate the environment for your working directory and launch&#x2F;run
your project based on your settings&#x2F;requirements.txt.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ansible --version
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When finish just type &lt;code&gt;exit&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In case you would like to remove the &lt;code&gt;virtualenv&lt;&#x2F;code&gt; created by &lt;code&gt;pipenv&lt;&#x2F;code&gt; run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pipenv --rm
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info here: https:&#x2F;&#x2F;github.com&#x2F;kennethreitz&#x2F;pipenv&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>locale UTF8</title>
        <published>2017-10-23T11:54:35+02:00</published>
        <updated>2017-10-23T11:54:35+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/locale-utf8/"/>
        <id>https://nbari.com/locale-utf8/</id>
        
        <content type="html" xml:base="https://nbari.com/locale-utf8/">&lt;p&gt;To enable UTF-8 globally by default, update the default login class by adding at the end
this lines in file &lt;code&gt;&#x2F;etc&#x2F;login.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;   :charset=UTF-8:\
&lt;&#x2F;span&gt;&lt;span&gt;   :lang=en_US.UTF-8:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Normally add them after &lt;code&gt;:umask=022:&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;diff&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-diff &quot;&gt;&lt;code class=&quot;language-diff&quot; data-lang=&quot;diff&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-       :umask=022:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+       :umask=022:\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+       :charset=UTF-8:\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+       :lang=en_US.UTF-8:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After modifying &lt;code&gt;&#x2F;etc&#x2F;login.conf&lt;&#x2F;code&gt; run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cap_mkdb &#x2F;etc&#x2F;login.conf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will rebuild the login class capabilities database.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;login-conf&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#login-conf&quot; aria-label=&quot;Anchor link for: login-conf&quot;&gt;🔗&lt;&#x2F;a&gt;~&#x2F;.login_conf&lt;&#x2F;h3&gt;
&lt;p&gt;Users may individually create a file called &lt;code&gt;.login_conf&lt;&#x2F;code&gt; in their home
directory using the same format, consisting of a single entry with a record id
of &lt;code&gt;me&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; cat &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;.login_conf
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;me:\
&lt;&#x2F;span&gt;&lt;span&gt;        :charset=UTF-8:\
&lt;&#x2F;span&gt;&lt;span&gt;        :lang=en_US.UTF-8:\
&lt;&#x2F;span&gt;&lt;span&gt;        :setenv=LC_COLLATE=C:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;locale&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#locale&quot; aria-label=&quot;Anchor link for: locale&quot;&gt;🔗&lt;&#x2F;a&gt;locale&lt;&#x2F;h3&gt;
&lt;p&gt;Type &lt;code&gt;locale&lt;&#x2F;code&gt; to verity that the new settings took effect:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# locale
&lt;&#x2F;span&gt;&lt;span&gt;LANG=en_US.UTF-8
&lt;&#x2F;span&gt;&lt;span&gt;LC_CTYPE=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_COLLATE=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_TIME=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_NUMERIC=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_MONETARY=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_MESSAGES=&amp;quot;en_US.UTF-8&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;LC_ALL=
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Plex within a FreeBSD jail</title>
        <published>2017-10-22T22:23:25+02:00</published>
        <updated>2017-10-22T22:23:25+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/plex-jail/"/>
        <id>https://nbari.com/plex-jail/</id>
        
        <content type="html" xml:base="https://nbari.com/plex-jail/">&lt;p&gt;For downloading metadata plex uses &lt;code&gt;127.0.0.1&lt;&#x2F;code&gt; therefore the
jail needs to have a loopback interface.&lt;&#x2F;p&gt;
&lt;p&gt;Create a &lt;code&gt;lo1&lt;&#x2F;code&gt; interface, add to &lt;code&gt;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cloned_interfaces=&amp;quot;lo1&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add first the loopback IP in the &lt;code&gt;jail.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plex &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    ip4.addr  = lo1|127.0.2.1;
&lt;&#x2F;span&gt;&lt;span&gt;    ip4.addr += igb0|172.16.8.2;
&lt;&#x2F;span&gt;&lt;span&gt;    path      = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;fabrik&#x2F;jail&#x2F;plex&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will add as the main IP &lt;code&gt;127.0.2.1&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Inside a jail, access to the loopback address 127.0.0.1 is redirected to the
first IP address assigned to the jail. To make the jail loopback correspond with
the new lo1 interface, that interface must be specified first in the list of
interfaces and IP addresses given when creating a new jail.&lt;&#x2F;p&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;hosts&lt;&#x2F;code&gt; in the jail so that localhost uses IP &lt;code&gt;127.0.2.1&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;127.0.2.1       localhost  localhost.your.domain
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;claiming-your-server&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#claiming-your-server&quot; aria-label=&quot;Anchor link for: claiming-your-server&quot;&gt;🔗&lt;&#x2F;a&gt;Claiming your server&lt;&#x2F;h2&gt;
&lt;p&gt;You claim&#x2F;configure your new plex server, you need to run it on a private
network, and later just redirect &#x2F; forward the port so that It can be reached
from plex.tv&#x2F;web.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;rdr on $ext_if proto tcp from any to any port 32400 -&amp;gt; 172.16.8.2 port 32400
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bhyve + IPv6</title>
        <published>2017-10-20T11:21:40+02:00</published>
        <updated>2017-10-20T11:21:40+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bhyve-ipv6/"/>
        <id>https://nbari.com/bhyve-ipv6/</id>
        
        <content type="html" xml:base="https://nbari.com/bhyve-ipv6/">&lt;p&gt;bhyve + ipv6&lt;&#x2F;p&gt;
&lt;p&gt;This is how to set assign IPv6 addresses to guest within
&lt;a href=&quot;http:&#x2F;&#x2F;bhyve.org&#x2F;&quot;&gt;bhyve&lt;&#x2F;a&gt; on a server with one single network card, the trick
to make this to work is to assign the&#x2F;handle the IPs within the bridge in
&lt;code&gt;auto_linklocal&lt;&#x2F;code&gt; mode.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;rc.conf&lt;&#x2F;code&gt; file:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ifconfig_igb0&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;inet X.X.X.X netmask 255.255.255.XXX&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;defaultrouter&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;X.X.X.X&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gateway_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ipv6_activate_all_interfaces&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ipv6_defaultrouter&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fe80::1%bridge0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ipv6_gateway_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cloned_interfaces&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;bridge0 tap0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;autobridge_interfaces&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;bridge0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;autobridge_bridge0&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;tap* igb0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ifconfig_bridge0&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;addm igb0 addm tap0 up description bhyve&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ifconfig_bridge0_ipv6&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;inet6 2a01:4f8:350:84ec::1 prefixlen 64 auto_linklocal&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rtadvd_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rtadvd_interfaces&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;bridge0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;rtadvd.conf&lt;&#x2F;code&gt; file:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bridge0:\
&lt;&#x2F;span&gt;&lt;span&gt;    :addr=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;2a01:4f8:350:84ec::&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:prefixlen#64:\
&lt;&#x2F;span&gt;&lt;span&gt;    :rdnss=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;2a01:4f8:350:84ec::1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:\
&lt;&#x2F;span&gt;&lt;span&gt;    :dnssl=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nbari.com&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;By doing this, the bhyve guest VM&#x27;s can ping the main host, and use local
services like unbound for DNS resolution.&lt;&#x2F;p&gt;
&lt;p&gt;In the logs you will notice something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bridge0: IPv6 addresses on igb0 have been removed before adding it as a member to prevent IPv6 address scope violation.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This can be avoided by using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl net.link.bridge.allow_llz_overlap=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But will cause in terms that the guests may get an IP but not the router gateway.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>netstat Bytes in Out</title>
        <published>2017-10-20T00:12:06+02:00</published>
        <updated>2017-10-20T00:12:06+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/netstat-bytes-in-out/"/>
        <id>https://nbari.com/netstat-bytes-in-out/</id>
        
        <content type="html" xml:base="https://nbari.com/netstat-bytes-in-out/">&lt;p&gt;To get bytes in&#x2F;out:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# netstat -bI bridge0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For example to get bytes in&#x2F;out on tap interface:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# netstat -bI tap0
&lt;&#x2F;span&gt;&lt;span&gt;Name    Mtu Network       Address              Ipkts Ierrs Idrop     Ibytes    Opkts Oerrs     Obytes  Coll
&lt;&#x2F;span&gt;&lt;span&gt;tap0*  1500 &amp;lt;Link#7&amp;gt;      00:bd:49:f6:f6:00     1689     0     0     153380        0     0     161697     0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>tcpdump IPv6</title>
        <published>2017-10-19T15:29:42+02:00</published>
        <updated>2017-10-19T15:29:42+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/tcpdump-ipv6/"/>
        <id>https://nbari.com/tcpdump-ipv6/</id>
        
        <content type="html" xml:base="https://nbari.com/tcpdump-ipv6/">&lt;p&gt;To capture ipv6 traffic using tcpdump:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# tcpdump -vvv ip6 -i igb0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;replace igb0 with your network card&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ansible ImportError: No module named boto3</title>
        <published>2017-10-16T17:21:57+02:00</published>
        <updated>2017-10-16T17:21:57+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ansible-no-module-named-boto3/"/>
        <id>https://nbari.com/ansible-no-module-named-boto3/</id>
        
        <content type="html" xml:base="https://nbari.com/ansible-no-module-named-boto3/">&lt;p&gt;When using &lt;code&gt;ansible 2.4.0.0&lt;&#x2F;code&gt; (macOS) to fix this problem update your library:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --upgrade --user&lt;&#x2F;span&gt;&lt;span&gt; boto3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;notice the --user it will update, your local $HOME&#x2F;Library&#x2F;Python&#x2F;2.7&#x2F;lib&#x2F;python&#x2F;site-packages&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;By using &lt;code&gt;--upgrade&lt;&#x2F;code&gt; it will recreate the &lt;code&gt;site-packages&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Or create &lt;code&gt;PYTHONPATH&lt;&#x2F;code&gt; system variable:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export PYTHONPATH=&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;site-packages
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;paramiko&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#paramiko&quot; aria-label=&quot;Anchor link for: paramiko&quot;&gt;🔗&lt;&#x2F;a&gt;paramiko&lt;&#x2F;h3&gt;
&lt;p&gt;In case you get this error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Unicode-objects must be encoded before hashing&amp;quot;, &amp;quot;unreachable&amp;quot;: true
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip install --upgrade --user paramiko==2.0.6
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To upgrade,reinstall ansible just in case:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip install --upgrade --user ansible
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pflog</title>
        <published>2017-10-14T22:52:39+02:00</published>
        <updated>2017-10-14T22:52:39+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pflog/"/>
        <id>https://nbari.com/pflog/</id>
        
        <content type="html" xml:base="https://nbari.com/pflog/">&lt;p&gt;To monitor all packets loged when using &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=pflog&quot;&gt;pflog&lt;&#x2F;a&gt;, use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tcpdump -n -e -ttt -i pflog0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To find the rule by number:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pfctl -vvsr
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For nat:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pfctl -vvsn
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In macOS to create the &lt;code&gt;pflog0&lt;&#x2F;code&gt; interface:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo ifconfig pflog0 create
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can remove it with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sudo ifconfig pflog0 destroy
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>bsdinstall MANIFEST</title>
        <published>2017-10-13T17:05:16+02:00</published>
        <updated>2017-10-13T17:05:16+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bsdinstall-manifest/"/>
        <id>https://nbari.com/bsdinstall-manifest/</id>
        
        <content type="html" xml:base="https://nbari.com/bsdinstall-manifest/">&lt;p&gt;When installing FreeBSD from an ftp&#x2F;http it may complain that &lt;code&gt;MANIFEST&lt;&#x2F;code&gt; file is
missing, to solve the problem try this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export DISTRIBUTIONS=&amp;quot;kernel.txz base.txz&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;mkdir &#x2F;usr&#x2F;freebsd-dist
&lt;&#x2F;span&gt;&lt;span&gt;export BSDINSTALL_DISTDIR=&amp;quot;&#x2F;usr&#x2F;freebsd-dist&#x2F;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;export BSDINSTALL_DISTSITE=&amp;quot;https:&#x2F;&#x2F;download.freebsd.org&#x2F;ftp&#x2F;releases&#x2F;amd64&#x2F;amd64&#x2F;12.1-RELEASE&#x2F;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;bsdinstall distfetch
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;cd &#x2F;usr&#x2F;freebsd-dist
&lt;&#x2F;span&gt;&lt;span&gt;fetch https:&#x2F;&#x2F;download.freebsd.org&#x2F;ftp&#x2F;releases&#x2F;amd64&#x2F;amd64&#x2F;12.1-RELEASE&#x2F;MANIFEST
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then run &lt;code&gt;bsdinstall&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Go Benchmarking</title>
        <published>2017-09-24T22:43:18+02:00</published>
        <updated>2017-09-24T22:43:18+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/go-bench/"/>
        <id>https://nbari.com/go-bench/</id>
        
        <content type="html" xml:base="https://nbari.com/go-bench/">&lt;p&gt;To exclude all the tests and just run the benchmarks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;go test -run=^$ -bench=.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Profile:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;go test -cpuprofile=cpu.out -benchmem -memprofile=mem.out -run=^$ -bench=
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Using &lt;code&gt;pprof&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;CPU:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;go tool pprof &amp;lt;your-binary&amp;gt;.test cpu.out
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;MEM:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;go tool pprof -alloc_objects &amp;lt;your-binary&amp;gt;.test mem.out
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Go Tooling in Action&lt;&#x2F;p&gt;
&lt;p&gt;{{&amp;lt; youtube uBjoTxosSys&amp;gt;}}&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Plex FFmpeg</title>
        <published>2017-09-24T16:09:44+02:00</published>
        <updated>2017-09-24T16:09:44+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/plex-ffmpeg/"/>
        <id>https://nbari.com/plex-ffmpeg/</id>
        
        <content type="html" xml:base="https://nbari.com/plex-ffmpeg/">&lt;p&gt;Using &lt;a href=&quot;https:&#x2F;&#x2F;www.ffmpeg.org&#x2F;&quot;&gt;ffmpeg&lt;&#x2F;a&gt; to avoid &lt;a href=&quot;https:&#x2F;&#x2F;plex.tv&quot;&gt;PLEX&lt;&#x2F;a&gt; transcoding.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ffmpeg -i input.mp4 \
&lt;&#x2F;span&gt;&lt;span&gt;    -c:v libx264 \
&lt;&#x2F;span&gt;&lt;span&gt;    -profile:v high \
&lt;&#x2F;span&gt;&lt;span&gt;    -level 5 \
&lt;&#x2F;span&gt;&lt;span&gt;    -crf 18 \
&lt;&#x2F;span&gt;&lt;span&gt;    -maxrate 10M \
&lt;&#x2F;span&gt;&lt;span&gt;    -bufsize 16M \
&lt;&#x2F;span&gt;&lt;span&gt;    -pix_fmt yuv420p \
&lt;&#x2F;span&gt;&lt;span&gt;    -vf &amp;quot;scale=iw*sar:ih, scale=&amp;#39;if(gt(iw,ih),min(1920,iw),-1)&amp;#39;:&amp;#39;if(gt(iw,ih),-1,min(1080,ih))&amp;#39;&amp;quot; \
&lt;&#x2F;span&gt;&lt;span&gt;    -x264opts bframes=3:cabac=1 \
&lt;&#x2F;span&gt;&lt;span&gt;    -movflags faststart \
&lt;&#x2F;span&gt;&lt;span&gt;    -c:a libfdk_aac \
&lt;&#x2F;span&gt;&lt;span&gt;    -b:a 320k \
&lt;&#x2F;span&gt;&lt;span&gt;    -y output.mp4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;If parts of the file reside on physically bad sectors, or for whatever reason, the OS cannot serve the whole file to FFmpeg try: &lt;code&gt;ffmpeg -err_detect ignore_err -i input.mkv ...&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To install ffmpeg:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew tap varenc&#x2F;ffmpeg
&lt;&#x2F;span&gt;&lt;span&gt;brew install varenc&#x2F;ffmpeg&#x2F;ffmpeg --with-fdk-aac --HEAD
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To see more options:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew options varenc&#x2F;ffmpeg&#x2F;ffmpeg
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>zip -r</title>
        <published>2017-09-17T09:47:31+02:00</published>
        <updated>2017-09-17T09:47:31+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zip-archive/"/>
        <id>https://nbari.com/zip-archive/</id>
        
        <content type="html" xml:base="https://nbari.com/zip-archive/">&lt;h1 id=&quot;create-and-append-archive-things-to-a-zip-file&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-and-append-archive-things-to-a-zip-file&quot; aria-label=&quot;Anchor link for: create-and-append-archive-things-to-a-zip-file&quot;&gt;🔗&lt;&#x2F;a&gt;Create and append &quot;archive&quot; things to a zip file&lt;&#x2F;h1&gt;
&lt;p&gt;Create a zip:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zip -9 foo.zip file
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add more things to the zip:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zip -r9 foo.zip bar.txt
&lt;&#x2F;span&gt;&lt;span&gt;$ cd $VIRTUAL_ENV&#x2F;lib&#x2F;python2.7&#x2F;site-packages
&lt;&#x2F;span&gt;&lt;span&gt;$ zip -r9 foo.zip *
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>AWS Policy Access by IP</title>
        <published>2017-09-15T22:50:11+02:00</published>
        <updated>2017-09-15T22:50:11+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-policy-access-by-ip/"/>
        <id>https://nbari.com/aws-policy-access-by-ip/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-policy-access-by-ip/">&lt;p&gt;Policy to restrict &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;IAM&#x2F;latest&#x2F;UserGuide&#x2F;reference_policies_elements.html#Condition&quot;&gt;IAM&lt;&#x2F;a&gt; AWS API requests to a specific set of IP addresses.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;json&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-json &quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Version&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;2012-10-17&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Statement&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Effect&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Deny&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Action&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Resource&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Condition&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;NotIpAddress&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws:SourceIp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.13.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;72.55.175.70&#x2F;32&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                ]
&lt;&#x2F;span&gt;&lt;span&gt;            }
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After applying this policy others may need to be applied or in case all in one
required, something like this can be used:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;Version&amp;quot;: &amp;quot;2012-10-17&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;Statement&amp;quot;: [{
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Effect&amp;quot;: &amp;quot;Deny&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Action&amp;quot;: &amp;quot;*&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Resource&amp;quot;: &amp;quot;*&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Condition&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;NotIpAddress&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;aws:SourceIp&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;10.13.0.0&#x2F;16&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;72.55.175.70&#x2F;32&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;quot;10.100.0.0&#x2F;16&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                ]
&lt;&#x2F;span&gt;&lt;span&gt;            }
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;    }, {
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Action&amp;quot;: &amp;quot;*&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;Resource&amp;quot;: &amp;quot;*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    }]
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The expected error when policy is applied is similar to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Error loading state: AccessDenied: Access Denied
&lt;&#x2F;span&gt;&lt;span&gt;status code: 403, request id: 5A14AE35A2D7CD1B, host id: ROyNOfAiBNojw7VTJ6tLsZeBjQ5YHILbjfubWg&#x2F;D8R&#x2F;C+4HORHGqcIw5ByyTr&#x2F;HyOP3TWK8Ogbs=
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Time wait</title>
        <published>2017-09-05T14:45:47+02:00</published>
        <updated>2017-09-05T14:45:47+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/time-wait/"/>
        <id>https://nbari.com/time-wait/</id>
        
        <content type="html" xml:base="https://nbari.com/time-wait/">&lt;p&gt;Reduce TIME_WAIT connections&lt;&#x2F;p&gt;
&lt;p&gt;How many TIME_WAITs you have hanging out (run this like root):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;netstat -na -p tcp | awk &amp;#39;{print $6}&amp;#39; | sort | uniq -c | sort -n
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On Linux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;netstat -nat | awk &amp;#39;{print $6}&amp;#39; | sort | uniq -c | sort -n
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Output will be something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# netstat -na -p tcp | awk &amp;#39;{print $6}&amp;#39; | sort | uniq -c | sort -n
&lt;&#x2F;span&gt;&lt;span&gt;   1
&lt;&#x2F;span&gt;&lt;span&gt;   1 Foreign
&lt;&#x2F;span&gt;&lt;span&gt;   1 LAST_ACK
&lt;&#x2F;span&gt;&lt;span&gt;   1 been
&lt;&#x2F;span&gt;&lt;span&gt;   3 LISTEN
&lt;&#x2F;span&gt;&lt;span&gt;  25 SYN_RCVD
&lt;&#x2F;span&gt;&lt;span&gt;1455 CLOSE_WAIT
&lt;&#x2F;span&gt;&lt;span&gt;17518 ESTABLISHED
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The formula to calculate the value (net.inet.tcp.msl) to time of seconds is 2
times of the net.inet.tcp.msl value. which means the value of net.inet.tcp.msl
with 30000 means 60000ms (because 2x30000), thus 60 seconds. In order set
net.inet.tcp.msl to 15 seconds, change the value of net.inet.tcp.msl to 7500.
for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl net.inet.tcp.msl=7500
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will cause the TIME_WAIT sockets to terminate after waiting for 15 seconds,
if no reply from the destination that this connection can be terminated.&lt;&#x2F;p&gt;
&lt;p&gt;This  can be added to the &lt;code&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;net.inet.tcp.fast_finwait2_recycle=1 # recycle FIN&#x2F;WAIT states quickly
&lt;&#x2F;span&gt;&lt;span&gt;net.inet.tcp.finwait2_timeout=15000  # TCP FIN_WAIT_2 timeout waiting for client FIN packet before state close (default 60000, 60 sec)
&lt;&#x2F;span&gt;&lt;span&gt;net.inet.tcp.msl=2500                # Maximum Segment Lifetime, time the connection spends in TIME_WAIT state (default 30000, 2*MSL = 60 sec)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;notice the &lt;strong&gt;2500&lt;&#x2F;strong&gt; it will be set to 5 seconds&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;On Linux edit &lt;code&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# Decrease TIME_WAIT seconds
&lt;&#x2F;span&gt;&lt;span&gt;net.ipv4.tcp_fin_timeout = 15
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;net.ipv4.tcp_tw_reuse = 1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;net.ipv4.tcp_tw_recycle has been removed from Linux 4.12. https:&#x2F;&#x2F;vincent.bernat.im&#x2F;en&#x2F;blog&#x2F;2014-tcp-time-wait-state-linux&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;tcp_state_diagram.png&quot; alt=&quot;tcp state diagram&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Transmission Control Protocol (TCP) is designed to be a bidirectional, ordered,
and reliable data transmission protocol between two end points (programs). In
this context, the term reliable means that it will retransmit the packets if
it gets lost in the middle. TCP guarantees the reliability by sending back
Acknowledgment (ACK) packets back for a single or a range of packets received
from the peer.&lt;&#x2F;p&gt;
&lt;p&gt;This goes same for the control signals such as termination request&#x2F;response.
[RFC 793][1] defines the TIME-WAIT state to be as follows:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;TIME-WAIT - represents waiting for enough time to pass to be sure the remote
TCP received the acknowledgment of its connection termination request.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;TCP is a bidirectional communication protocol, so when the connection is
established, there is not a difference between the client and the server. Also,
either one can call quits, and both peers needs to agree on closing to fully
close an established TCP connection.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s call the first one to call the quits as the active closer, and the other
peer the passive closer. When the active closer sends FIN, the state goes to
FIN-WAIT-1. Then it receives an ACK for the sent FIN and the state goes to
FIN-WAIT-2. Once it receives FIN also from the passive closer, the active closer
sends the ACK to the FIN and the state goes to TIME-WAIT. In case the passive
closer did not received the ACK to the second FIN, it will retransmit the FIN
packet.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;tools.ietf.org&#x2F;html&#x2F;rfc793&quot;&gt;RFC 793&lt;&#x2F;a&gt; sets the TIME-OUT to be twice the
Maximum Segment Lifetime, or 2MSL. Since MSL, the maximum time a packet can
wander around Internet, is set to 2 minutes, 2MSL is 4 minutes. Since there is
no ACK to an ACK, the active closer can&#x27;t do anything but to wait 4 minutes if
it adheres to the TCP&#x2F;IP protocol correctly, just in case the passive sender has
not received the ACK to its FIN (theoretically).&lt;&#x2F;p&gt;
&lt;p&gt;In reality, missing packets are probably rare, and very rare if it&#x27;s all
happening within the LAN or within a single machine.&lt;&#x2F;p&gt;
&lt;p&gt;See also:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;https:&#x2F;&#x2F;calomel.org&#x2F;freebsd_network_tuning.html&lt;&#x2F;li&gt;
&lt;li&gt;http:&#x2F;&#x2F;www.linuxbrigade.com&#x2F;reduce-time_wait-socket-connections&#x2F;&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;serverfault.com&#x2F;a&#x2F;329846&#x2F;94862&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Strace</title>
        <published>2017-08-31T11:25:27+02:00</published>
        <updated>2017-08-31T11:25:27+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/strace/"/>
        <id>https://nbari.com/strace/</id>
        
        <content type="html" xml:base="https://nbari.com/strace/">&lt;p&gt;When using strace, to trace child processes, use option &lt;code&gt;-f&lt;&#x2F;code&gt;, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;strace -f ls
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Webcrypto and Go</title>
        <published>2017-08-17T18:14:57+02:00</published>
        <updated>2017-08-17T18:14:57+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/webcrypto-and-go/"/>
        <id>https://nbari.com/webcrypto-and-go/</id>
        
        <content type="html" xml:base="https://nbari.com/webcrypto-and-go/">&lt;p&gt;Encrypt on client side using javascript
&lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Web_Crypto_API&quot;&gt;WebCrypto&lt;&#x2F;a&gt; and
decrypt on backend using &lt;a href=&quot;https:&#x2F;&#x2F;golang.org&#x2F;&quot;&gt;go&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;javascript code:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async function &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;aesGcmEncrypt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plaintext&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwUtf8 &lt;&#x2F;span&gt;&lt;span&gt;= new TextEncoder().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;encode&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span&gt;);                                 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; encode password as UTF-8
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwHash &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;digest&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;SHA-256&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwUtf8&lt;&#x2F;span&gt;&lt;span&gt;);                      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; hash the password
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iv &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;getRandomValues&lt;&#x2F;span&gt;&lt;span&gt;(new Uint8Array(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span&gt;));                             &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; get 96-bit random iv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg &lt;&#x2F;span&gt;&lt;span&gt;= { name: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;AES-GCM&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, iv: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iv &lt;&#x2F;span&gt;&lt;span&gt;};                                           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; specify algorithm to use
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;importKey&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;raw&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwHash&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;, [&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;encrypt&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; generate key from pw
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ptUint8 &lt;&#x2F;span&gt;&lt;span&gt;= new TextEncoder().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;encode&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plaintext&lt;&#x2F;span&gt;&lt;span&gt;);                               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; encode plaintext as UTF-8
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctBuffer &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;encrypt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ptUint8&lt;&#x2F;span&gt;&lt;span&gt;);                   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; encrypt plaintext using key
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctArray &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;from&lt;&#x2F;span&gt;&lt;span&gt;(new Uint8Array(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctBuffer&lt;&#x2F;span&gt;&lt;span&gt;));                              &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ciphertext as byte array
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctStr &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctArray&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;byte &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;fromCharCode&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;)).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&amp;#39;);             &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ciphertext as string
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctBase64 &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;btoa&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctStr&lt;&#x2F;span&gt;&lt;span&gt;);                                                      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; encode ciphertext as base64
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ivHex &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;from&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iv&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;00&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;toString&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;16&lt;&#x2F;span&gt;&lt;span&gt;)).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;slice&lt;&#x2F;span&gt;&lt;span&gt;(-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&amp;#39;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; iv as hex string
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ivHex&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctBase64&lt;&#x2F;span&gt;&lt;span&gt;;                                                             &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; return iv+ciphertext
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async function &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;aesGcmDecrypt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwUtf8 &lt;&#x2F;span&gt;&lt;span&gt;= new TextEncoder().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;encode&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span&gt;);                                 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; encode password as UTF-8
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwHash &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;digest&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;SHA-256&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwUtf8&lt;&#x2F;span&gt;&lt;span&gt;);                      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; hash the password
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iv &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;slice&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;24&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span&gt;(&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;{2}&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;g&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;byte &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;parseInt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;16&lt;&#x2F;span&gt;&lt;span&gt;));  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; get iv from ciphertext
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg &lt;&#x2F;span&gt;&lt;span&gt;= { name: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;AES-GCM&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, iv: new Uint8Array(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iv&lt;&#x2F;span&gt;&lt;span&gt;) };                           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; specify algorithm to use
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;importKey&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;raw&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwHash&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;, [&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;decrypt&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; use pw to generate key
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctStr &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;atob&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;slice&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;24&lt;&#x2F;span&gt;&lt;span&gt;));                                          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; decode base64 ciphertext
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctUint8 &lt;&#x2F;span&gt;&lt;span&gt;= new Uint8Array(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctStr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span&gt;(&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;g&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ch &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ch&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;charCodeAt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;)));     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ciphertext as Uint8Array
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; note: why doesn&amp;#39;t ctUint8 = new TextEncoder().encode(ctStr) work?
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plainBuffer &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crypto&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subtle&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;decrypt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;alg&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ctUint8&lt;&#x2F;span&gt;&lt;span&gt;);                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; decrypt ciphertext using key
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plaintext &lt;&#x2F;span&gt;&lt;span&gt;= new TextDecoder().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;decode&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plainBuffer&lt;&#x2F;span&gt;&lt;span&gt;);                           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; decode password from UTF-8
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plaintext&lt;&#x2F;span&gt;&lt;span&gt;;                                                                  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; return the plaintext
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Backend code:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;package main
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;import (
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;bytes&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;crypto&#x2F;aes&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;crypto&#x2F;cipher&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;crypto&#x2F;sha256&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;encoding&#x2F;base64&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;encoding&#x2F;hex&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;fmt&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;io&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;log&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;func main() {
&lt;&#x2F;span&gt;&lt;span&gt;	data := &amp;quot;e2f4b56b1961ca12d38031420DVbsv0o5Tux4MUCGG0ZcMUZ7yZHlSWn3DsZJmbg&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	message := bytes.Buffer{}
&lt;&#x2F;span&gt;&lt;span&gt;	iv, err := hex.DecodeString(data[:24])
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		log.Fatal(err)
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	message.Write(iv)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	payload, err := base64.StdEncoding.DecodeString(data[24:])
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		fmt.Println(&amp;quot;decode error:&amp;quot;, err)
&lt;&#x2F;span&gt;&lt;span&gt;		return
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	message.Write(payload)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	h := sha256.New()
&lt;&#x2F;span&gt;&lt;span&gt;	io.WriteString(h, &amp;quot;pw&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;	key := h.Sum(nil)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	out, err := Decrypt(key, message.Bytes())
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		fmt.Println(&amp;quot;decode error:&amp;quot;, err)
&lt;&#x2F;span&gt;&lt;span&gt;		return
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	fmt.Printf(&amp;quot;message: %s\n&amp;quot;, out)
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; Decrypt AES-256 GCM
&lt;&#x2F;span&gt;&lt;span&gt;func Decrypt(password, message []byte) ([]byte, error) {
&lt;&#x2F;span&gt;&lt;span&gt;	c, err := aes.NewCipher(password)
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		return nil, err
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	gcm, err := cipher.NewGCM(c)
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		return nil, err
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	nonce := make([]byte, gcm.NonceSize())
&lt;&#x2F;span&gt;&lt;span&gt;	copy(nonce, message[:gcm.NonceSize()])
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	out, err := gcm.Open(nil, nonce, message[gcm.NonceSize():], nil)
&lt;&#x2F;span&gt;&lt;span&gt;	if err != nil {
&lt;&#x2F;span&gt;&lt;span&gt;		return nil, err
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	return out, nil
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example of web page &lt;code&gt;index.html&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;DOCTYPE &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;meta &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;charset&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;UTF-8&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;meta &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;viewport&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;width=device-width&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;test webcrypto&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;script &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;src&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;common.js&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async&lt;&#x2F;span&gt;&lt;span&gt;() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aesGcmEncrypt&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;my secret text&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;out &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aesGcmDecrypt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext&lt;&#x2F;span&gt;&lt;span&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;            console.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ciphertext&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;out&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        })()
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;check your console.log
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To test create a directory with &lt;code&gt;index.html&lt;&#x2F;code&gt; and &lt;code&gt;common.js&lt;&#x2F;code&gt; and execute command
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nbari&#x2F;www&quot;&gt;www&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Merge Terraform States</title>
        <published>2017-08-13T09:31:49+02:00</published>
        <updated>2017-08-13T09:31:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/merge-terraform-states/"/>
        <id>https://nbari.com/merge-terraform-states/</id>
        
        <content type="html" xml:base="https://nbari.com/merge-terraform-states/">&lt;p&gt;If states are being stored in S3, after importing a resource, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform import aws_customer_gateway.main cgw-b4dc3961
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You will end with a terraform.tfstate that differs from the one in the S3 bucket.&lt;&#x2F;p&gt;
&lt;p&gt;To merge the remote and local state do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform state pull &amp;gt; terraform.tfstate
&lt;&#x2F;span&gt;&lt;span&gt;$ terraform import aws_customer_gateway.main cgw-b4dc3961
&lt;&#x2F;span&gt;&lt;span&gt;$ terraform state push terraform.tfstate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;First get the current s3 state:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform state pull &amp;gt; terraform.tfstate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then import what you need, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform import aws_customer_gateway.main cgw-b4dc3961
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then push back to s3 the state&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ terraform state push terraform.tfstate
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Terraform Full Vpc</title>
        <published>2017-08-12T04:07:54+02:00</published>
        <updated>2017-08-12T04:07:54+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/terraform-full-vpc/"/>
        <id>https://nbari.com/terraform-full-vpc/</id>
        
        <content type="html" xml:base="https://nbari.com/terraform-full-vpc/">&lt;p&gt;Example of a full &lt;a href=&quot;&#x2F;post&#x2F;aws-vpc&#x2F;&quot;&gt;VPC&lt;&#x2F;a&gt; setup using terraform, including VPN and using the default subnet:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;json&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-json &quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpc&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;           &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;enable_dns_hostnames&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;enable_dns_support&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_internet_gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;igw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;internet gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.0.0&#x2F;24&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public A&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-public-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-a.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.1.0&#x2F;24&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public B&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-public-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-b.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.2.0&#x2F;24&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public C&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-public-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-c.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.8.0&#x2F;21&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private A&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-private-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-a.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.16.0&#x2F;21&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private B&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-private-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-b.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_subnet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_block&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.100.24.0&#x2F;21&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;availability_zone&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eu-central-1c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;private C&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;output &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;subnet-private-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-c.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_default_route_table&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;default_route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Public&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;destination_cidr_block&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;gateway_id&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_internet_gateway.igw.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpn_gateway.your-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;destination_cidr_block&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.13.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;gateway_id&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpn_gateway.your-vpn.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_eip&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat-eip&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_internet_gateway.igw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_nat_gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;allocation_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_eip.nat-eip.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-a.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_internet_gateway.igw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_internet_gateway.igw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;NAT&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_route_table.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table.nat&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;destination_cidr_block&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;nat_gateway_id&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_nat_gateway.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_route_table.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table.nat&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpn_gateway.your-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;destination_cidr_block&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.13.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;gateway_id&lt;&#x2F;span&gt;&lt;span&gt;             &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpn_gateway.your-vpn.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-a.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_route_table.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-b.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_route_table.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;nat-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.private-c.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_route_table.nat.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-a.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-b.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_route_table_association&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;public-c&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;subnet_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_subnet.public-c.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;route_table_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.default_route_table_id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpc_dhcp_options&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;domain_name&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;domain_name_servers&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;AmazonProvidedDNS&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;netbios_node_type&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpn_gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn gw&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_customer_gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;bgp_asn&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;65000&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;ip_address&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;26.19.97.10&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ipsec.1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn gateway&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpn_connection&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpn_gateway_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpn_gateway.your-vpn.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;customer_gateway_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_customer_gateway.your-vpn.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ipsec.1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;static_routes_only&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-vpn connection&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_vpn_connection_route&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;office&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;destination_cidr_block&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;10.13.0.0&#x2F;16&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpn_connection_id&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpn_connection.your-vpn.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;resource &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aws_default_security_group&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;default&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; {
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;vpc_id&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${aws_vpc.test.id}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;ingress&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;from_port&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;to_port&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;protocol&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_blocks&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  egress {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;from_port&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;to_port&lt;&#x2F;span&gt;&lt;span&gt;     &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;protocol&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;cidr_blocks&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  tags {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;Name&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;default&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Nginx Reverse Proxy Cache</title>
        <published>2017-08-10T17:51:52+02:00</published>
        <updated>2017-08-10T17:51:52+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/nginx-reverse-proxy-cache/"/>
        <id>https://nbari.com/nginx-reverse-proxy-cache/</id>
        
        <content type="html" xml:base="https://nbari.com/nginx-reverse-proxy-cache/">&lt;p&gt;This is the full configuration for &lt;code&gt;nginx.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;nginx&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-nginx &quot;&gt;&lt;code class=&quot;language-nginx&quot; data-lang=&quot;nginx&quot;&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;user www www;
&lt;&#x2F;span&gt;&lt;span&gt;worker_processes  auto;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;events {
&lt;&#x2F;span&gt;&lt;span&gt;    use kqueue;
&lt;&#x2F;span&gt;&lt;span&gt;    worker_connections  1024;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;http {
&lt;&#x2F;span&gt;&lt;span&gt;    include       mime.types;
&lt;&#x2F;span&gt;&lt;span&gt;    default_type  application&#x2F;octet-stream;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    sendfile on;
&lt;&#x2F;span&gt;&lt;span&gt;    tcp_nopush on;
&lt;&#x2F;span&gt;&lt;span&gt;    tcp_nodelay on;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    client_max_body_size 30M;
&lt;&#x2F;span&gt;&lt;span&gt;    keepalive_timeout    10 10;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip            on;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_static     on;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_vary       on;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_min_length 0;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_comp_level 9;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_buffers    16 8k;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_proxied    any;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_types text&#x2F;plain text&#x2F;css application&#x2F;x-javascript text&#x2F;xml application&#x2F;xml application&#x2F;xml+rss text&#x2F;javascript application&#x2F;json application&#x2F;javascript image&#x2F;svg+xml;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    charset   utf-8;
&lt;&#x2F;span&gt;&lt;span&gt;    server_tokens off;
&lt;&#x2F;span&gt;&lt;span&gt;    server_name_in_redirect off;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    proxy_buffering    on;
&lt;&#x2F;span&gt;&lt;span&gt;    proxy_cache_path   &#x2F;home&#x2F;cache levels=1:2 keys_zone=rubygems:256m max_size=5g inactive=24h use_temp_path=off;
&lt;&#x2F;span&gt;&lt;span&gt;    proxy_buffer_size  8k;
&lt;&#x2F;span&gt;&lt;span&gt;    proxy_buffers      8 24k;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    server {
&lt;&#x2F;span&gt;&lt;span&gt;        listen       80;
&lt;&#x2F;span&gt;&lt;span&gt;        server_name  _;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        location &#x2F; {
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache rubygems;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache_use_stale updating error timeout invalid_header http_500 http_502 http_503 http_504;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache_revalidate on;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache_min_uses 1;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache_lock on;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_cache_valid 200 301 304 2d;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_ignore_headers X-Accel-Expires Expires Cache-Control Set-Cookie;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_redirect off;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_set_header X-Real-IP $remote_addr;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_set_header X-Forwarded-Proto $scheme;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_set_header Host rubygems.org;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_set_header Connection &amp;quot;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_http_version 1.1;
&lt;&#x2F;span&gt;&lt;span&gt;            proxy_pass https:&#x2F;&#x2F;rubygems.org&#x2F;;
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case Nginx is used to cache packages from &lt;a href=&quot;https:&#x2F;&#x2F;rubygems.org&quot;&gt;rubygems.org&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Running Multiple Instances of The Same App In MacOS</title>
        <published>2017-07-30T16:31:35+02:00</published>
        <updated>2017-07-30T16:31:35+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/running-multiple-instances-of-the-same-app-in-macos/"/>
        <id>https://nbari.com/running-multiple-instances-of-the-same-app-in-macos/</id>
        
        <content type="html" xml:base="https://nbari.com/running-multiple-instances-of-the-same-app-in-macos/">&lt;p&gt;Open a terminal and type:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;open -n &#x2F;Applications&#x2F;ApplicationName.app
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change &quot;ApplicationName&quot; with your application, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;open -n &#x2F;Applications&#x2F;PopcornTime.app
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Syslogd 8 bit</title>
        <published>2017-07-23T10:12:23+02:00</published>
        <updated>2017-07-23T10:12:23+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/syslogd-8-bit/"/>
        <id>https://nbari.com/syslogd-8-bit/</id>
        
        <content type="html" xml:base="https://nbari.com/syslogd-8-bit/">&lt;p&gt;If want to log full utf-8 strings &quot;emoji&#x27;s&quot; use the option &lt;code&gt;-8&lt;&#x2F;code&gt;, example on &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;syslogd_flags=&amp;quot;-ssC8&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The optiosn are:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; -s      Operate in secure mode.  Do not log messages from remote
&lt;&#x2F;span&gt;&lt;span&gt;         machines.  If specified twice, no network socket will be opened
&lt;&#x2F;span&gt;&lt;span&gt;         at all, which also disables logging to remote machines.
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt; -C      Create log files that do not exist (permission is set to 0600).
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt; -8      Tells syslogd not to interfere with 8-bit data.  Normally syslogd
&lt;&#x2F;span&gt;&lt;span&gt;         will replace C1 control characters (ISO 8859 and Unicode
&lt;&#x2F;span&gt;&lt;span&gt;         characters) with their “M-x” equivalent.  Note, this option does
&lt;&#x2F;span&gt;&lt;span&gt;         not change the way syslogd alters control characters (see
&lt;&#x2F;span&gt;&lt;span&gt;         iscntrl(3)).  They will always be replaced with their “^x”
&lt;&#x2F;span&gt;&lt;span&gt;         equivalent.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Slave Is Running</title>
        <published>2017-07-19T14:54:35+02:00</published>
        <updated>2017-07-19T14:54:35+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/slave-is-running/"/>
        <id>https://nbari.com/slave-is-running/</id>
        
        <content type="html" xml:base="https://nbari.com/slave-is-running/">&lt;p&gt;Script to check if mysql replica (slave) is running:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SLAVE_IS_RUNNING&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;mysql -e &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;SHOW SLAVE STATUS\G&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; Slave_SQL_Running: &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{print $2}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SLAVE_IS_RUNNING&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; != &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Yes&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# your options here
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;mysql -e &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;STOP SLAVE; SET GLOBAL SQL_SLAVE_SKIP_COUNTER=1; START SLAVE;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The username and password can be stored in a &lt;code&gt;.my.cnf&lt;&#x2F;code&gt; file, for example in &lt;code&gt;&#x2F;root&#x2F;.my.cnf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[client]
&lt;&#x2F;span&gt;&lt;span&gt;user=dbadmin
&lt;&#x2F;span&gt;&lt;span&gt;password=secret
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Curl Response Time</title>
        <published>2017-06-28T18:11:20+02:00</published>
        <updated>2017-06-28T18:11:20+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/curl-response-time/"/>
        <id>https://nbari.com/curl-response-time/</id>
        
        <content type="html" xml:base="https://nbari.com/curl-response-time/">&lt;h1 id=&quot;measure-response-time-with-curl&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#measure-response-time-with-curl&quot; aria-label=&quot;Anchor link for: measure-response-time-with-curl&quot;&gt;🔗&lt;&#x2F;a&gt;Measure response time with curl&lt;&#x2F;h1&gt;
&lt;p&gt;Using the following command:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl -o &#x2F;dev&#x2F;null -s -w %{time_total}  http:&#x2F;&#x2F;www.google.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In your &lt;code&gt;.zshrc&lt;&#x2F;code&gt; this can be used:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;curl_time&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curl -o&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -Ls -w &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;   time_namelookup:  %{time_namelookup}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;      time_connect:  %{time_connect}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;   time_appconnect:  %{time_appconnect}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;  time_pretransfer:  %{time_pretransfer}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;     time_redirect:  %{time_redirect}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;time_starttransfer:  %{time_starttransfer}\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;                   ----------\n &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        time_total:  %{time_total}\n&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Will output something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ curl_time https:&#x2F;&#x2F;google.com
&lt;&#x2F;span&gt;&lt;span&gt;    time_namelookup:  0.014
&lt;&#x2F;span&gt;&lt;span&gt;       time_connect:  0.024
&lt;&#x2F;span&gt;&lt;span&gt;    time_appconnect:  0.072
&lt;&#x2F;span&gt;&lt;span&gt;   time_pretransfer:  0.072
&lt;&#x2F;span&gt;&lt;span&gt;      time_redirect:  0.000
&lt;&#x2F;span&gt;&lt;span&gt; time_starttransfer:  0.084
&lt;&#x2F;span&gt;&lt;span&gt;                    ----------
&lt;&#x2F;span&gt;&lt;span&gt;         time_total:  0.084
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get more datapoints:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ for i in {1..3}; curl -sL -w &amp;quot;%{time_total}\n&amp;quot; -o &#x2F;dev&#x2F;null  https:&#x2F;&#x2F;www.google.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>grpc</title>
        <published>2017-06-23T20:10:58+02:00</published>
        <updated>2017-06-23T20:10:58+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/grpc/"/>
        <id>https://nbari.com/grpc/</id>
        
        <content type="html" xml:base="https://nbari.com/grpc/">&lt;h1 id=&quot;what-is-grpc&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#what-is-grpc&quot; aria-label=&quot;Anchor link for: what-is-grpc&quot;&gt;🔗&lt;&#x2F;a&gt;What is gRPC?&lt;&#x2F;h1&gt;
&lt;p&gt;A remote procedure call
(&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Remote_procedure_call&quot;&gt;RPC&lt;&#x2F;a&gt;)
framework that by default uses
&lt;a href=&quot;https:&#x2F;&#x2F;developers.google.com&#x2F;protocol-buffers&#x2F;docs&#x2F;overview&quot;&gt;protocol buffers&lt;&#x2F;a&gt;
as the Interface Definition Language (IDL). One of the initial benefits is
the ability to be able to define and codify your service requirements via a
&lt;strong&gt;.proto&lt;&#x2F;strong&gt; file.&lt;&#x2F;p&gt;
&lt;p&gt;It uses HTTP&#x2F;2 for transport but &lt;strong&gt;is not yet available for use within the
browser&lt;&#x2F;strong&gt;, therefore currently mainly in use for Inter-Process Communication (IPC)
within microservices.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;the-workflow-to-create-a-grpc-service&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-workflow-to-create-a-grpc-service&quot; aria-label=&quot;Anchor link for: the-workflow-to-create-a-grpc-service&quot;&gt;🔗&lt;&#x2F;a&gt;The workflow to create a gRPC service&lt;&#x2F;h1&gt;
&lt;ol&gt;
&lt;li&gt;Create the service definition and payload structure in the &lt;code&gt;.proto&lt;&#x2F;code&gt; file.&lt;&#x2F;li&gt;
&lt;li&gt;Generate the gRPC code from the &lt;code&gt;.proto&lt;&#x2F;code&gt; file.&lt;&#x2F;li&gt;
&lt;li&gt;Implement the server in one of the supported languages.&lt;&#x2F;li&gt;
&lt;li&gt;Create the client that invokes the service thought the Stub.&lt;&#x2F;li&gt;
&lt;li&gt;Run the server and client(s).&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;proto&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#proto&quot; aria-label=&quot;Anchor link for: proto&quot;&gt;🔗&lt;&#x2F;a&gt;.proto&lt;&#x2F;h3&gt;
&lt;p&gt;The first step when working with protocol buffers is to define the structure for
the data you want to serialize in a proto file: this is an ordinary text file
with a &lt;strong&gt;.proto&lt;&#x2F;strong&gt; extension. Protocol buffer data is structured as messages,
where each message is a small logical record of information containing a series
of name-value pairs called fields. Here’s a simple example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;message Person {
&lt;&#x2F;span&gt;&lt;span&gt;  string name = 1;
&lt;&#x2F;span&gt;&lt;span&gt;  int32 id = 2;
&lt;&#x2F;span&gt;&lt;span&gt;  bool has_ponycopter = 3;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Once you have your service defined, you can utilise a command line compiler to
generate stubs and code in multiple programming languages. So you can generate
a client and server with the Go programming language, and then using the same
&lt;strong&gt;.proto&lt;&#x2F;strong&gt; file generate a client&#x2F;server with Ruby.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;install-grpc&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#install-grpc&quot; aria-label=&quot;Anchor link for: install-grpc&quot;&gt;🔗&lt;&#x2F;a&gt;Install gRPC&lt;&#x2F;h1&gt;
&lt;p&gt;To install this package, you need to install Go and setup your Go workspace on
your computer. The simplest way to install the library is to run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ go get -u google.golang.org&#x2F;grpc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, install the protoc plugin for Go:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ go get -u github.com&#x2F;golang&#x2F;protobuf&#x2F;protoc-gen-go
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;hello-world-service-example&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#hello-world-service-example&quot; aria-label=&quot;Anchor link for: hello-world-service-example&quot;&gt;🔗&lt;&#x2F;a&gt;Hello World service example&lt;&#x2F;h1&gt;
&lt;p&gt;Example of a service definition &lt;code&gt;helloworld.proto&lt;&#x2F;code&gt; using syntatx &lt;a href=&quot;https:&#x2F;&#x2F;developers.google.com&#x2F;protocol-buffers&#x2F;docs&#x2F;proto3#specifying-field-types&quot;&gt;proto3&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;syntax = &amp;quot;proto3&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;package helloworld;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; The greeting service definition.
&lt;&#x2F;span&gt;&lt;span&gt;service Greeter {
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; Sends a greeting
&lt;&#x2F;span&gt;&lt;span&gt;  rpc SayHello (HelloRequest) returns (HelloReply) {}
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; The request message containing the user&amp;#39;s name.
&lt;&#x2F;span&gt;&lt;span&gt;message HelloRequest {
&lt;&#x2F;span&gt;&lt;span&gt;  string name = 1;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; The response message containing the greetings
&lt;&#x2F;span&gt;&lt;span&gt;message HelloReply {
&lt;&#x2F;span&gt;&lt;span&gt;  string message = 1;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The package value is used (conveniently) as the name of the Go package, in this case &quot;helloworld&quot;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The service &lt;code&gt;Greeter&lt;&#x2F;code&gt; exposes a method named &lt;code&gt;SayHello&lt;&#x2F;code&gt; if you would like more
methods you could do something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;&#x2F; The greeting service definition.
&lt;&#x2F;span&gt;&lt;span&gt;service Greeter {
&lt;&#x2F;span&gt;&lt;span&gt;  rpc SayHello (HelloRequest) returns (HelloReply) {}
&lt;&#x2F;span&gt;&lt;span&gt;  rpc SayHelloAgain (HelloRequest) returns (HelloReply) {}
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now service &lt;code&gt;Greeter&lt;&#x2F;code&gt; exposes method &lt;code&gt;SayHello&lt;&#x2F;code&gt; and &lt;code&gt;SayHelloAgain&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;syntax-explanation&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#syntax-explanation&quot; aria-label=&quot;Anchor link for: syntax-explanation&quot;&gt;🔗&lt;&#x2F;a&gt;Syntax Explanation&lt;&#x2F;h2&gt;
&lt;p&gt;Inside the &lt;code&gt;service&lt;&#x2F;code&gt; statement &lt;code&gt;Greeter&lt;&#x2F;code&gt; we state that we want a RPC service
that as a &lt;code&gt;SayHello&lt;&#x2F;code&gt; method and that method accepts something of type
&lt;code&gt;HelloRequest&lt;&#x2F;code&gt; and returns something of type &lt;code&gt;HelloReply&lt;&#x2F;code&gt;. The &lt;code&gt;message&lt;&#x2F;code&gt;
statement defines what &lt;code&gt;HelloRequest&lt;&#x2F;code&gt; and &lt;code&gt;HelloReply&lt;&#x2F;code&gt; look like.&lt;&#x2F;p&gt;
&lt;p&gt;The numbers assigned to the property (e.g. both &lt;code&gt;name = 1&lt;&#x2F;code&gt; and &lt;code&gt;message = 1&lt;&#x2F;code&gt;)
are known as &#x27;tags&#x27;. Effectively, tags with a number between 1 and 15 take one
byte to encode where as tags between 16 and 2047 take two bytes to encode.
The idea is that you should reserve the tags 1 through 15 for very frequently
occurring message elements.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;create-the-code-protoc&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-the-code-protoc&quot; aria-label=&quot;Anchor link for: create-the-code-protoc&quot;&gt;🔗&lt;&#x2F;a&gt;Create the code protoc&lt;&#x2F;h1&gt;
&lt;p&gt;When using go you could keep this per repository in this case the package name
is &lt;code&gt;helloworld&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cd $GOPATH&#x2F;src&#x2F;github.com&#x2F;&amp;lt;your thing&amp;gt;&#x2F;helloworld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;protoc -I helloworld&#x2F; helloworld&#x2F;helloworld.proto --go_out=plugins=grpc:helloworld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will create go code in a file named
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nbari&#x2F;go-sandbox&#x2F;blob&#x2F;master&#x2F;grpc&#x2F;helloworld&#x2F;helloworld.pb.go&quot;&gt;helloworld.pb.go&lt;&#x2F;a&gt;
and can be used to create the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nbari&#x2F;go-sandbox&#x2F;blob&#x2F;master&#x2F;grpc&#x2F;server&#x2F;main.go&quot;&gt;server&lt;&#x2F;a&gt;
and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nbari&#x2F;go-sandbox&#x2F;blob&#x2F;master&#x2F;grpc&#x2F;client&#x2F;main.go&quot;&gt;client&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;when-should-you-use-rest&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#when-should-you-use-rest&quot; aria-label=&quot;Anchor link for: when-should-you-use-rest&quot;&gt;🔗&lt;&#x2F;a&gt;When should you use REST?&lt;&#x2F;h3&gt;
&lt;p&gt;If interoperability is your primary concern, nothing beats REST. There are no
special technologies needed, and you can leverage all of the widely deployed
infrastructure and tools that support the modern Web.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;when-should-you-use-rpc&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#when-should-you-use-rpc&quot; aria-label=&quot;Anchor link for: when-should-you-use-rpc&quot;&gt;🔗&lt;&#x2F;a&gt;When should you use RPC?&lt;&#x2F;h3&gt;
&lt;p&gt;If performance is your primary concern, RPC can provide an edge by leveraging
serialized data formats and alternative transport mechanisms.&lt;&#x2F;p&gt;
&lt;p&gt;{{&lt;youtube XaMr--wAuSI&gt;}}&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>two factor authentication with ssh</title>
        <published>2017-06-03T15:21:40+02:00</published>
        <updated>2017-06-03T15:21:40+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/two-factor-authentication-with-ssh/"/>
        <id>https://nbari.com/two-factor-authentication-with-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/two-factor-authentication-with-ssh/">&lt;h1 id=&quot;two-factor-authentication-2fa-with-ssh&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#two-factor-authentication-2fa-with-ssh&quot; aria-label=&quot;Anchor link for: two-factor-authentication-2fa-with-ssh&quot;&gt;🔗&lt;&#x2F;a&gt;Two-Factor-Authentication &quot;2FA&quot; with SSH&lt;&#x2F;h1&gt;
&lt;p&gt;Install google authenticator and libqrencode:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install pam_google_authenticator
&lt;&#x2F;span&gt;&lt;span&gt;pkg install libqrencode
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;pam.d&#x2F;sshd&lt;&#x2F;code&gt; an add the following line to the &lt;code&gt;auth&lt;&#x2F;code&gt; section:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# auth
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth&lt;&#x2F;span&gt;&lt;span&gt;            sufficient      pam_opie.so             no_warn no_fake_prompts
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth&lt;&#x2F;span&gt;&lt;span&gt;            requisite       pam_opieaccess.so       no_warn allow_local
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#auth           sufficient      pam_krb5.so             no_warn try_first_pass
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#auth           sufficient      pam_ssh.so              no_warn try_first_pass
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#auth           required        pam_unix.so             no_warn try_first_pass
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auth&lt;&#x2F;span&gt;&lt;span&gt;            required        &#x2F;usr&#x2F;local&#x2F;lib&#x2F;pam_google_authenticator.so
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add this to&lt;code&gt;&#x2F;etc&#x2F;ssh&#x2F;sshd_config&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CallengeResponseAuthentication yes
&lt;&#x2F;span&gt;&lt;span&gt;UsePAM yes
&lt;&#x2F;span&gt;&lt;span&gt;AuthenticationMethods publickey,keyboard-interactive
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This setup will do a &quot;publickey + verification code&quot;, without password, in
case you require password edit the &lt;code&gt;&#x2F;etc&#x2F;pam.d&#x2F;sshd&lt;&#x2F;code&gt; and ensure the line
&lt;code&gt;pam_unix.so&lt;&#x2F;code&gt; is uncommented&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;auth           required        pam_unix.so             no_warn try_first_pass
&lt;&#x2F;span&gt;&lt;span&gt;auth           required        &#x2F;usr&#x2F;local&#x2F;lib&#x2F;pam_google_authenticator.so
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;enable-2fa-per-user&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#enable-2fa-per-user&quot; aria-label=&quot;Anchor link for: enable-2fa-per-user&quot;&gt;🔗&lt;&#x2F;a&gt;Enable 2FA per user:&lt;&#x2F;h1&gt;
&lt;p&gt;Execute google-authenticator as the user you want to protect with MFA:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;su - alice -c google-authenticator
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can answer all questions to &lt;strong&gt;Y&lt;&#x2F;strong&gt;, the configuration will be saved in this
file &lt;code&gt;~&#x2F;.google-authenticator&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The content of the file looks like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;gt; cat &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.google_authenticator
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;VLS3WGLC4YTVFSSK
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; TIME_SKEW 0
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; RESETTING_TIME_SKEW
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; RATE_LIMIT 3 30 1496497256
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; WINDOW_SIZE 17
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; DISALLOW_REUSE 49883227
&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; TOTP_AUTH
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;12268625
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;67512245
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;75096563
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;52505947
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;42447122
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If for some reason the user can&#x27;t scan the qrcode due the font issues, use the
code instead, in this example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;VLS3WGLC4YTVFSSK
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pdsh</title>
        <published>2017-06-03T15:05:03+02:00</published>
        <updated>2017-06-03T15:05:03+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pdsh/"/>
        <id>https://nbari.com/pdsh/</id>
        
        <content type="html" xml:base="https://nbari.com/pdsh/">&lt;p&gt;pdsh - issue commands to groups of hosts in parallel&lt;&#x2F;p&gt;
&lt;p&gt;Install:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install pdsh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Usage:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pdsh -R ssh -w ^servers.txt &amp;quot;&amp;lt;command&amp;gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In where &lt;code&gt;servers.txt&lt;&#x2F;code&gt; is something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;10.8.4.2
&lt;&#x2F;span&gt;&lt;span&gt;10.8.4.3
&lt;&#x2F;span&gt;&lt;span&gt;10.8.4.4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;one-liner:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pdsh -b -w &amp;quot;10.8.4.2, 10.8.4.3, 10.8.4.4&amp;quot; &amp;quot;&amp;lt;command&amp;gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-b Disable ctrl-C status feature so that a single ctrl-C kills parallel job. (Batch Mode)&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aws network acl</title>
        <published>2017-05-31T16:41:58+02:00</published>
        <updated>2017-05-31T16:41:58+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-network-acl/"/>
        <id>https://nbari.com/aws-network-acl/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-network-acl/">&lt;h1 id=&quot;aws-network-acl-deny-rule&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#aws-network-acl-deny-rule&quot; aria-label=&quot;Anchor link for: aws-network-acl-deny-rule&quot;&gt;🔗&lt;&#x2F;a&gt;AWS network ACL deny rule&lt;&#x2F;h1&gt;
&lt;p&gt;To block full access from an list of IP&#x27;s within AWS:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; count=0; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt; i &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span&gt; ips.txt`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;((count &lt;&#x2F;span&gt;&lt;span&gt;+ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)) &lt;&#x2F;span&gt;&lt;span&gt;&amp;amp;&amp;amp; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aws&lt;&#x2F;span&gt;&lt;span&gt; ec2 create-network-acl-entry&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --network-acl-id&lt;&#x2F;span&gt;&lt;span&gt; acl-XXXXXXXX&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --ingress --rule-number &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;count --protocol&lt;&#x2F;span&gt;&lt;span&gt; all&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --port-range&lt;&#x2F;span&gt;&lt;span&gt; From=0,To=65535&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --cidr-block &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --rule-action&lt;&#x2F;span&gt;&lt;span&gt; deny
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In where &lt;code&gt;ips.txt&lt;&#x2F;code&gt; is a file containing the IP addresses, for example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;169.254.2.2
&lt;&#x2F;span&gt;&lt;span&gt;169.254.1.2
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;warning&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#warning&quot; aria-label=&quot;Anchor link for: warning&quot;&gt;🔗&lt;&#x2F;a&gt;WARNING&lt;&#x2F;h1&gt;
&lt;p&gt;The default limit for a single network ACL rules set by AWS is 20 for ingress
and 20 for egress rules including the default rules. The network ACL should not
be used as a Firewall, depending on the use case is better to use a CDN, WAF,
vm-firewall, etc.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>haproxy ssh</title>
        <published>2017-05-30T14:47:06+02:00</published>
        <updated>2017-05-30T14:47:06+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/haproxy-ssh/"/>
        <id>https://nbari.com/haproxy-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/haproxy-ssh/">&lt;h1 id=&quot;https-and-ssh-on-the-same-port&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#https-and-ssh-on-the-same-port&quot; aria-label=&quot;Anchor link for: https-and-ssh-on-the-same-port&quot;&gt;🔗&lt;&#x2F;a&gt;HTTPS and SSH on the same port&lt;&#x2F;h1&gt;
&lt;p&gt;Using HAProxy to server SSH and SSL available on the same port:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;haproxy&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-haproxy &quot;&gt;&lt;code class=&quot;language-haproxy&quot; data-lang=&quot;haproxy&quot;&gt;&lt;span&gt;global
&lt;&#x2F;span&gt;&lt;span&gt;    maxconn 1000000
&lt;&#x2F;span&gt;&lt;span&gt;    spread-checks 3
&lt;&#x2F;span&gt;&lt;span&gt;    log &#x2F;var&#x2F;run&#x2F;log local0 notice
&lt;&#x2F;span&gt;&lt;span&gt;    daemon
&lt;&#x2F;span&gt;&lt;span&gt;    tune.ssl.default-dh-param 2048
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;defaults
&lt;&#x2F;span&gt;&lt;span&gt;    mode http
&lt;&#x2F;span&gt;&lt;span&gt;    balance roundrobin
&lt;&#x2F;span&gt;&lt;span&gt;    option http-server-close
&lt;&#x2F;span&gt;&lt;span&gt;    option abortonclose
&lt;&#x2F;span&gt;&lt;span&gt;    option dontlognull
&lt;&#x2F;span&gt;&lt;span&gt;    option redispatch
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    timeout check           3s
&lt;&#x2F;span&gt;&lt;span&gt;    timeout client          30s  # Client and server timeout must match the longest
&lt;&#x2F;span&gt;&lt;span&gt;    timeout connect         5s
&lt;&#x2F;span&gt;&lt;span&gt;    timeout http-keep-alive 5s
&lt;&#x2F;span&gt;&lt;span&gt;    timeout http-request    10s  # A complete request may never take that long.
&lt;&#x2F;span&gt;&lt;span&gt;    timeout queue           1m   # Don&amp;#39;t queue requests too long if saturated.
&lt;&#x2F;span&gt;&lt;span&gt;    timeout server          10s  # Time we may wait for a response from the server.
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    retries 3
&lt;&#x2F;span&gt;&lt;span&gt;    log global
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# ----------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;# stats
&lt;&#x2F;span&gt;&lt;span&gt;# ----------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;listen stats
&lt;&#x2F;span&gt;&lt;span&gt;    bind *:81
&lt;&#x2F;span&gt;&lt;span&gt;    stats enable
&lt;&#x2F;span&gt;&lt;span&gt;    stats uri &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;    stats show-node
&lt;&#x2F;span&gt;&lt;span&gt;    stats show-legends
&lt;&#x2F;span&gt;&lt;span&gt;    stats refresh 5s
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# ------------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;#  https + ssh
&lt;&#x2F;span&gt;&lt;span&gt;# ------------------------------------------------------------------------------
&lt;&#x2F;span&gt;&lt;span&gt;frontend ssl
&lt;&#x2F;span&gt;&lt;span&gt;    mode tcp
&lt;&#x2F;span&gt;&lt;span&gt;    bind *:443 ssl crt &#x2F;usr&#x2F;local&#x2F;etc&#x2F;haproxy&#x2F;your.cert
&lt;&#x2F;span&gt;&lt;span&gt;    option tcplog
&lt;&#x2F;span&gt;&lt;span&gt;    tcp-request inspect-delay 5s
&lt;&#x2F;span&gt;&lt;span&gt;    tcp-request content accept if HTTP
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    # 5353482d322e30 is the binary representation of the string &amp;#39;SSH-2.0&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;    acl client_attempts_ssh payload(0,7) -m bin 5353482d322e30
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    use_backend ssh if !HTTP
&lt;&#x2F;span&gt;&lt;span&gt;    use_backend ssh if client_attempts_ssh
&lt;&#x2F;span&gt;&lt;span&gt;    use_backend http if HTTP
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;backend http
&lt;&#x2F;span&gt;&lt;span&gt;    mode http
&lt;&#x2F;span&gt;&lt;span&gt;    http-request set-header X-Forwarded-Port %[dst_port]
&lt;&#x2F;span&gt;&lt;span&gt;    server www 10.10.8.3:8000 maxconn 50 check
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;backend ssh
&lt;&#x2F;span&gt;&lt;span&gt;    mode tcp
&lt;&#x2F;span&gt;&lt;span&gt;    option tcplog
&lt;&#x2F;span&gt;&lt;span&gt;    server ssh 10.10.8.4:22
&lt;&#x2F;span&gt;&lt;span&gt;    timeout server 2h
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;connecting-from-an-ssh-client&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#connecting-from-an-ssh-client&quot; aria-label=&quot;Anchor link for: connecting-from-an-ssh-client&quot;&gt;🔗&lt;&#x2F;a&gt;Connecting from an SSH client&lt;&#x2F;h1&gt;
&lt;p&gt;To connect throught the HAProxy on port 443 edit the ~&#x2F;.ssh&#x2F;config:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Host&lt;&#x2F;span&gt;&lt;span&gt; ssh-over-https
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ProxyCommand&lt;&#x2F;span&gt;&lt;span&gt; openssl s_client&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -connect&lt;&#x2F;span&gt;&lt;span&gt; your.haproxy.com:443&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -quiet
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;how-does-this-work&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#how-does-this-work&quot; aria-label=&quot;Anchor link for: how-does-this-work&quot;&gt;🔗&lt;&#x2F;a&gt;how does this work ?&lt;&#x2F;h1&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;tools.ietf.org&#x2F;html&#x2F;rfc4253#section-4.2&quot;&gt;RFC 4253&lt;&#x2F;a&gt;, section 4.2
states that clients must send a string that starts with &#x27;SSH-2.0&#x27;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;pre&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-pre &quot;&gt;&lt;code class=&quot;language-pre&quot; data-lang=&quot;pre&quot;&gt;&lt;span&gt;4.2.  Protocol Version Exchange
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;   When the connection has been established, both sides MUST send an
&lt;&#x2F;span&gt;&lt;span&gt;   identification string.  This identification string MUST be
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;      SSH-protoversion-softwareversion SP comments CR LF
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;   Since the protocol being defined in this set of documents is version
&lt;&#x2F;span&gt;&lt;span&gt;   2.0, the &amp;#39;protoversion&amp;#39; MUST be &amp;quot;2.0&amp;quot;.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;5353482d322e30&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;decode&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hex&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;SSH-2.0&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;5353482d322e30&lt;&#x2F;code&gt; is the binary representation of the string &#x27;SSH-2.0&#x27;. So
everything boils down to this line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;acl client_attempts_ssh payload(0,7) -m bin 5353482d322e30
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When a new connection is made on the port 443, HAproxy decrypts the SSL layer,
and checks whether the stream of data sent by the client starts with this string.&lt;&#x2F;p&gt;
&lt;p&gt;src: http:&#x2F;&#x2F;blog.chmd.fr&#x2F;ssh-over-ssl-episode-4-a-haproxy-based-configuration.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aws meta data</title>
        <published>2017-05-30T10:38:36+02:00</published>
        <updated>2017-05-30T10:38:36+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-meta-data/"/>
        <id>https://nbari.com/aws-meta-data/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-meta-data/">&lt;h1 id=&quot;aws-meta-data&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#aws-meta-data&quot; aria-label=&quot;Anchor link for: aws-meta-data&quot;&gt;🔗&lt;&#x2F;a&gt;AWS meta-data&lt;&#x2F;h1&gt;
&lt;p&gt;Instance metadata is data about your instance that you can use to configure or
manage the running instance. Instance metadata is divided into categories. For
more information, see &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AWSEC2&#x2F;latest&#x2F;UserGuide&#x2F;ec2-instance-metadata.html#instancedata-data-categories&quot;&gt;Instance Metadata Categories.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To view all the categories:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To obtain the private IP address:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;local-ipv4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To obtain the public IP address:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;public-ipv4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To obtain the ssh public key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;1.0&#x2F;meta-data&#x2F;public-keys&#x2F;0&#x2F;openssh-key
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To obtain the instance name:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;instance-id
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To obtain the availability-zone:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;placement&#x2F;availability-zone
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;169-254-16&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#169-254-16&quot; aria-label=&quot;Anchor link for: 169-254-16&quot;&gt;🔗&lt;&#x2F;a&gt;169.254&#x2F;16&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Link-local_address&quot;&gt;Link-local address&lt;&#x2F;a&gt;
In a computer network, a link-local address is a network address that is valid
only for communications within the network segment (link) or the broadcast
domain that the host is connected to. Link-local addresses are not guaranteed
to be unique beyond a single network segment. Routers therefore do not forward
packets with link-local addresses. For protocols that have only link-local
addresses, such as Ethernet, hardware addresses assigned by manufacturers in
networking elements are unique, consisting of a vendor identification and a
serial identifier. Link-local addresses for IPv4 are defined in the address
block 169.254.0.0&#x2F;16 in CIDR notation. In IPv6, they are assigned the address
block fe80::&#x2F;64.[1]&lt;&#x2F;p&gt;
&lt;p&gt;See &lt;a href=&quot;https:&#x2F;&#x2F;tools.ietf.org&#x2F;html&#x2F;rfc3927&quot;&gt;Dynamic Configuration of IPv4 Link-Local Addresses&lt;&#x2F;a&gt;
This document describes how a host may automatically configure an interface with
an IPv4 address within the 169.254&#x2F;16 prefix that is valid for communication
with other devices connected to the same physical (or logical) link.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mount nfs</title>
        <published>2017-05-28T20:26:20+02:00</published>
        <updated>2017-05-28T20:26:20+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mount-nfs/"/>
        <id>https://nbari.com/mount-nfs/</id>
        
        <content type="html" xml:base="https://nbari.com/mount-nfs/">&lt;p&gt;To avoid hanging out the system while mounting &lt;code&gt;NFS&lt;&#x2F;code&gt; shares on boot time add the
option &lt;code&gt;bg&lt;&#x2F;code&gt; to the &lt;code&gt;&#x2F;etc&#x2F;fstab&lt;&#x2F;code&gt;, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;192.168.1.2:&#x2F;4T &#x2F;plex&#x2F;4T        nfs     rw,bg      0       0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will help to boot and in background continue trying to mount in case of getting a &quot;time out&quot;&lt;&#x2F;p&gt;
&lt;p&gt;From the man page: &lt;code&gt;mount_nfs&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;bg      If an initial attempt to contact the server fails, fork
&lt;&#x2F;span&gt;&lt;span&gt;        off a child to keep trying the mount in the background.
&lt;&#x2F;span&gt;&lt;span&gt;        Useful for fstab(5), where the file system mount is not
&lt;&#x2F;span&gt;&lt;span&gt;        critical to multiuser operation.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aax2m4b</title>
        <published>2017-05-20T18:53:19+02:00</published>
        <updated>2017-05-20T18:53:19+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aax2m4b/"/>
        <id>https://nbari.com/aax2m4b/</id>
        
        <content type="html" xml:base="https://nbari.com/aax2m4b/">&lt;p&gt;Convert an audiobook &lt;code&gt;.aax&lt;&#x2F;code&gt; to &lt;code&gt;.m4b&lt;&#x2F;code&gt; using ffmpeg&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span&gt; install chromedriver ffmpeg
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; easy_install pip
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install selenium requests
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; clone https:&#x2F;&#x2F;github.com&#x2F;inAudible-NG&#x2F;audible-activator
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; audible-activator
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sed -i &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&amp;#39; &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;s,chromedriver_path = &amp;quot;.&#x2F;chromedriver&amp;quot;,chromedriver_path = &amp;quot;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;chromedriver&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; audible-activator.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;audible-activator.py
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When running &lt;code&gt;audible-activator.py&lt;&#x2F;code&gt; It will ask for the audible
username&#x2F;password it will open chrome, and when finish print the activation
bytes:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; .&#x2F;audible-activator.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Username:&lt;&#x2F;span&gt;&lt;span&gt; your@email
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Password:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;[*]&lt;&#x2F;span&gt;&lt;span&gt; Player ID is 1xmjyl5rSw0yVb&#x2F;olWBYuU&#x2F;NBxk=
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;activation_bytes:&lt;&#x2F;span&gt;&lt;span&gt; b97f4709
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;One having the activation_bytes, use ffmpeg:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ffmpeg -activation_bytes b97f4709 -i input.aax -vn -c:a copy output.m4a;mv output.m4{a,b}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info: https:&#x2F;&#x2F;apple.stackexchange.com&#x2F;a&#x2F;243670&#x2F;104123&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>tmux ssh</title>
        <published>2017-05-19T22:03:43+02:00</published>
        <updated>2017-05-19T22:03:43+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/tmux-ssh/"/>
        <id>https://nbari.com/tmux-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/tmux-ssh/">&lt;h1 id=&quot;tmux-multiple-ssh-connections-with-synchronized-panels&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tmux-multiple-ssh-connections-with-synchronized-panels&quot; aria-label=&quot;Anchor link for: tmux-multiple-ssh-connections-with-synchronized-panels&quot;&gt;🔗&lt;&#x2F;a&gt;Tmux multiple ssh connections with synchronized panels&lt;&#x2F;h1&gt;
&lt;p&gt;If need to debug&#x2F;check in real-time multiple servers via ssh, this can be used.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;tmux-script&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tmux-script&quot; aria-label=&quot;Anchor link for: tmux-script&quot;&gt;🔗&lt;&#x2F;a&gt;tmux script&lt;&#x2F;h1&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;tmux-ssh&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SSH_USER&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;devops&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;read&lt;&#x2F;span&gt;&lt;span&gt; line
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;== 0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tmux&lt;&#x2F;span&gt;&lt;span&gt; new-window&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a -n &lt;&#x2F;span&gt;&lt;span&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span&gt;} &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ssh -l &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SSH_USER&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;} &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;line&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tmux&lt;&#x2F;span&gt;&lt;span&gt; split-window&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ssh -l &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SSH_USER&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;} &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;line&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;amp;&amp;amp; \
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tmux&lt;&#x2F;span&gt;&lt;span&gt; select-layout&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; tiled
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span&gt; i++
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;:-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;dev&#x2F;stdin}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tmux&lt;&#x2F;span&gt;&lt;span&gt; set-window-option&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t &lt;&#x2F;span&gt;&lt;span&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span&gt;} synchronize-panes on
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;hosts&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#hosts&quot; aria-label=&quot;Anchor link for: hosts&quot;&gt;🔗&lt;&#x2F;a&gt;hosts&lt;&#x2F;h3&gt;
&lt;p&gt;If the input is json, &lt;a href=&quot;https:&#x2F;&#x2F;stedolan.github.io&#x2F;jq&#x2F;&quot;&gt;jq&lt;&#x2F;a&gt; can be used to
extract hosts, assuming your output is similar to:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;json&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-json &quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;  &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;serverA&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hosts&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.20.23.24&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.20.12.37&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.50.10.21&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.50.13.20&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    ]
&lt;&#x2F;span&gt;&lt;span&gt;  },
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;serverB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hosts&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.20.23.116&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.50.10.39&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    ]
&lt;&#x2F;span&gt;&lt;span&gt;  },
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;serverC&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hosts&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: [
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.20.8.9&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;127.50.16.130&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    ]
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get only the hosts and ssh into them you could do something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cat hosts | jq &amp;quot;.serverA.hosts[]&amp;quot; -r | tmux-ssh.sh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>beanstalkd</title>
        <published>2017-05-18T20:14:57+02:00</published>
        <updated>2017-05-18T20:14:57+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/beanstalkd/"/>
        <id>https://nbari.com/beanstalkd/</id>
        
        <content type="html" xml:base="https://nbari.com/beanstalkd/">&lt;h1 id=&quot;beanstalkd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#beanstalkd&quot; aria-label=&quot;Anchor link for: beanstalkd&quot;&gt;🔗&lt;&#x2F;a&gt;Beanstalkd&lt;&#x2F;h1&gt;
&lt;p&gt;Beanstalkd is a big to-do list for your distributed application. If there
is a unit of work that you want to defer to later (say, sending an email,
pushing some data to a slow external service, pulling data from a slow external
service, generating high-quality image thumbnails) you put a description of that
work, a “job”, into beanstalkd. Some processes (such as web request handlers),
“producers”, put jobs into the queue. Other processes, “workers”, take jobs out
of the queue and run them. https:&#x2F;&#x2F;github.com&#x2F;kr&#x2F;beanstalkd&#x2F;wiki&#x2F;FAQ&lt;&#x2F;p&gt;
&lt;h3 id=&quot;high-availability&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#high-availability&quot; aria-label=&quot;Anchor link for: high-availability&quot;&gt;🔗&lt;&#x2F;a&gt;High availability&lt;&#x2F;h3&gt;
&lt;p&gt;Put the instances behind a load balancer, &lt;a href=&quot;http:&#x2F;&#x2F;www.haproxy.org&#x2F;&quot;&gt;HAProxy&lt;&#x2F;a&gt; and
run beanstalk with option &lt;code&gt;-b&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;beanstalkd -b &#x2F;home&#x2F;beanstalkd&#x2F;queue
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&#x2F;home&#x2F;beanstalkd&#x2F;queue needs to be an existing directory&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The option &lt;code&gt;-b&lt;&#x2F;code&gt; will write all jobs to a binlog, if the power goes out, you can
restart beasntalkd with the same option and it will recover the contents of the
log.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;immortalizing-beanstalkd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#immortalizing-beanstalkd&quot; aria-label=&quot;Anchor link for: immortalizing-beanstalkd&quot;&gt;🔗&lt;&#x2F;a&gt;immortalizing beanstalkd&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cmd&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;beanstalkd -V -b &#x2F;home&#x2F;beanstalkd&#x2F;queue
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;file&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;var&#x2F;log&#x2F;beanstalkd.log
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;age&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;86400
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;num&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;7
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;port-11300&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#port-11300&quot; aria-label=&quot;Anchor link for: port-11300&quot;&gt;🔗&lt;&#x2F;a&gt;port 11300&lt;&#x2F;h3&gt;
&lt;p&gt;Beanstalkd by default listen on port 11300&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql db size</title>
        <published>2017-05-07T16:13:29+02:00</published>
        <updated>2017-05-07T16:13:29+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-db-size/"/>
        <id>https://nbari.com/mysql-db-size/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-db-size/">&lt;p&gt;How big is your data:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT&lt;&#x2F;span&gt;&lt;span&gt; IFNULL(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;engine&lt;&#x2F;span&gt;&lt;span&gt;,&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Total&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Storage Engine&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;CONCAT(LPAD(REPLACE(FORMAT(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;DSize&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;POWER(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024&lt;&#x2F;span&gt;&lt;span&gt;,pw),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,&amp;#39;&amp;#39;),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;17&lt;&#x2F;span&gt;&lt;span&gt;,&amp;#39; &amp;#39;),&amp;#39; &amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;SUBSTR(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; KMGTP&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,pw+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Data Size&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, CONCAT(LPAD(REPLACE(
&lt;&#x2F;span&gt;&lt;span&gt;FORMAT(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;ISize&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;POWER(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024&lt;&#x2F;span&gt;&lt;span&gt;,pw),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,&amp;#39;&amp;#39;),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;17&lt;&#x2F;span&gt;&lt;span&gt;,&amp;#39; &amp;#39;),&amp;#39; &amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;SUBSTR(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; KMGTP&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,pw+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Index Size&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, CONCAT(LPAD(REPLACE(
&lt;&#x2F;span&gt;&lt;span&gt;FORMAT(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;TSize&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;POWER(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024&lt;&#x2F;span&gt;&lt;span&gt;,pw),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,&amp;#39;&amp;#39;),&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;17&lt;&#x2F;span&gt;&lt;span&gt;,&amp;#39; &amp;#39;),&amp;#39; &amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;SUBSTR(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; KMGTP&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,pw+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;),&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Table Size&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM
&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT&lt;&#x2F;span&gt;&lt;span&gt; engine,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;SUM&lt;&#x2F;span&gt;&lt;span&gt;(data_length) DSize,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;SUM&lt;&#x2F;span&gt;&lt;span&gt;(index_length) ISize,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;SUM&lt;&#x2F;span&gt;&lt;span&gt;(data_length+index_length) TSize &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;information_schema&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;tables &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WHERE&lt;&#x2F;span&gt;&lt;span&gt; table_schema NOT IN
&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mysql&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;information_schema&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;performance_schema&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) AND
&lt;&#x2F;span&gt;&lt;span&gt;engine IS NOT &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;NULL &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;GROUP BY&lt;&#x2F;span&gt;&lt;span&gt; engine &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WITH&lt;&#x2F;span&gt;&lt;span&gt; ROLLUP) B,
&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt; pw) A &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ORDER BY&lt;&#x2F;span&gt;&lt;span&gt; TSize;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will print something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;----------------+----------------------+----------------------+----------------------+
&lt;&#x2F;span&gt;&lt;span&gt;| Storage Engine | Data Size            | Index Size           | Table Size           |
&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;----------------+----------------------+----------------------+----------------------+
&lt;&#x2F;span&gt;&lt;span&gt;| InnoDB         |            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;412&lt;&#x2F;span&gt;&lt;span&gt; GB |             &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;917&lt;&#x2F;span&gt;&lt;span&gt; GB |            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;13&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;330&lt;&#x2F;span&gt;&lt;span&gt; GB |
&lt;&#x2F;span&gt;&lt;span&gt;| Total          |            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;412&lt;&#x2F;span&gt;&lt;span&gt; GB |             &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;917&lt;&#x2F;span&gt;&lt;span&gt; GB |            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;13&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;330&lt;&#x2F;span&gt;&lt;span&gt; GB |
&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;----------------+----------------------+----------------------+----------------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt; rows in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;06&lt;&#x2F;span&gt;&lt;span&gt; sec)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get size of databases:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT&lt;&#x2F;span&gt;&lt;span&gt; table_schema                                        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;DB Name&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;   Round(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;Sum&lt;&#x2F;span&gt;&lt;span&gt;(data_length + index_length) &#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024 &lt;&#x2F;span&gt;&lt;span&gt;&#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;) &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;DB Size in MB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;information_schema&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;tables
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;GROUP  BY&lt;&#x2F;span&gt;&lt;span&gt; table_schema;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get usage and free size available:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;SELECT&lt;&#x2F;span&gt;&lt;span&gt; table_schema &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Data Base Name&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;( data_length + index_length ) &#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024 &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024 &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Data Base Size in MB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;( data_free )&#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024 &lt;&#x2F;span&gt;&lt;span&gt;&#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1024 &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Free Space in MB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;information_schema&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;TABLES
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;GROUP BY&lt;&#x2F;span&gt;&lt;span&gt; table_schema;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>raw2vmdk</title>
        <published>2017-04-30T21:43:24+02:00</published>
        <updated>2017-04-30T21:43:24+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/raw2vmdk/"/>
        <id>https://nbari.com/raw2vmdk/</id>
        
        <content type="html" xml:base="https://nbari.com/raw2vmdk/">&lt;h1 id=&quot;convert-raw-image-to-vmdk&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#convert-raw-image-to-vmdk&quot; aria-label=&quot;Anchor link for: convert-raw-image-to-vmdk&quot;&gt;🔗&lt;&#x2F;a&gt;Convert raw image to vmdk&lt;&#x2F;h1&gt;
&lt;p&gt;Install qemu:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ brew install qemu
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Convert using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ qemu-img convert -f raw -O vmdk disk.raw disk.vmdk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>brew update formula</title>
        <published>2017-04-30T12:40:49+02:00</published>
        <updated>2017-04-30T12:40:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/brew-update-formula/"/>
        <id>https://nbari.com/brew-update-formula/</id>
        
        <content type="html" xml:base="https://nbari.com/brew-update-formula/">&lt;p&gt;Example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; brew bump-formula-pr --strict --url https:&#x2F;&#x2F;github.com&#x2F;immortal&#x2F;immortal&#x2F;archive&#x2F;0.24.2.tar.gz immortal
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;it will need an API GIT token: export HOMEBREW_GITHUB_API_TOKEN=XXXXX&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To keep in sync forked repo:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;git fetch upstream
&lt;&#x2F;span&gt;&lt;span&gt;git co upstream&#x2F;master
&lt;&#x2F;span&gt;&lt;span&gt;git push -f origin master
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>bastion ssh</title>
        <published>2017-04-28T11:57:07+02:00</published>
        <updated>2017-04-28T11:57:07+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bastion-ssh/"/>
        <id>https://nbari.com/bastion-ssh/</id>
        
        <content type="html" xml:base="https://nbari.com/bastion-ssh/">&lt;h1 id=&quot;proxyjump&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#proxyjump&quot; aria-label=&quot;Anchor link for: proxyjump&quot;&gt;🔗&lt;&#x2F;a&gt;ProxyJump&lt;&#x2F;h1&gt;
&lt;p&gt;This is the easiest (new) way:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Host 10.*
&lt;&#x2F;span&gt;&lt;span&gt;    ProxyJump user@bastion.tld:2222
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;using-proxycommand&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#using-proxycommand&quot; aria-label=&quot;Anchor link for: using-proxycommand&quot;&gt;🔗&lt;&#x2F;a&gt;Using ProxyCommand&lt;&#x2F;h2&gt;
&lt;p&gt;Replace &lt;code&gt;your.bastion.tld&lt;&#x2F;code&gt; with your bastion server and set your bastion
username in the &lt;code&gt;ProxyCommand&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Host bastion
&lt;&#x2F;span&gt;&lt;span&gt;  Hostname your.bastion.tld
&lt;&#x2F;span&gt;&lt;span&gt;  ForwardAgent yes
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;Host 10.10.*
&lt;&#x2F;span&gt;&lt;span&gt;  ProxyCommand ssh &amp;lt;your-username&amp;gt;@bastion -W %h:%p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;example&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#example&quot; aria-label=&quot;Anchor link for: example&quot;&gt;🔗&lt;&#x2F;a&gt;example&lt;&#x2F;h2&gt;
&lt;p&gt;To login with user devops to server 10.10.3.4:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -l devops 10.10.3.4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh devops@10.10.3.4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;ssh-sockets&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ssh-sockets&quot; aria-label=&quot;Anchor link for: ssh-sockets&quot;&gt;🔗&lt;&#x2F;a&gt;SSH sockets&lt;&#x2F;h1&gt;
&lt;p&gt;To speed up more when using the bastion host things this can be added at the  top of the &lt;code&gt;~&#x2F;.ssh&#x2F;config&lt;&#x2F;code&gt; file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;  ControlPath ~&#x2F;.ssh&#x2F;sockets&#x2F;%r@%h:%p
&lt;&#x2F;span&gt;&lt;span&gt;  ControlMaster auto
&lt;&#x2F;span&gt;&lt;span&gt;  ControlPersist 10m
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;You need to create the sockets dir: &lt;code&gt;mkdir ~&#x2F;.ssh&#x2F;sockets&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Or you could add it per bastion configuration:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Host bastion
&lt;&#x2F;span&gt;&lt;span&gt;  Hostname your.bastion.tld
&lt;&#x2F;span&gt;&lt;span&gt;  ForwardAgent yes
&lt;&#x2F;span&gt;&lt;span&gt;  ControlPath ~&#x2F;.ssh&#x2F;sockets&#x2F;%r@%h:%p
&lt;&#x2F;span&gt;&lt;span&gt;  ControlMaster auto
&lt;&#x2F;span&gt;&lt;span&gt;  ControlPersist 10m
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;ControlPath&lt;&#x2F;code&gt; entry specifies where to store the “control socket” for the multiplexed connections. In this case, %r refers to the remote login name, %h refers to the target host name, and %p refers to the destination port.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;ControlMaster&lt;&#x2F;code&gt; setting is what activates multiplexing. With the auto setting, SSH will try to use a master connection if one exists, but if one doesn’t exist it will create a new one&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;ControlPersist&lt;&#x2F;code&gt; setting keeps the master connection alive for the specified period of time after it has remained idle (no connections). After that time, the master connection will be closed. In this example, we’ve specified that the master connection should remain open for 10 minutes after becoming idle. Subsequent SSH sessions made while the master connection is open will leverage the master connection and will reset the idle timer.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;check-the-status-of-multiplexing&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#check-the-status-of-multiplexing&quot; aria-label=&quot;Anchor link for: check-the-status-of-multiplexing&quot;&gt;🔗&lt;&#x2F;a&gt;Check the status of multiplexing&lt;&#x2F;h1&gt;
&lt;p&gt;Use the &lt;code&gt;-O &amp;lt;option&amp;gt;&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -O check user@host.tld
&lt;&#x2F;span&gt;&lt;span&gt;Master running (pid=32015)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To stop multiplexed connections:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -O stop user@host.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To exit and remove the control socket besides terminating all existing connections:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -O exit user@host.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>smarthost</title>
        <published>2017-04-26T10:38:23+02:00</published>
        <updated>2017-04-26T10:38:23+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/smarthost/"/>
        <id>https://nbari.com/smarthost/</id>
        
        <content type="html" xml:base="https://nbari.com/smarthost/">&lt;h1 id=&quot;smarthost-with-postfix&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#smarthost-with-postfix&quot; aria-label=&quot;Anchor link for: smarthost-with-postfix&quot;&gt;🔗&lt;&#x2F;a&gt;Smarthost with postfix&lt;&#x2F;h1&gt;
&lt;blockquote&gt;
&lt;p&gt;A smart host is a type of email message transfer agent that allows a Simple
Mail Transfer Protocol (SMTP) server to route email to an intermediate
mailserver rather than directly to the recipient&#x27;s server&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Smart_host&lt;&#x2F;p&gt;
&lt;p&gt;Setup postfix to forward all emails using an external SMTP server, for example
sendgrid.net, &lt;code&gt;main.cf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;smtp_sasl_auth_enable = yes
&lt;&#x2F;span&gt;&lt;span&gt;smtp_sasl_password_maps = static:username:password
&lt;&#x2F;span&gt;&lt;span&gt;smtp_sasl_security_options = noanonymous
&lt;&#x2F;span&gt;&lt;span&gt;smtp_tls_security_level = encrypt
&lt;&#x2F;span&gt;&lt;span&gt;header_size_limit = 4096000
&lt;&#x2F;span&gt;&lt;span&gt;relayhost = [smtp.sendgrid.net]:587
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Within a VPC or private network you can open relay to all your class:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mynetworks_style = class
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Some tunings:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;smtp_connect_timeout = 5
&lt;&#x2F;span&gt;&lt;span&gt;smtp_helo_timeout = 5
&lt;&#x2F;span&gt;&lt;span&gt;disable_dns_lookups = yes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To check list of queued mail:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;postqueue -p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mtr</title>
        <published>2017-04-25T17:52:37+02:00</published>
        <updated>2017-04-25T17:52:37+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mtr/"/>
        <id>https://nbari.com/mtr/</id>
        
        <content type="html" xml:base="https://nbari.com/mtr/">&lt;h1 id=&quot;mtr-to-create-a-text-file-report&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mtr-to-create-a-text-file-report&quot; aria-label=&quot;Anchor link for: mtr-to-create-a-text-file-report&quot;&gt;🔗&lt;&#x2F;a&gt;mtr to create a text file report&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo mtr --report --report-cycles 10 immortal.run &amp;gt; &#x2F;tmp&#x2F;immortal-mtr.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example of output:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Start:&lt;&#x2F;span&gt;&lt;span&gt; Tue Apr 25 17:58:11 2017
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HOST:&lt;&#x2F;span&gt;&lt;span&gt; M20160001.local             Loss%   Snt   Last   Avg  Best  Wrst StDev
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 10.19.15.254               0.0%    10   41.7  41.2  25.1  81.6  16.8
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 10.19.0.1                  0.0%    10    0.5   0.5   0.4   0.6   0.0
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 23.189.27.97               0.0%    10    1.2   8.5   1.0  74.4  23.2
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 89.27.149.117             80.0%    10    1.3  18.4   1.3  35.4  24.1
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 62.214.33.237              0.0%    10    7.0   2.3   1.1   7.0   2.2
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 62.214.37.118              0.0%    10    5.1   3.5   1.5  12.8   3.6
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;7.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; cloudflare.bcix.de         0.0%    10    1.8   2.5   1.6   8.4   2.0
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8.&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span&gt; 104.18.53.220              0.0%    10    1.9   2.1   1.6   3.6   0.3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;mtr on specific port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mtr -w -c 100 -b -T -P 587 smtp.server.tld &amp;gt; smtp-mtr.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;-w -c 100 -b -T&lt;&#x2F;code&gt; runs a verbose report 100x, logging both IPs &amp;amp; Hostnames,
for a good dataset. This also runs the queries through TCP, to avoid ICMP
de-prioritization.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql backup</title>
        <published>2017-04-11T10:28:49+02:00</published>
        <updated>2017-04-11T10:28:49+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-backup/"/>
        <id>https://nbari.com/mysql-backup/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-backup/">&lt;h1 id=&quot;mysqldump-xz-openssl&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mysqldump-xz-openssl&quot; aria-label=&quot;Anchor link for: mysqldump-xz-openssl&quot;&gt;🔗&lt;&#x2F;a&gt;mysqldump + xz + openssl&lt;&#x2F;h1&gt;
&lt;p&gt;First add to &lt;code&gt;.my.cnf&lt;&#x2F;code&gt; the proper username&#x2F;password to avoid getting a warning:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;[client]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;host&lt;&#x2F;span&gt;&lt;span&gt; = localhost
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;user&lt;&#x2F;span&gt;&lt;span&gt; = dbadmin
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span&gt; = secret
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To take the dump and keep it only for 31 days:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DAY&lt;&#x2F;span&gt;&lt;span&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;date&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; +&lt;&#x2F;span&gt;&lt;span&gt;%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;d&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mysqldump --events --routines --triggers --add-drop-database --compress --hex-blob --opt --skip-comments --single-transaction&lt;&#x2F;span&gt;&lt;span&gt; dbname | \
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xz -c &lt;&#x2F;span&gt;&lt;span&gt;| \
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;openssl&lt;&#x2F;span&gt;&lt;span&gt; smime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -encrypt -aes256 -binary -out&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;safe&#x2F;path&#x2F;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DAY&lt;&#x2F;span&gt;&lt;span&gt;}.sql.xz.enc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -outform&lt;&#x2F;span&gt;&lt;span&gt; DER &#x2F;path&#x2F;to&#x2F;cert.pem
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;mysqldump&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mysqldump&quot; aria-label=&quot;Anchor link for: mysqldump&quot;&gt;🔗&lt;&#x2F;a&gt;mysqldump&lt;&#x2F;h2&gt;
&lt;p&gt;The options used:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mysqldump --events --routines --triggers --add-drop-database --compress --hex-blob --opt --skip-comments --single-transaction --databases&lt;&#x2F;span&gt;&lt;span&gt; dbname
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;The --databases option will add the CREATE DATABASE&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Example multiple databases:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mysqldump --events --routines --triggers &lt;&#x2F;span&gt;&lt;span&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--add-drop-database --compress --hex-blob &lt;&#x2F;span&gt;&lt;span&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--opt --skip-comments --single-transaction &lt;&#x2F;span&gt;&lt;span&gt;\
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;--databases&lt;&#x2F;span&gt;&lt;span&gt; dbname dbname2 dbname3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;xz&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#xz&quot; aria-label=&quot;Anchor link for: xz&quot;&gt;🔗&lt;&#x2F;a&gt;xz&lt;&#x2F;h2&gt;
&lt;p&gt;Compress the output:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;xz -c
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-c is to write to stdout&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;openssl-encrypt&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#openssl-encrypt&quot; aria-label=&quot;Anchor link for: openssl-encrypt&quot;&gt;🔗&lt;&#x2F;a&gt;openssl (encrypt)&lt;&#x2F;h2&gt;
&lt;p&gt;Encrypt the backup using asymmetric encryption (key pairs):&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;openssl&lt;&#x2F;span&gt;&lt;span&gt; smime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -encrypt -aes256 -stream -binary -out&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;safe&#x2F;path&#x2F;${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DAY&lt;&#x2F;span&gt;&lt;span&gt;}.sql.xz.enc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -outform&lt;&#x2F;span&gt;&lt;span&gt; DER &#x2F;path&#x2F;to&#x2F;cert.pem
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Notice the -stream option, it helps to encrypt files bigger than 1.5 GB, and ouput is piped: xz -c |&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;How to create a pair of keys using openssl:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; openssl req&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -x509 -newkey&lt;&#x2F;span&gt;&lt;span&gt; rsa:4096&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -sha256 -nodes -keyout&lt;&#x2F;span&gt;&lt;span&gt; example.key&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -out&lt;&#x2F;span&gt;&lt;span&gt; example.pem&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -subj &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;CN=example.com&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -days&lt;&#x2F;span&gt;&lt;span&gt; 3650
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;To add password to the key remove the &lt;code&gt;-nodes&lt;&#x2F;code&gt; (No DES encryption) options. https:&#x2F;&#x2F;security.stackexchange.com&#x2F;a&#x2F;106530&#x2F;54143&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;decrypt&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#decrypt&quot; aria-label=&quot;Anchor link for: decrypt&quot;&gt;🔗&lt;&#x2F;a&gt;Decrypt&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;openssl&lt;&#x2F;span&gt;&lt;span&gt; smime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -decrypt -in&lt;&#x2F;span&gt;&lt;span&gt; database.sql.xz.enc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -binary -inform&lt;&#x2F;span&gt;&lt;span&gt; DEM&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -inkey&lt;&#x2F;span&gt;&lt;span&gt; example.key&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -out&lt;&#x2F;span&gt;&lt;span&gt; database.sql.xz
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;un-compress&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#un-compress&quot; aria-label=&quot;Anchor link for: un-compress&quot;&gt;🔗&lt;&#x2F;a&gt;Un-compress&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xz -d&lt;&#x2F;span&gt;&lt;span&gt; database.sql.xz
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql root password</title>
        <published>2017-04-10T15:37:08+02:00</published>
        <updated>2017-04-10T15:37:08+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-root-password/"/>
        <id>https://nbari.com/mysql-root-password/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-root-password/">&lt;h1 id=&quot;reset-root-password-on-mysql-5-7-17&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#reset-root-password-on-mysql-5-7-17&quot; aria-label=&quot;Anchor link for: reset-root-password-on-mysql-5-7-17&quot;&gt;🔗&lt;&#x2F;a&gt;Reset root password on mysql &amp;gt;= 5.7.17&lt;&#x2F;h1&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql_args=&amp;quot;--skip-grant-tables --skip-networking&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Restart mysql:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;service mysql-server restart
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Login like root:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; UPDATE mysql.user SET authentication_string = PASSWORD(&amp;#39;aaaa&amp;#39;) WHERE User = &amp;#39;root&amp;#39; AND Host = &amp;#39;localhost&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; FLUSH PRIVILEGES;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; quit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Remove or comment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# mysql_args=&amp;quot;--skip-grant-tables --skip-networking&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Restart mysql:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;service mysql-server restart
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;mysqldump-couldn-t-execute-show-variables-like-gtid-mode&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mysqldump-couldn-t-execute-show-variables-like-gtid-mode&quot; aria-label=&quot;Anchor link for: mysqldump-couldn-t-execute-show-variables-like-gtid-mode&quot;&gt;🔗&lt;&#x2F;a&gt;mysqldump: Couldn&#x27;t execute &#x27;SHOW VARIABLES LIKE &#x27;gtid_mode&#x27;&#x27;:&lt;&#x2F;h1&gt;
&lt;p&gt;To fix that try this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# mysql_upgrade -u root -p --force
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>dsymutil golang</title>
        <published>2017-04-04T14:02:14+02:00</published>
        <updated>2017-04-04T14:02:14+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/dsymutil-golang/"/>
        <id>https://nbari.com/dsymutil-golang/</id>
        
        <content type="html" xml:base="https://nbari.com/dsymutil-golang/">&lt;p&gt;Go executables broken in macOS 10.12.X&lt;&#x2F;p&gt;
&lt;p&gt;When compiling and executing this may happen:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zsh: killed .&#x2F;main
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Temporary fix:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ln -s &#x2F;usr&#x2F;bin&#x2F;true &#x2F;usr&#x2F;local&#x2F;bin&#x2F;dsymutil
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>pkgin</title>
        <published>2017-03-30T01:00:29+02:00</published>
        <updated>2017-03-30T01:00:29+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/pkgin/"/>
        <id>https://nbari.com/pkgin/</id>
        
        <content type="html" xml:base="https://nbari.com/pkgin/">&lt;p&gt;To install pkgin in NetBSD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# export PKG_PATH=&amp;quot;http:&#x2F;&#x2F;ftp.netbsd.org&#x2F;pub&#x2F;pkgsrc&#x2F;packages&#x2F;NetBSD&#x2F;amd64&#x2F;7.0.1&#x2F;All&#x2F;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# pkg_add -v pkgin-*
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finish by updating:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# pkgin update
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Diffie Hellman</title>
        <published>2017-03-25T19:51:28+01:00</published>
        <updated>2017-03-25T19:51:28+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/diffie-hellman/"/>
        <id>https://nbari.com/diffie-hellman/</id>
        
        <content type="html" xml:base="https://nbari.com/diffie-hellman/">&lt;p&gt;{{&amp;lt; youtube YEBfamv-_do&amp;gt;}}&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>sqlite2file</title>
        <published>2017-03-23T14:43:09+01:00</published>
        <updated>2017-03-23T14:43:09+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/sqlite2file/"/>
        <id>https://nbari.com/sqlite2file/</id>
        
        <content type="html" xml:base="https://nbari.com/sqlite2file/">&lt;p&gt;Sqlite query to a file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sqlite&amp;gt; .mode ascii
&lt;&#x2F;span&gt;&lt;span&gt;sqlite&amp;gt; .output data.txt
&lt;&#x2F;span&gt;&lt;span&gt;sqlite&amp;gt; .select * from table;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or dump to a file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sqlite3 db.sqlite .dump  &amp;gt; dump
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>text2json</title>
        <published>2017-03-23T12:22:05+01:00</published>
        <updated>2017-03-23T12:22:05+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/text2json/"/>
        <id>https://nbari.com/text2json/</id>
        
        <content type="html" xml:base="https://nbari.com/text2json/">&lt;p&gt;Convert txt to json:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; $ jq &amp;#39;.&amp;#39; -R -s file
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ echo textfile | jq &amp;#39;.&amp;#39; -R -s
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>routing flags</title>
        <published>2017-03-21T15:27:09+01:00</published>
        <updated>2017-03-21T15:27:09+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/routing-flags/"/>
        <id>https://nbari.com/routing-flags/</id>
        
        <content type="html" xml:base="https://nbari.com/routing-flags/">&lt;p&gt;From netstat(1) man page:&lt;&#x2F;p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Letter&lt;&#x2F;th&gt;&lt;th&gt;Flag&lt;&#x2F;th&gt;&lt;th&gt;Meaning&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;1&lt;&#x2F;td&gt;&lt;td&gt;RTF_PROTO1&lt;&#x2F;td&gt;&lt;td&gt;Protocol specific routing flag #1&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;2&lt;&#x2F;td&gt;&lt;td&gt;RTF_PROTO2&lt;&#x2F;td&gt;&lt;td&gt;Protocol specific routing flag #2&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;3&lt;&#x2F;td&gt;&lt;td&gt;RTF_PROTO3&lt;&#x2F;td&gt;&lt;td&gt;Protocol specific routing flag #3&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;B&lt;&#x2F;td&gt;&lt;td&gt;RTF_BLACKHOLE&lt;&#x2F;td&gt;&lt;td&gt;Just discard packets (during updates)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;b&lt;&#x2F;td&gt;&lt;td&gt;RTF_BROADCAST&lt;&#x2F;td&gt;&lt;td&gt;The route represents a broadcast address&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;C&lt;&#x2F;td&gt;&lt;td&gt;RTF_CLONING&lt;&#x2F;td&gt;&lt;td&gt;Generate new routes on use&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;c&lt;&#x2F;td&gt;&lt;td&gt;RTF_PRCLONING&lt;&#x2F;td&gt;&lt;td&gt;Protocol-specified generate new routes on use&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;D&lt;&#x2F;td&gt;&lt;td&gt;RTF_DYNAMIC&lt;&#x2F;td&gt;&lt;td&gt;Created dynamically (by redirect)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;G&lt;&#x2F;td&gt;&lt;td&gt;RTF_GATEWAY&lt;&#x2F;td&gt;&lt;td&gt;Destination requires forwarding by intermediary&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;H&lt;&#x2F;td&gt;&lt;td&gt;RTF_HOST&lt;&#x2F;td&gt;&lt;td&gt;Host entry (net otherwise)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;I&lt;&#x2F;td&gt;&lt;td&gt;RTF_IFSCOPE&lt;&#x2F;td&gt;&lt;td&gt;Route is associated with an interface scope&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;i&lt;&#x2F;td&gt;&lt;td&gt;RTF_IFREF&lt;&#x2F;td&gt;&lt;td&gt;Route is holding a reference to the interface&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;L&lt;&#x2F;td&gt;&lt;td&gt;RTF_LLINFO&lt;&#x2F;td&gt;&lt;td&gt;Valid protocol to link address translation&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;M&lt;&#x2F;td&gt;&lt;td&gt;RTF_MODIFIED&lt;&#x2F;td&gt;&lt;td&gt;Modified dynamically (by redirect)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;m&lt;&#x2F;td&gt;&lt;td&gt;RTF_MULTICAST&lt;&#x2F;td&gt;&lt;td&gt;The route represents a multicast address&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;R&lt;&#x2F;td&gt;&lt;td&gt;RTF_REJECT&lt;&#x2F;td&gt;&lt;td&gt;Host or net unreachable&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;r&lt;&#x2F;td&gt;&lt;td&gt;RTF_ROUTER&lt;&#x2F;td&gt;&lt;td&gt;Host is a default router&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;S&lt;&#x2F;td&gt;&lt;td&gt;RTF_STATIC&lt;&#x2F;td&gt;&lt;td&gt;Manually added&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;U&lt;&#x2F;td&gt;&lt;td&gt;RTF_UP&lt;&#x2F;td&gt;&lt;td&gt;Route usable&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;W&lt;&#x2F;td&gt;&lt;td&gt;RTF_WASCLONED&lt;&#x2F;td&gt;&lt;td&gt;Route was generated as a result of cloning&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;X&lt;&#x2F;td&gt;&lt;td&gt;RTF_XRESOLVE&lt;&#x2F;td&gt;&lt;td&gt;External daemon translates proto to link address&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;Y&lt;&#x2F;td&gt;&lt;td&gt;RTF_PROXY&lt;&#x2F;td&gt;&lt;td&gt;Proxying; cloned routes will not be scoped&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;p&gt;To find current gateway when using a VPN:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; netstat -rna -f inet | grep UGHS | awk &amp;#39;{print $1}&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>nil pointer</title>
        <published>2017-03-17T17:03:36+01:00</published>
        <updated>2017-03-17T17:03:36+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/nil-pointer/"/>
        <id>https://nbari.com/nil-pointer/</id>
        
        <content type="html" xml:base="https://nbari.com/nil-pointer/">&lt;p&gt;To check that &lt;code&gt;x&lt;&#x2F;code&gt; implements &lt;code&gt;y&lt;&#x2F;code&gt;, example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;package &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;main
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fmt&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;io&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;var &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_ io&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ReadCloser &lt;&#x2F;span&gt;&lt;span&gt;= (*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;File&lt;&#x2F;span&gt;&lt;span&gt;)(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fmt&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Println&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Hello, playground&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;play.golang.org&#x2F;p&#x2F;hoi5_GQEpD&lt;&#x2F;p&gt;
&lt;p&gt;To check that &lt;code&gt;os.File&lt;&#x2F;code&gt; is an &lt;code&gt;io.ReadCloser&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;var _ io.ReadCloser = (*os.File)(nil)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;package &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;main
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fmt&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;io&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;var &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_ io&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ReadCloser &lt;&#x2F;span&gt;&lt;span&gt;= (*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Process&lt;&#x2F;span&gt;&lt;span&gt;)(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fmt&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Println&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Hello, playground&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;play.golang.org&#x2F;p&#x2F;7uHmjn3ggT&lt;&#x2F;p&gt;
&lt;p&gt;The error in this case would be:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;main.go:9: cannot use (*os.Process)(nil) (type *os.Process) as type io.ReadCloser in assignment:
&lt;&#x2F;span&gt;&lt;span&gt;*os.Process does not implement io.ReadCloser (missing Close method)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh ed25519</title>
        <published>2017-03-08T21:00:46+01:00</published>
        <updated>2017-03-08T21:00:46+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-ed25519/"/>
        <id>https://nbari.com/ssh-ed25519/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-ed25519/">&lt;p&gt;Generate your new ssh &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;EdDSA&quot;&gt;ed25519&lt;&#x2F;a&gt; key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh-keygen -o -a 1000 -t ed25519
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>urandom</title>
        <published>2017-03-08T15:04:59+01:00</published>
        <updated>2017-03-08T15:04:59+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/urandom/"/>
        <id>https://nbari.com/urandom/</id>
        
        <content type="html" xml:base="https://nbari.com/urandom/">&lt;h1 id=&quot;dev-urandom&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#dev-urandom&quot; aria-label=&quot;Anchor link for: dev-urandom&quot;&gt;🔗&lt;&#x2F;a&gt;&#x2F;dev&#x2F;urandom&lt;&#x2F;h1&gt;
&lt;p&gt;To generate a random string&#x2F;password of 32 chars using &lt;code&gt;&#x2F;dev&#x2F;urandom&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ base64 &#x2F;dev&#x2F;urandom | head -c 32
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>bitwise chmod</title>
        <published>2017-03-02T16:37:44+01:00</published>
        <updated>2017-03-02T16:37:44+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/bitwise-chmod/"/>
        <id>https://nbari.com/bitwise-chmod/</id>
        
        <content type="html" xml:base="https://nbari.com/bitwise-chmod/">&lt;h1 id=&quot;111-111-111&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#111-111-111&quot; aria-label=&quot;Anchor link for: 111-111-111&quot;&gt;🔗&lt;&#x2F;a&gt;111 111 111&lt;&#x2F;h1&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;&#x2F;th&gt;&lt;th&gt;&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;octal&lt;&#x2F;td&gt;&lt;td&gt;777&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;decimal&lt;&#x2F;td&gt;&lt;td&gt;511&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;binary&lt;&#x2F;td&gt;&lt;td&gt;111 111 111&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;perm&lt;&#x2F;td&gt;&lt;td&gt;rwx rwx rwx&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;4 = r
&lt;&#x2F;span&gt;&lt;span&gt;2 = w
&lt;&#x2F;span&gt;&lt;span&gt;1 = x
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;rwx = 4+2+1 = 7
&lt;&#x2F;span&gt;&lt;span&gt;rw  = 4+2+0 = 6
&lt;&#x2F;span&gt;&lt;span&gt;r   = 4+0+0 = 4
&lt;&#x2F;span&gt;&lt;span&gt;r x = 4+0+1 = 5
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;7 = binary 111 = rwx
&lt;&#x2F;span&gt;&lt;span&gt;6 = binary 110 = rw-
&lt;&#x2F;span&gt;&lt;span&gt;5 = binary 101 = r-x
&lt;&#x2F;span&gt;&lt;span&gt;4 = binary 100 = r--
&lt;&#x2F;span&gt;&lt;span&gt;3 = binary 011 = -wx
&lt;&#x2F;span&gt;&lt;span&gt;2 = binary 010 = -w-
&lt;&#x2F;span&gt;&lt;span&gt;1 = binary 001 = --x
&lt;&#x2F;span&gt;&lt;span&gt;0 = binary 000 = ---
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The full set of nine permission characters can then be grouped and summarized as three octal digits:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;rwxr-x-wx  is  rwx|r-x|-wx  is 111|101|011 ==&amp;gt; the three digits 753
&lt;&#x2F;span&gt;&lt;span&gt;---r----x  is  ---|r--|--x  is 000|100|001 ==&amp;gt; the three digits 041
&lt;&#x2F;span&gt;&lt;span&gt;---------  is  ---|---|---  is 000|000|000 ==&amp;gt; the three digits 000
&lt;&#x2F;span&gt;&lt;span&gt;rwxrwxrwx  is  rwx|rwx|rwx  is 111|111|111 ==&amp;gt; the three digits 777
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Convert octal to decimal using python:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; int(&amp;#39;777&amp;#39;, 8)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Decimal to binary:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; &amp;quot;{0:b}&amp;quot;.format(511)
&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;111111111&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Bitwise AND with 07777 gives the last twelve bits of a number’s binary
representation. With a Unix mode, this operation gives the permission or mode
bits and discards any type information.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ perl -e &amp;#39;printf &amp;quot;%d\n&amp;quot;, (stat &amp;quot;foo&amp;quot;)[2] &amp;amp; 07777&amp;#39;  # decimal, not useful
&lt;&#x2F;span&gt;&lt;span&gt;420
&lt;&#x2F;span&gt;&lt;span&gt;$ perl -e &amp;#39;printf &amp;quot;%o\n&amp;quot;, (stat &amp;quot;foo&amp;quot;)[2] &amp;amp; 07777&amp;#39;  # octal
&lt;&#x2F;span&gt;&lt;span&gt;644
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>add subtitles</title>
        <published>2017-02-20T20:49:14+01:00</published>
        <updated>2017-02-20T20:49:14+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/add-subtitles/"/>
        <id>https://nbari.com/add-subtitles/</id>
        
        <content type="html" xml:base="https://nbari.com/add-subtitles/">&lt;h1 id=&quot;add-subtitles-to-a-mkv-file&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#add-subtitles-to-a-mkv-file&quot; aria-label=&quot;Anchor link for: add-subtitles-to-a-mkv-file&quot;&gt;🔗&lt;&#x2F;a&gt;Add subtitles to a mkv file:&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ffmpeg -i input.mkv -f srt -i input.srt  -map 0:0 -map 0:1 -map 1:0 -c:v copy -c:a copy -c:s srt  output.mkv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>rds slave from external master</title>
        <published>2017-02-10T13:47:24+01:00</published>
        <updated>2017-02-10T13:47:24+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rds-slave-from-external-master/"/>
        <id>https://nbari.com/rds-slave-from-external-master/</id>
        
        <content type="html" xml:base="https://nbari.com/rds-slave-from-external-master/">&lt;h2 id=&quot;setup-aws-mysql-rds-instance-as-slave-of-an-external-master&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#setup-aws-mysql-rds-instance-as-slave-of-an-external-master&quot; aria-label=&quot;Anchor link for: setup-aws-mysql-rds-instance-as-slave-of-an-external-master&quot;&gt;🔗&lt;&#x2F;a&gt;Setup AWS MySQL RDS instance as slave of an external master&lt;&#x2F;h2&gt;
&lt;p&gt;Configure external mysql to become master:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server-id=1
&lt;&#x2F;span&gt;&lt;span&gt;binlog-format= mixed
&lt;&#x2F;span&gt;&lt;span&gt;log-bin=mysql-bin
&lt;&#x2F;span&gt;&lt;span&gt;binlog-do-db=databasename
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Setup the master replica user:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; create user `replica`@`%` identified by &amp;#39;PASSWORD&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; grant replication slave on *.* to &amp;#39;replica&amp;#39;@&amp;#39;%&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Use the following command to ensure that nothing can write to the master
database during a database dump. Also note the filename and position of the
binary log because you will need these values to complete the replication
configuration:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; FLUSH TABLES WITH READ LOCK;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; show master status;
&lt;&#x2F;span&gt;&lt;span&gt;+-------------------+-----------+--------------+--------------------------------------------------+
&lt;&#x2F;span&gt;&lt;span&gt;| File              | Position  | Binlog_Do_DB | Binlog_Ignore_DB                                 |
&lt;&#x2F;span&gt;&lt;span&gt;+-------------------+-----------+--------------+--------------------------------------------------+
&lt;&#x2F;span&gt;&lt;span&gt;| mysqld-bin.000205 | 207450664 | epazote      | test,information_schema,performance_schema,mysql |
&lt;&#x2F;span&gt;&lt;span&gt;+-------------------+-----------+--------------+--------------------------------------------------+
&lt;&#x2F;span&gt;&lt;span&gt;1 row in set (0.00 sec)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If this is a replica do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; show slave status\G
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And look for:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Master_Log_File: mysql-bin-changelog.023713
&lt;&#x2F;span&gt;&lt;span&gt;Read_Master_Log_Pos: 1934704
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Within AWS RDS you can also do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_stop_replication;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; show slave status\G
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Take a dump:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysqldump -h host.tld --user=&amp;#39;user&amp;#39; --password=&amp;#39;secret&amp;#39; --add-drop-database --compress --hex-blob --opt --skip-comments --skip-lock-tables --single-transaction db_name &amp;gt; out.sql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;to dump all databases use &lt;code&gt;--all-databases&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To get the the log position this can be used:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;--master-data=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysqldump -h host.tld --master-data=1 --compress --hex-blob --opt --skip-comments --skip-lock-tables --single-transaction db_name -u user -p &amp;gt; out.sql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, lift the read lock from the master:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; UNLOCK TABLES;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or within AWS use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_start_replication;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;If you get a Last_IO_Error: Got fatal error 1236..., if you can afford it, don&#x27;t unlock&#x2F;start the replication after having the dump&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Load the dump:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql --compress -h host.tld -u user database &amp;lt; out.sql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;--compress seems to improve the speed&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;After loading a full dump to RDS, Call the stored procedure &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonRDS&#x2F;latest&#x2F;UserGuide&#x2F;mysql_rds_set_external_master.html&quot;&gt;mysql.rds_set_external_master&lt;&#x2F;a&gt; like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_set_external_master (&amp;#39;servername&amp;#39;, port, &amp;#39;user&amp;#39;, &amp;#39;password&amp;#39;, &amp;#39;binlog-file&amp;#39;, binlog-offset, 0);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_set_external_master (&amp;#39;10.10.3.2&amp;#39;, 3306, &amp;#39;replica&amp;#39;, &amp;#39;password&amp;#39;, &amp;#39;mysql-bin-changelog.122&amp;#39;, 108433, 0);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then start the replication by doing:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_start_replication;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check if slave is running:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; show slave status;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;promote-rds-to-master&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#promote-rds-to-master&quot; aria-label=&quot;Anchor link for: promote-rds-to-master&quot;&gt;🔗&lt;&#x2F;a&gt;Promote RDS to master&lt;&#x2F;h2&gt;
&lt;p&gt;This will promote the slave to become master:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_stop_replication;
&lt;&#x2F;span&gt;&lt;span&gt;mysql&amp;gt; call mysql.rds_reset_external_master;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;mysql-rds-set-configuration&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mysql-rds-set-configuration&quot; aria-label=&quot;Anchor link for: mysql-rds-set-configuration&quot;&gt;🔗&lt;&#x2F;a&gt;mysql.rds_set_configuration&lt;&#x2F;h2&gt;
&lt;p&gt;In Amazon RDS, The default value of binlog retention hours is NULL (do not
retain binary logs), to keep logs for 7 days use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;call mysql.rds_set_configuration(&amp;#39;binlog retention hours&amp;#39;, 168);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This could help to prevent getting the error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Got fatal error 1236 from master when reading data from binary log: &amp;#39;Could not find first log file name in binary log index file&amp;#39;, Error_code: 1236
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>haproxy</title>
        <published>2017-02-09T13:53:50+01:00</published>
        <updated>2017-02-09T13:53:50+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/haproxy/"/>
        <id>https://nbari.com/haproxy/</id>
        
        <content type="html" xml:base="https://nbari.com/haproxy/">&lt;h1 id=&quot;haproxy-http-auth-ip-src&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#haproxy-http-auth-ip-src&quot; aria-label=&quot;Anchor link for: haproxy-http-auth-ip-src&quot;&gt;🔗&lt;&#x2F;a&gt;HAproxy + HTTP auth + IP SRC&lt;&#x2F;h1&gt;
&lt;p&gt;Use HTTP Auth when source IP is not from an allowed source:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;text&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-text &quot;&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;userlist TestUsers
&lt;&#x2F;span&gt;&lt;span&gt;    user guest insecure-password secret
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;backend test-node
&lt;&#x2F;span&gt;&lt;span&gt;    acl network_allowed src 10.0.0.1 192.30.252.0&#x2F;22
&lt;&#x2F;span&gt;&lt;span&gt;    acl AuthOK http_auth(TempUsers)
&lt;&#x2F;span&gt;&lt;span&gt;    http-request auth realm Test if !network_allowed !AuthOK
&lt;&#x2F;span&gt;&lt;span&gt;    server test test.server.tld:80 maxconn 50 check
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To only allow specific range, for example only GitHub:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; acl network_allowed src 192.30.252.0&#x2F;22 185.199.108.0&#x2F;22
&lt;&#x2F;span&gt;&lt;span&gt; http-request deny if !network_allowed
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;haproxy-mysql&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#haproxy-mysql&quot; aria-label=&quot;Anchor link for: haproxy-mysql&quot;&gt;🔗&lt;&#x2F;a&gt;HAproxy + mysql&lt;&#x2F;h1&gt;
&lt;p&gt;First setup mysql by creating a HAproxy to do the checks:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;USE mysql;
&lt;&#x2F;span&gt;&lt;span&gt;INSERT INTO user (Host,User) values(&amp;#39;%&amp;#39;, &amp;#39;haproxy&amp;#39;);
&lt;&#x2F;span&gt;&lt;span&gt;FLUSH PRIVILEGES;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In case you are here because you ran out of connections you can do:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; FLUSH HOSTS;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then you can use something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;text&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-text &quot;&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;backend rds-mysql
&lt;&#x2F;span&gt;&lt;span&gt;    mode tcp
&lt;&#x2F;span&gt;&lt;span&gt;    balance leastconn
&lt;&#x2F;span&gt;&lt;span&gt;    option tcpka
&lt;&#x2F;span&gt;&lt;span&gt;    option mysql-check user haproxy
&lt;&#x2F;span&gt;&lt;span&gt;    server rds mysql.eu-central-1.rds.amazonaws.com:3306 check
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;https:&#x2F;&#x2F;www.haproxy.com&#x2F;doc&#x2F;aloha&#x2F;7.0&#x2F;haproxy&#x2F;healthchecks.html#checking-a-mysql-service&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh proxy</title>
        <published>2017-02-07T11:54:20+01:00</published>
        <updated>2017-02-07T11:54:20+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-proxy/"/>
        <id>https://nbari.com/ssh-proxy/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-proxy/">&lt;h1 id=&quot;ssh-socks5-proxy&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ssh-socks5-proxy&quot; aria-label=&quot;Anchor link for: ssh-socks5-proxy&quot;&gt;🔗&lt;&#x2F;a&gt;SSH SOCKS5 proxy&lt;&#x2F;h1&gt;
&lt;p&gt;Route web traffic securely without a VPN using a SOCKS tunnel with ssh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -D 8080 -f -C -q -N user@remote.host
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;-D 8080 tells ssh to launch a SOCKS server on port 8080 locally.&lt;&#x2F;li&gt;
&lt;li&gt;-f Forks the process to the background.&lt;&#x2F;li&gt;
&lt;li&gt;-C Compresses the data before sending it.&lt;&#x2F;li&gt;
&lt;li&gt;-q  Uses quiet mode.&lt;&#x2F;li&gt;
&lt;li&gt;-N Tells SSH that no command will be sent once the tunnel is up.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;configure-firefox&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configure-firefox&quot; aria-label=&quot;Anchor link for: configure-firefox&quot;&gt;🔗&lt;&#x2F;a&gt;Configure firefox&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;ssh-proxy.png&quot; alt=&quot;ssh-proxy&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;curl&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#curl&quot; aria-label=&quot;Anchor link for: curl&quot;&gt;🔗&lt;&#x2F;a&gt;curl&lt;&#x2F;h2&gt;
&lt;p&gt;To use socks5 in curl try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl -x socks5h:&#x2F;&#x2F;localhost:8080 http:&#x2F;&#x2F;myip.country
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;ssh-tunnel-tcp-forwarding&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ssh-tunnel-tcp-forwarding&quot; aria-label=&quot;Anchor link for: ssh-tunnel-tcp-forwarding&quot;&gt;🔗&lt;&#x2F;a&gt;SSH tunnel &#x2F; TCP forwarding&lt;&#x2F;h1&gt;
&lt;p&gt;If you only need to access an open port on the remote server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -L 8080:localhost:1234 -Nf user@your-remote-server.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The option &lt;code&gt;-L&lt;&#x2F;code&gt; will do a local port forwarding from port &lt;code&gt;8080&lt;&#x2F;code&gt; (your computer)
to port &lt;code&gt;1234&lt;&#x2F;code&gt; in &lt;code&gt;localhost&lt;&#x2F;code&gt; (the remote server), then in your browser just enter:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;    http:&#x2F;&#x2F;localhost:8080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If this is a web server you will see hopefully the content, but you could also
use this technique for a database, for example&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ssh -L 3307:localhost:3306 user@your-remote-server.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will forward port 3307 (your computer) to &lt;code&gt;3306&lt;&#x2F;code&gt; remotely (mysql server)&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mysql -h localhost -P 3307
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You can read&#x2F;remember this as &lt;code&gt;-L&lt;&#x2F;code&gt; forward my local port &lt;code&gt;XXXX&lt;&#x2F;code&gt; to &lt;code&gt;remote address (localhost&#x2F;google.com&#x2F;any-server.tld&lt;&#x2F;code&gt; at port &lt;code&gt;YYYY&lt;&#x2F;code&gt; through
&lt;code&gt;user@remote-server.com&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;manage-your-pfsense&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#manage-your-pfsense&quot; aria-label=&quot;Anchor link for: manage-your-pfsense&quot;&gt;🔗&lt;&#x2F;a&gt;Manage your pfsense&lt;&#x2F;h1&gt;
&lt;p&gt;If you could could ssh to a server within your infrastructure you could do then:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh -L 8443:192.168.1.1:443 -Nf &amp;lt;user&amp;gt;@host
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then in your browser:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;https:&#x2F;&#x2F;localhost:8443
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;provide-internet-to-a-server-behind-a-firewall&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#provide-internet-to-a-server-behind-a-firewall&quot; aria-label=&quot;Anchor link for: provide-internet-to-a-server-behind-a-firewall&quot;&gt;🔗&lt;&#x2F;a&gt;Provide internet to a server behind a firewall&lt;&#x2F;h1&gt;
&lt;p&gt;Enable ssh on your desktop&#x2F;laptop (from where you are connecting) and then run
(it will ask your local ssh password and then the remotes ssh password):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ssh -t -D 1080 localhost ssh -R 1080:localhost:1080 user@10.0.0.8
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;check that in the remote host has &lt;code&gt;AllowTcpForwarding yes&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Then you could use socks5 from the remote server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl --socks5-hostname 127.0.0.1:1080 http:&#x2F;&#x2F;myip.country
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;curl -x socks5h:&#x2F;&#x2F;127.0.0.1:1080 http:&#x2F;&#x2F;myip.country
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then to use it:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export http_proxy=socks5h:&#x2F;&#x2F;127.0.0.1:1080
&lt;&#x2F;span&gt;&lt;span&gt;export https_proxy=socks5h:&#x2F;&#x2F;127.0.0.1:1080
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If need to install  &lt;code&gt;pipenv&lt;&#x2F;code&gt; you may need &lt;code&gt;privoxy&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;yum install privoxy
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit the configuration file &lt;code&gt;&#x2F;etc&#x2F;privoxy&#x2F;config&lt;&#x2F;code&gt; and add this line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;forward-socks5 &#x2F; 127.0.0.1:1080 .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Start the service and then you could use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;export http_proxy=http:&#x2F;&#x2F;127.0.0.1:8118
&lt;&#x2F;span&gt;&lt;span&gt;export https_proxy=http:&#x2F;&#x2F;127.0.0.1:8118
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>HSTS</title>
        <published>2017-02-06T15:01:22+01:00</published>
        <updated>2017-02-06T15:01:22+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/hsts/"/>
        <id>https://nbari.com/hsts/</id>
        
        <content type="html" xml:base="https://nbari.com/hsts/">&lt;h1 id=&quot;http-will-change-to-https&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#http-will-change-to-https&quot; aria-label=&quot;Anchor link for: http-will-change-to-https&quot;&gt;🔗&lt;&#x2F;a&gt;http:&#x2F;&#x2F;... will change to https:&#x2F;&#x2F;...&lt;&#x2F;h1&gt;
&lt;p&gt;If you own a site that you would like to see included in the preloaded HSTS list
you can submit it at https:&#x2F;&#x2F;hstspreload.appspot.com.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;verify-http-strict-transport-security-hsts-header-with-curl&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#verify-http-strict-transport-security-hsts-header-with-curl&quot; aria-label=&quot;Anchor link for: verify-http-strict-transport-security-hsts-header-with-curl&quot;&gt;🔗&lt;&#x2F;a&gt;verify HTTP Strict Transport Security (HSTS) header with curl&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ curl -Is https:&#x2F;&#x2F;google.com | grep -i stric
&lt;&#x2F;span&gt;&lt;span&gt;Strict-Transport-Security: max-age=15552000; includeSubDomains
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;remove-domain-from-chrome&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#remove-domain-from-chrome&quot; aria-label=&quot;Anchor link for: remove-domain-from-chrome&quot;&gt;🔗&lt;&#x2F;a&gt;Remove domain from chrome&lt;&#x2F;h2&gt;
&lt;p&gt;Search for the domain in: &lt;a href=&quot;chrome:&#x2F;&#x2F;net-internals&#x2F;#hsts&quot;&gt;chrome:&#x2F;&#x2F;net-internals&#x2F;#hsts&lt;&#x2F;a&gt;
and delete it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;http-strict-transport-security&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#http-strict-transport-security&quot; aria-label=&quot;Anchor link for: http-strict-transport-security&quot;&gt;🔗&lt;&#x2F;a&gt;HTTP Strict Transport Security&lt;&#x2F;h2&gt;
&lt;p&gt;The issue that HSTS addresses is that users tend to type http:&#x2F;&#x2F; at best, and
omit the scheme entirely most of the time. In the latter case, browsers will
insert http:&#x2F;&#x2F; for them.&lt;&#x2F;p&gt;
&lt;p&gt;However, HTTP is insecure. An attacker can grab that connection, manipulate
it and only the most eagle eyed users might notice that it redirected to
https:&#x2F;&#x2F;www.bank0famerica.com or some such. From then on, the user is under the
control of the attacker, who can intercept passwords etc at will.&lt;&#x2F;p&gt;
&lt;p&gt;An HSTS enabled server can include the following header in an HTTPS reply:&lt;&#x2F;p&gt;
&lt;p&gt;Strict-Transport-Security: max-age=16070400; includeSubDomains&lt;&#x2F;p&gt;
&lt;p&gt;When the browser sees this, it will remember, for the given number of seconds,
that the current domain should only be contacted over HTTPS. In the future, if
the user types http:&#x2F;&#x2F; or omits the scheme, HTTPS is the default. In fact, all
requests for URLs in the current domain will be redirected to HTTPS. (So you
have to make sure that you can serve them all!).&lt;&#x2F;p&gt;
&lt;p&gt;More info: https:&#x2F;&#x2F;www.chromium.org&#x2F;hsts&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh escape sequences</title>
        <published>2017-02-05T17:57:39+01:00</published>
        <updated>2017-02-05T17:57:39+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-escape-sequences/"/>
        <id>https://nbari.com/ssh-escape-sequences/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-escape-sequences/">&lt;p&gt;While using ssh your connection may become idle or unresponsive in any case
instead of waiting you can simple terminate the connection by sending a escape
sequence:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;~.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;ssh-escape-sequences&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ssh-escape-sequences&quot; aria-label=&quot;Anchor link for: ssh-escape-sequences&quot;&gt;🔗&lt;&#x2F;a&gt;SSH escape sequences&lt;&#x2F;h1&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;sequence&lt;&#x2F;th&gt;&lt;th&gt;description&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;~.&lt;&#x2F;td&gt;&lt;td&gt;terminate connection (and any multiplexed sessions)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~B&lt;&#x2F;td&gt;&lt;td&gt;send a BREAK to the remote system&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~C&lt;&#x2F;td&gt;&lt;td&gt;open a command line&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~R&lt;&#x2F;td&gt;&lt;td&gt;request rekey&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~V&#x2F;v&lt;&#x2F;td&gt;&lt;td&gt;decrease&#x2F;increase verbosity (LogLevel)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~^Z&lt;&#x2F;td&gt;&lt;td&gt;suspend ssh&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~#&lt;&#x2F;td&gt;&lt;td&gt;list forwarded connections&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~&amp;amp;&lt;&#x2F;td&gt;&lt;td&gt;background ssh (when waiting for connections to terminate)&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~?&lt;&#x2F;td&gt;&lt;td&gt;this message&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;~~&lt;&#x2F;td&gt;&lt;td&gt;send the escape character by typing it twice&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>perfomance checklist</title>
        <published>2017-01-24T15:12:56+01:00</published>
        <updated>2017-01-24T15:12:56+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/perfomance-checklist/"/>
        <id>https://nbari.com/perfomance-checklist/</id>
        
        <content type="html" xml:base="https://nbari.com/perfomance-checklist/">&lt;h1 id=&quot;perfomance-checklist-for-sre-s&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#perfomance-checklist-for-sre-s&quot; aria-label=&quot;Anchor link for: perfomance-checklist-for-sre-s&quot;&gt;🔗&lt;&#x2F;a&gt;Perfomance checklist for SRE&#x27;s&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;linux-perf-analysis-in-60s&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#linux-perf-analysis-in-60s&quot; aria-label=&quot;Anchor link for: linux-perf-analysis-in-60s&quot;&gt;🔗&lt;&#x2F;a&gt;Linux Perf Analysis in 60s&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;uptime  &lt;code&gt;load averages&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;dmesg -T | tail &lt;code&gt;kernel errors&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;vmstat 1 &lt;code&gt;overall stats by time&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;mpstat -P ALL 1 &lt;code&gt;CPU balance&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;pidstat 1 &lt;code&gt;process usage&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;iostat -xz 1 &lt;code&gt;disk I&#x2F;O&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;free -m &lt;code&gt;memory usage&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;sar -n DEV 1 &lt;code&gt;network I&#x2F;O&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;sar -n TCP,ETCP 1 &lt;code&gt;TCP stats&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;top &lt;code&gt;check overview&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;linux-disk-checklist&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#linux-disk-checklist&quot; aria-label=&quot;Anchor link for: linux-disk-checklist&quot;&gt;🔗&lt;&#x2F;a&gt;Linux Disk Checklist&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;iostat -xz 1 &lt;code&gt;any disk I&#x2F;O? if not, stop looking&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;vmstat 1 &lt;code&gt;is this swapping? or, high sys time?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;df -h &lt;code&gt;are file systems nearly full?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;ext4slower 10 &lt;code&gt;(zfs*, xfs*, etc.) slow file system I&#x2F;O?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;bioslower 10 &lt;code&gt;if so, check disks&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;ext4dist 1 &lt;code&gt;check distribution and rate&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;biolatency 1 &lt;code&gt;if interesting, check disks&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;cat &#x2F;sys&#x2F;devices&#x2F;…&#x2F;ioerr_cnt &lt;code&gt;(if available) errors&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;smartctl -l error &#x2F;dev&#x2F;sda1 &lt;code&gt;(if available) errors&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;linux-network-checklist&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#linux-network-checklist&quot; aria-label=&quot;Anchor link for: linux-network-checklist&quot;&gt;🔗&lt;&#x2F;a&gt;Linux Network Checklist&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;sar -n DEV,EDEV 1 &lt;code&gt;at interface limits? or use nicstat&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;sar -n TCP,ETCP 1 &lt;code&gt;active&#x2F;passive load, retransmit rate&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;cat &#x2F;etc&#x2F;resolv.conf &lt;code&gt;it&#x27;s always DNS&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;mpstat -P ALL 1 &lt;code&gt;high kernel time? single hot CPU?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;tcpretrans &lt;code&gt;what are the retransmits? state?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;tcpconnect &lt;code&gt;connecting to anything unexpected?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;tcpaccept &lt;code&gt;unexpected workload?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;netstat -rnv &lt;code&gt;any inefficient routes?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;check firewall config &lt;code&gt;anything blocking&#x2F;throttling?&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;netstat -s &lt;code&gt;play 252 metric pickup&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;linux-cpu-checklist&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#linux-cpu-checklist&quot; aria-label=&quot;Anchor link for: linux-cpu-checklist&quot;&gt;🔗&lt;&#x2F;a&gt;Linux CPU Checklist&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;uptime &lt;code&gt;load averages&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;vmstat 1 &lt;code&gt;system-wide utilization, run q length&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;mpstat -P ALL 1 &lt;code&gt;CPU balance&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;pidstat 1 &lt;code&gt;per-process CPU&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;CPU flame graph &lt;code&gt;CPU profiling&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;CPU subsecond offset heat map &lt;code&gt;look for gaps&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;perf stat -a -- sleep 10 &lt;code&gt;IPC, LLC hit ratio&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;https:&#x2F;&#x2F;nbari.com&#x2F;post&#x2F;observability-tools&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;{{&amp;lt; youtube zxCWXNigDpA&amp;gt;}}&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Thanks to Brendan Gregg&#x27;s for all this info http:&#x2F;&#x2F;www.brendangregg.com&#x2F;
http:&#x2F;&#x2F;www.brendangregg.com&#x2F;blog&#x2F;2016-05-04&#x2F;srecon2016-perf-checklists-for-sres.html&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The Realities of the Job of Delivering Reliability&lt;&#x2F;p&gt;
&lt;p&gt;{{&amp;lt; youtube Lf4RwlOdppg&amp;gt;}}&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>forward proxy</title>
        <published>2017-01-21T17:42:07+01:00</published>
        <updated>2017-01-21T17:42:07+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/forward-proxy/"/>
        <id>https://nbari.com/forward-proxy/</id>
        
        <content type="html" xml:base="https://nbari.com/forward-proxy/">&lt;h1 id=&quot;nginx-forward-proxy&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#nginx-forward-proxy&quot; aria-label=&quot;Anchor link for: nginx-forward-proxy&quot;&gt;🔗&lt;&#x2F;a&gt;nginx forward proxy&lt;&#x2F;h1&gt;
&lt;p&gt;Server configuration:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;    listen       8080;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    location &#x2F; {
&lt;&#x2F;span&gt;&lt;span&gt;        resolver 8.8.8.8;
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_pass http:&#x2F;&#x2F;$http_host$uri$is_args$args;
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    error_page   500 502 503 504  &#x2F;50x.html;
&lt;&#x2F;span&gt;&lt;span&gt;    location = &#x2F;50x.html {
&lt;&#x2F;span&gt;&lt;span&gt;        root   &#x2F;usr&#x2F;local&#x2F;www&#x2F;nginx-dist;
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;client-side&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#client-side&quot; aria-label=&quot;Anchor link for: client-side&quot;&gt;🔗&lt;&#x2F;a&gt;Client side&lt;&#x2F;h2&gt;
&lt;p&gt;On the browser configure the &lt;code&gt;HTTP Proxy&lt;&#x2F;code&gt; and port.&lt;&#x2F;p&gt;
&lt;p&gt;Test by checking the the IP: https:&#x2F;&#x2F;trackip.net&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>leap second</title>
        <published>2017-01-11T15:08:31+01:00</published>
        <updated>2017-01-11T15:08:31+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/leap-seconds/"/>
        <id>https://nbari.com/leap-seconds/</id>
        
        <content type="html" xml:base="https://nbari.com/leap-seconds/">&lt;p&gt;A leap second is an ad-hoc one-second correction to synchronize atomic timescales with Earth rotation.&lt;&#x2F;p&gt;
&lt;p&gt;It is possible to test whether a leap second will be used. Due to the nature
of NTP, the test might work up to 24 hours before the leap second. Some major
reference clock sources only announce leap seconds one hour ahead of the event.
Query the NTP daemon:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ntpq -c &amp;#39;rv 0 leap&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To update&#x2F;sync:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ntpdate -v -b pool.ntp.org
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;probably you will need to stop ntpd &#x2F;etc&#x2F;rc.d&#x2F;ntpd stop&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Use ntpq to see more info:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ntpq -p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vm tools</title>
        <published>2016-12-19T14:39:36+01:00</published>
        <updated>2016-12-19T14:39:36+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vm-tools/"/>
        <id>https://nbari.com/vm-tools/</id>
        
        <content type="html" xml:base="https://nbari.com/vm-tools/">&lt;h1 id=&quot;vmware-tools-guest-freebsd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#vmware-tools-guest-freebsd&quot; aria-label=&quot;Anchor link for: vmware-tools-guest-freebsd&quot;&gt;🔗&lt;&#x2F;a&gt;vmware tools guest FreeBSD&lt;&#x2F;h1&gt;
&lt;p&gt;While running FreeBSD as a guest on VMWARE the vm-tools can be installed with this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pkg install open-vm-tools-nox11
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Later enable them on &lt;code&gt;&#x2F;etc&#x2F;rc.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vmware_guest_vmblock_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vmware_guest_vmhgfs_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vmware_guest_vmmemctl_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vmware_guest_vmxnet_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vmware_guestd_enable&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>scale</title>
        <published>2016-12-18T11:09:35+01:00</published>
        <updated>2016-12-18T11:09:35+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/scale/"/>
        <id>https://nbari.com/scale/</id>
        
        <content type="html" xml:base="https://nbari.com/scale/">&lt;h2 id=&quot;scale-out-horizontal-scaling&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#scale-out-horizontal-scaling&quot; aria-label=&quot;Anchor link for: scale-out-horizontal-scaling&quot;&gt;🔗&lt;&#x2F;a&gt;scale out (horizontal scaling)&lt;&#x2F;h2&gt;
&lt;p&gt;Refers to adding more servers with less processors and RAM. This is
usually cheaper overall and can literally scale infinitely&lt;&#x2F;p&gt;
&lt;p&gt;Pros:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Much cheaper than scaling vertically&lt;&#x2F;li&gt;
&lt;li&gt;Easier to run fault-tolerance&lt;&#x2F;li&gt;
&lt;li&gt;Easy to upgrade&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Cons:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Bigger footprint in the Data Center&lt;&#x2F;li&gt;
&lt;li&gt;Higher utility cost (Electricity and cooling)&lt;&#x2F;li&gt;
&lt;li&gt;Possible need for more networking equipment (switches&#x2F;routers)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;scale-in-vertical-scaling&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#scale-in-vertical-scaling&quot; aria-label=&quot;Anchor link for: scale-in-vertical-scaling&quot;&gt;🔗&lt;&#x2F;a&gt;scale in (vertical scaling)&lt;&#x2F;h2&gt;
&lt;p&gt;Refers to adding more processors and RAM, buying a more expensive and robust
server.&lt;&#x2F;p&gt;
&lt;p&gt;Pros:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Less power consumption than running multiple servers&lt;&#x2F;li&gt;
&lt;li&gt;Generally less challenging to implement&lt;&#x2F;li&gt;
&lt;li&gt;Uses less network hardware than scaling horizontally&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Cons:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Price&lt;&#x2F;li&gt;
&lt;li&gt;Greater risk of hardware failure causing bigger outages&lt;&#x2F;li&gt;
&lt;li&gt;Generally severe vendor lock-in and limited upgradeability in the future&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>zfs</title>
        <published>2016-12-10T15:53:08+01:00</published>
        <updated>2016-12-10T15:53:08+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/zfs/"/>
        <id>https://nbari.com/zfs/</id>
        
        <content type="html" xml:base="https://nbari.com/zfs/">&lt;h1 id=&quot;freebsd-zfs-disk-image&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#freebsd-zfs-disk-image&quot; aria-label=&quot;Anchor link for: freebsd-zfs-disk-image&quot;&gt;🔗&lt;&#x2F;a&gt;FreeBSD zfs disk image&lt;&#x2F;h1&gt;
&lt;p&gt;Use &lt;a href=&quot;https:&#x2F;&#x2F;www.virtualbox.org&#x2F;&quot;&gt;VirtualBox&lt;&#x2F;a&gt; to install
&lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;where.html&quot;&gt;FreeBSD&lt;&#x2F;a&gt; using UFS.&lt;&#x2F;p&gt;
&lt;p&gt;After having FreeBSD installed, update your sources and build a custom world and
kernel based on your needs for the new image to be created:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# cd &#x2F;usr&#x2F;src
&lt;&#x2F;span&gt;&lt;span&gt;# make -j4 buildworld buildkernel
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;adjust -j4 to the number or cpu cores&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Use this script to create the image: https:&#x2F;&#x2F;github.com&#x2F;nbari&#x2F;freebsd&#x2F;blob&#x2F;master&#x2F;zfs&#x2F;zfs.sh&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mkdir &#x2F;raw &amp;amp;&amp;amp; cd &#x2F;raw
&lt;&#x2F;span&gt;&lt;span&gt;$ fetch --no-verify-peer https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;nbari&#x2F;freebsd&#x2F;master&#x2F;zfs&#x2F;zfs.sh
&lt;&#x2F;span&gt;&lt;span&gt;$ .&#x2F;zfs.sh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If everything runs fine, on new files of 1GB size called &lt;code&gt;disk.raw&lt;&#x2F;code&gt; will be
created.&lt;&#x2F;p&gt;
&lt;p&gt;To test your image in virtualbox, download the disk.raw and convert it to &lt;code&gt;VDI&lt;&#x2F;code&gt; format:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage convertfromraw disk.raw ec2.vdi --format VDI
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Since the disk is only 1GB, you may want to increase the size, this can be done
like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage modifyhd disk.vdi --resize 8192
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After booting the pool need to be increased:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ gpart show da0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example of output:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@&#x2F;:~ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# gpart show
&lt;&#x2F;span&gt;&lt;span&gt;=&amp;gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;40  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;503316400&lt;&#x2F;span&gt;&lt;span&gt;  da0  GPT  (240G)
&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;40&lt;&#x2F;span&gt;&lt;span&gt;       1024    1  freebsd-boot  (512K)
&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1064&lt;&#x2F;span&gt;&lt;span&gt;    2097152    2  freebsd-swap  (1.0G)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2098216&lt;&#x2F;span&gt;&lt;span&gt;        984       - free -  (492K)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2099200&lt;&#x2F;span&gt;&lt;span&gt;    2093056    3  freebsd-zfs  (1.0G)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4192256&lt;&#x2F;span&gt;&lt;span&gt;  499124184       - free -  (1.0M)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then type &lt;code&gt;gpart recover da0&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ gpart recover da0
&lt;&#x2F;span&gt;&lt;span&gt;da0 recovered
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And next resize &lt;code&gt;gpart resize -i 3 da0&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ gpart resize -i 3 da0
&lt;&#x2F;span&gt;&lt;span&gt;da0 resized
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-i 3,  3 is the freebsd-zfs&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;After resizing:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@&#x2F;:~ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# gpart show
&lt;&#x2F;span&gt;&lt;span&gt;=&amp;gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;40  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;503316400&lt;&#x2F;span&gt;&lt;span&gt;  da0  GPT  (240G)
&lt;&#x2F;span&gt;&lt;span&gt;         &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;40&lt;&#x2F;span&gt;&lt;span&gt;       1024    1  freebsd-boot  (512K)
&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1064&lt;&#x2F;span&gt;&lt;span&gt;    2097152    2  freebsd-swap  (1.0G)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2098216&lt;&#x2F;span&gt;&lt;span&gt;        984       - free -  (492K)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2099200&lt;&#x2F;span&gt;&lt;span&gt;  501217240    3  freebsd-zfs  (239G)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Get zpool information by typing:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zdb
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Find the children guid from the output:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;zroot -&amp;gt; vdev_tree -&amp;gt; children[0] -&amp;gt; guid
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@:&#x2F;raw &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# zdb
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zroot:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;version:&lt;&#x2F;span&gt;&lt;span&gt; 5000
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name: &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;zroot&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;state:&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;txg:&lt;&#x2F;span&gt;&lt;span&gt; 422
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pool_guid:&lt;&#x2F;span&gt;&lt;span&gt; 5388488397555579451
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hostid:&lt;&#x2F;span&gt;&lt;span&gt; 4037738314
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hostname: &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;com.delphix:has_per_vdev_zaps
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vdev_children:&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vdev_tree:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;type: &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;root&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id:&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;guid:&lt;&#x2F;span&gt;&lt;span&gt; 5388488397555579451
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;create_txg:&lt;&#x2F;span&gt;&lt;span&gt; 4
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;children[0]:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;type: &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;disk&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id:&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;guid:&lt;&#x2F;span&gt;&lt;span&gt; 2304114010935459478
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path: &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;dev&#x2F;gpt&#x2F;disk0&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;whole_disk:&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metaslab_array:&lt;&#x2F;span&gt;&lt;span&gt; 37
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metaslab_shift:&lt;&#x2F;span&gt;&lt;span&gt; 24
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ashift:&lt;&#x2F;span&gt;&lt;span&gt; 12
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;asize:&lt;&#x2F;span&gt;&lt;span&gt; 8584429568
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;is_log:&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;create_txg:&lt;&#x2F;span&gt;&lt;span&gt; 4
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;com.delphix:vdev_zap_leaf:&lt;&#x2F;span&gt;&lt;span&gt; 35
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;com.delphix:vdev_zap_top:&lt;&#x2F;span&gt;&lt;span&gt; 36
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;features_for_read:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;com.delphix:hole_birth
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;com.delphix:embedded_data
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Resize the pool:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zpool online -e zroot 2304114010935459478
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Check the pool:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@:&#x2F;raw &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# zpool list
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NAME&lt;&#x2F;span&gt;&lt;span&gt;    SIZE  ALLOC   FREE  EXPANDSZ   FRAG    CAP  DEDUP  HEALTH  ALTROOT
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;zroot&lt;&#x2F;span&gt;&lt;span&gt;  7.98G   258M  7.73G         -     2%     3%  1.00x  ONLINE  -
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;readonly-off&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#readonly-off&quot; aria-label=&quot;Anchor link for: readonly-off&quot;&gt;🔗&lt;&#x2F;a&gt;readonly=off&lt;&#x2F;h2&gt;
&lt;p&gt;Set the &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; to readonly off:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ zfs set readonly=off zroot&#x2F;ROOT&#x2F;default
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>forkbomb</title>
        <published>2016-12-08T11:11:36+01:00</published>
        <updated>2016-12-08T11:11:36+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/forkbomb/"/>
        <id>https://nbari.com/forkbomb/</id>
        
        <content type="html" xml:base="https://nbari.com/forkbomb/">&lt;h1 id=&quot;forkbomb&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#forkbomb&quot; aria-label=&quot;Anchor link for: forkbomb&quot;&gt;🔗&lt;&#x2F;a&gt;forkbomb&lt;&#x2F;h1&gt;
&lt;p&gt;C example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-c &quot;&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;#include &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;stdio.h&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fork&lt;&#x2F;span&gt;&lt;span&gt;(); }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To compile:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ clang bomg.c
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Python example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;os
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    os.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fork&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;How to prevent it, use &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;security-resourcelimits.html&quot;&gt;RCTL&lt;&#x2F;a&gt;
for example in a jail:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ rctl -a jail:myJail:maxproc:deny=50
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssmtp</title>
        <published>2016-12-06T22:50:47+01:00</published>
        <updated>2016-12-06T22:50:47+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssmtp/"/>
        <id>https://nbari.com/ssmtp/</id>
        
        <content type="html" xml:base="https://nbari.com/ssmtp/">&lt;h1 id=&quot;ssmtp-send-a-message-using-smtp&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ssmtp-send-a-message-using-smtp&quot; aria-label=&quot;Anchor link for: ssmtp-send-a-message-using-smtp&quot;&gt;🔗&lt;&#x2F;a&gt;ssmtp - send a message using smtp&lt;&#x2F;h1&gt;
&lt;p&gt;When having sendmail disabled:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sendmail_enable=&amp;quot;NONE&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;wiki.archlinux.org&#x2F;index.php&#x2F;SSMTP&quot;&gt;ssmtp&lt;&#x2F;a&gt; helps to send email using an
SMTP server:&lt;&#x2F;p&gt;
&lt;p&gt;Install ssmtp:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install ssmtp
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Configure to use you provider &lt;a href=&quot;https:&#x2F;&#x2F;www.mailgun.com&#x2F;&quot;&gt;mailgun&lt;&#x2F;a&gt; in this
example &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;etc&#x2F;ssmtp&#x2F;ssmtp.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;monitor@domain.tld
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mailhub&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;smtp.mailgun.org
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;AuthUser&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;postmaster@your.domain
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;AuthPass&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;yourpassword
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;UseTLS&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Yes
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;UseSTARTTLS&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FromLineOverride&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YES
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;mail&#x2F;mailer.conf&lt;&#x2F;code&gt; to use ssmtp:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sendmail&lt;&#x2F;span&gt;&lt;span&gt;        &#x2F;usr&#x2F;local&#x2F;sbin&#x2F;ssmtp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;send-mail&lt;&#x2F;span&gt;&lt;span&gt;       &#x2F;usr&#x2F;local&#x2F;sbin&#x2F;ssmtp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mailq&lt;&#x2F;span&gt;&lt;span&gt;           &#x2F;usr&#x2F;local&#x2F;sbin&#x2F;ssmtp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;newaliases&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;usr&#x2F;local&#x2F;sbin&#x2F;ssmtp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hoststat&lt;&#x2F;span&gt;&lt;span&gt;        &#x2F;usr&#x2F;bin&#x2F;true
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;purgestat&lt;&#x2F;span&gt;&lt;span&gt;       &#x2F;usr&#x2F;bin&#x2F;true
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now all email sent to &lt;code&gt;root&lt;&#x2F;code&gt; will be sent to &lt;code&gt;monitor@domain.tld&lt;&#x2F;code&gt; for example to
email the current kernel options:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;sysctl kern.conftxt | mail root
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>lshw</title>
        <published>2016-12-04T14:06:25+01:00</published>
        <updated>2016-12-04T14:06:25+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/lshw/"/>
        <id>https://nbari.com/lshw/</id>
        
        <content type="html" xml:base="https://nbari.com/lshw/">&lt;p&gt;To print information about your Linux system hardware, run this command.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; $ apt-get install lshw
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;lshw&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#lshw&quot; aria-label=&quot;Anchor link for: lshw&quot;&gt;🔗&lt;&#x2F;a&gt;lshw&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@server:&#x2F;#&lt;&#x2F;span&gt;&lt;span&gt; lshw&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -short
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;H&#x2F;W&lt;&#x2F;span&gt;&lt;span&gt; path        Device      Class      Description
&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;=================================================
&lt;&#x2F;span&gt;&lt;span&gt;                            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;system&lt;&#x2F;span&gt;&lt;span&gt;     Computer
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;                          bus        Motherboard
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;0&lt;&#x2F;span&gt;&lt;span&gt;                        memory     3020MiB System memory
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;1&lt;&#x2F;span&gt;&lt;span&gt;                        processor  Intel(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Xeon&lt;&#x2F;span&gt;&lt;span&gt;(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; E5-2660 v3 @ 2.60GHz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;2&lt;&#x2F;span&gt;&lt;span&gt;                        processor  Intel(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Xeon&lt;&#x2F;span&gt;&lt;span&gt;(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; E5-2660 v3 @ 2.60GHz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&lt;&#x2F;span&gt;&lt;span&gt;                      bridge     440FX - 82441FX PMC &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;Natoma&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1&lt;&#x2F;span&gt;&lt;span&gt;                    bridge     82371SB PIIX3 ISA &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;Natoma&#x2F;Triton II&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1.1&lt;&#x2F;span&gt;&lt;span&gt;                  storage    82371SB PIIX3 IDE &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;Natoma&#x2F;Triton II&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1.2&lt;&#x2F;span&gt;&lt;span&gt;                  bus        82371SB PIIX3 USB &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;Natoma&#x2F;Triton II&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1.2&#x2F;1&lt;&#x2F;span&gt;&lt;span&gt;    usb1        bus        UHCI Host Controller
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1.2&#x2F;1&#x2F;1&lt;&#x2F;span&gt;&lt;span&gt;              input      QEMU USB Tablet
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;1.3&lt;&#x2F;span&gt;&lt;span&gt;                  bridge     82371AB&#x2F;EB&#x2F;MB PIIX4 ACPI
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;2&lt;&#x2F;span&gt;&lt;span&gt;                    display    GD 5446
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;3&lt;&#x2F;span&gt;&lt;span&gt;        eth0        network    Virtio network device
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;4&lt;&#x2F;span&gt;&lt;span&gt;                    storage    Virtio SCSI
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;100&#x2F;5&lt;&#x2F;span&gt;&lt;span&gt;                    generic    Virtio memory balloon
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;3&lt;&#x2F;span&gt;&lt;span&gt;            scsi2       storage
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;3&#x2F;0.0.0&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;dev&#x2F;sda    disk       257GB SCSI Disk
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;3&#x2F;0.0.0&#x2F;1&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;dev&#x2F;sda1   volume     9748KiB data partition
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;3&#x2F;0.0.0&#x2F;2&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;dev&#x2F;sda2   volume     3899MiB Linux swap volume
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;3&#x2F;0.0.0&#x2F;3&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;dev&#x2F;sda3   volume     236GiB EXT4 volume
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;4&lt;&#x2F;span&gt;&lt;span&gt;            scsi1       storage
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;&#x2F;0&#x2F;4&#x2F;0.0.0&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;dev&#x2F;cdrom  disk       DVD reader
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;lscpu&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#lscpu&quot; aria-label=&quot;Anchor link for: lscpu&quot;&gt;🔗&lt;&#x2F;a&gt;lscpu&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@server:&#x2F;#&lt;&#x2F;span&gt;&lt;span&gt; lscpu
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Architecture:&lt;&#x2F;span&gt;&lt;span&gt;          x86_64
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; op-mode(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;        32-bit, 64-bit
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Byte&lt;&#x2F;span&gt;&lt;span&gt; Order:            Little Endian
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt;(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;                2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;On-line&lt;&#x2F;span&gt;&lt;span&gt; CPU(s) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;list:&lt;&#x2F;span&gt;&lt;span&gt;   0,1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Thread&lt;&#x2F;span&gt;&lt;span&gt;(s) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;per&lt;&#x2F;span&gt;&lt;span&gt; core:    1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Core&lt;&#x2F;span&gt;&lt;span&gt;(s) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;per&lt;&#x2F;span&gt;&lt;span&gt; socket:    1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Socket&lt;&#x2F;span&gt;&lt;span&gt;(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;             2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMA&lt;&#x2F;span&gt;&lt;span&gt; node(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;          1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Vendor&lt;&#x2F;span&gt;&lt;span&gt; ID:             GenuineIntel
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; family:            6
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Model:&lt;&#x2F;span&gt;&lt;span&gt;                 63
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Model&lt;&#x2F;span&gt;&lt;span&gt; name:            Intel(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Xeon&lt;&#x2F;span&gt;&lt;span&gt;(R) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; E5-2660 v3 @ 2.60GHz
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Stepping:&lt;&#x2F;span&gt;&lt;span&gt;              2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CPU&lt;&#x2F;span&gt;&lt;span&gt; MHz:               2596.988
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;BogoMIPS:&lt;&#x2F;span&gt;&lt;span&gt;              5193.97
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Hypervisor&lt;&#x2F;span&gt;&lt;span&gt; vendor:     KVM
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Virtualization&lt;&#x2F;span&gt;&lt;span&gt; type:   full
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;L1d&lt;&#x2F;span&gt;&lt;span&gt; cache:             32K
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;L1i&lt;&#x2F;span&gt;&lt;span&gt; cache:             32K
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;L2&lt;&#x2F;span&gt;&lt;span&gt; cache:              256K
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;L3&lt;&#x2F;span&gt;&lt;span&gt; cache:              25600K
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMA&lt;&#x2F;span&gt;&lt;span&gt; node0 CPU(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;     0,1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;lsblk&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#lsblk&quot; aria-label=&quot;Anchor link for: lsblk&quot;&gt;🔗&lt;&#x2F;a&gt;lsblk&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root@server:&#x2F;#&lt;&#x2F;span&gt;&lt;span&gt; lsblk
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NAME&lt;&#x2F;span&gt;&lt;span&gt;   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sda&lt;&#x2F;span&gt;&lt;span&gt;      8:0    0   240G  0 disk
&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-sda1&lt;&#x2F;span&gt;&lt;span&gt;   8:1    0   9.5M  0 part
&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-sda2&lt;&#x2F;span&gt;&lt;span&gt;   8:2    0   3.8G  0 part &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;SWAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-sda3&lt;&#x2F;span&gt;&lt;span&gt;   8:3    0 236.2G  0 part &#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sr0&lt;&#x2F;span&gt;&lt;span&gt;     11:0    1  1024M  0 rom
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vps</title>
        <published>2016-12-04T12:57:26+01:00</published>
        <updated>2016-12-04T12:57:26+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vps/"/>
        <id>https://nbari.com/vps/</id>
        
        <content type="html" xml:base="https://nbari.com/vps/">&lt;p&gt;VPS providers that allow use your own image&#x2F;kernel&lt;&#x2F;p&gt;
&lt;h2 id=&quot;google-cloud-only-ipv4&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#google-cloud-only-ipv4&quot; aria-label=&quot;Anchor link for: google-cloud-only-ipv4&quot;&gt;🔗&lt;&#x2F;a&gt;Google cloud (only ipv4)&lt;&#x2F;h2&gt;
&lt;p&gt;Allows to upload compreses raw images:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tar --format=gnutar -Szcf disk.tar.gz disk.raw
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Maximum_transmission_unit&quot;&gt;MTU&lt;&#x2F;a&gt;
needs to be set to 1460 and in some cases disable the
&lt;a href=&quot;&#x2F;post&#x2F;checksum-offload&#x2F;&quot;&gt;checksum offload&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;amazon-aws-only-ipv4&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#amazon-aws-only-ipv4&quot; aria-label=&quot;Anchor link for: amazon-aws-only-ipv4&quot;&gt;🔗&lt;&#x2F;a&gt;Amazon AWS (only ipv4)&lt;&#x2F;h2&gt;
&lt;p&gt;Images can&#x27;t be uploaded compressed, ans disabling &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Large_segment_offload&quot;&gt;TSO&lt;&#x2F;a&gt; is required:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ifconfig_DEFAULT=&amp;quot;SYNCDHCP -tso&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;ipv6-support&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ipv6-support&quot; aria-label=&quot;Anchor link for: ipv6-support&quot;&gt;🔗&lt;&#x2F;a&gt;IPV6 support&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;vultr&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#vultr&quot; aria-label=&quot;Anchor link for: vultr&quot;&gt;🔗&lt;&#x2F;a&gt;vultr&lt;&#x2F;h2&gt;
&lt;p&gt;https:&#x2F;&#x2F;www.vultr.com&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;Instead of uploading the raw images, they will be fetched, a URL needs to be
provider from where the image can be downloaded.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;netcup-avoid-warning&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#netcup-avoid-warning&quot; aria-label=&quot;Anchor link for: netcup-avoid-warning&quot;&gt;🔗&lt;&#x2F;a&gt;netcup (avoid ⚠️ )&lt;&#x2F;h2&gt;
&lt;p&gt;https:&#x2F;&#x2F;www.netcup.eu&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;Very good prices, Images need to be uploaded via FTP.&lt;&#x2F;p&gt;
&lt;p&gt;There is an issue while rebooting instances due a bug on QEMU&#x2F;KVM.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;https:&#x2F;&#x2F;redmine.pfsense.org&#x2F;issues&#x2F;4377&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;bugs.launchpad.net&#x2F;qemu&#x2F;+bug&#x2F;1329956&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;To replicate once login is up and running just reboot and later will stuck in
the booting process like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;usbus0-netcup.png&quot; alt=&quot;usb2-netcup&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To fix this, the virtual machine needs to be moved to another updated server.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;headsup about German Provider Policies&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;lunanode&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#lunanode&quot; aria-label=&quot;Anchor link for: lunanode&quot;&gt;🔗&lt;&#x2F;a&gt;lunanode&lt;&#x2F;h2&gt;
&lt;p&gt;https:&#x2F;&#x2F;lunanode.com&lt;&#x2F;p&gt;
&lt;p&gt;Similar to netcup but only IPv4 and with &quot;Floating IPs&quot;&lt;&#x2F;p&gt;
&lt;p&gt;Images need to be in QCOW2 format&lt;&#x2F;p&gt;
&lt;h1 id=&quot;script-to-create-images&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#script-to-create-images&quot; aria-label=&quot;Anchor link for: script-to-create-images&quot;&gt;🔗&lt;&#x2F;a&gt;script to create images:&lt;&#x2F;h1&gt;
&lt;p&gt;https:&#x2F;&#x2F;fabrik.red&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ipv6 off</title>
        <published>2016-12-02T14:52:37+01:00</published>
        <updated>2016-12-02T14:52:37+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ipv6-off/"/>
        <id>https://nbari.com/ipv6-off/</id>
        
        <content type="html" xml:base="https://nbari.com/ipv6-off/">&lt;h1 id=&quot;turn-off-ipv6-on-mac&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#turn-off-ipv6-on-mac&quot; aria-label=&quot;Anchor link for: turn-off-ipv6-on-mac&quot;&gt;🔗&lt;&#x2F;a&gt;Turn off IPv6 on mac&lt;&#x2F;h1&gt;
&lt;p&gt;First list interfaces:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ networksetup -listallnetworkservices
&lt;&#x2F;span&gt;&lt;span&gt;An asterisk (*) denotes that a network service is disabled.
&lt;&#x2F;span&gt;&lt;span&gt;Thunderbolt Ethernet
&lt;&#x2F;span&gt;&lt;span&gt;Wi-Fi
&lt;&#x2F;span&gt;&lt;span&gt;Bluetooth PAN
&lt;&#x2F;span&gt;&lt;span&gt;Thunderbolt Bridge
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; networksetup&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -setv6off &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Thunderbolt Ethernet&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For Wi-Fi:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; networksetup&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -setv6off&lt;&#x2F;span&gt;&lt;span&gt;  Wi-Fi
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ipv6 tunnelbroker</title>
        <published>2016-12-01T16:50:30+01:00</published>
        <updated>2016-12-01T16:50:30+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ipv6-tunnelbroker/"/>
        <id>https://nbari.com/ipv6-tunnelbroker/</id>
        
        <content type="html" xml:base="https://nbari.com/ipv6-tunnelbroker/">&lt;h1 id=&quot;6in4&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#6in4&quot; aria-label=&quot;Anchor link for: 6in4&quot;&gt;🔗&lt;&#x2F;a&gt;6in4&lt;&#x2F;h1&gt;
&lt;blockquote&gt;
&lt;p&gt;6in4 uses tunneling to encapsulate IPv6 traffic over explicitly-configured
IPv4 links. The 6in4 traffic is sent over the IPv4 Internet inside IPv4 packets
whose IP headers have the IP protocol number set to 41.
https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;6in4&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;6in4.gif&quot; alt=&quot;6in4&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&quot;6to4&quot; is a tunneling method that is only interesting for reaching IPv6-only
services. And 6to4 makes sense only if one has a public IPv4 address. As a rule,
you only need to enable &quot;6to4&quot; if you want to access services that are only
IPv6. http:&#x2F;&#x2F;www.elektronik-kompendium.de&#x2F;sites&#x2F;net&#x2F;1904031.htm&lt;&#x2F;p&gt;
&lt;p&gt;Create an account on https:&#x2F;&#x2F;tunnelbroker.net&#x2F;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;seting-ip-on-freebsd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#seting-ip-on-freebsd&quot; aria-label=&quot;Anchor link for: seting-ip-on-freebsd&quot;&gt;🔗&lt;&#x2F;a&gt;seting IP on FreeBSD&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ifconfig gif0 create
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig gif0 tunnel 1.2.3.4 Y.Y.Y.Y
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig gif0 inet6 2001:470:1c:35e::2
&lt;&#x2F;span&gt;&lt;span&gt;route -n add -inet6 default 2001:470:1c:35e::1
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig gif0 up
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Where &lt;code&gt;Y.Y.Y.Y&lt;&#x2F;code&gt; is the Server IPv4 Address and &lt;code&gt;1.2.3.4&lt;&#x2F;code&gt; is your lan.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;mac-os-x-setup&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mac-os-x-setup&quot; aria-label=&quot;Anchor link for: mac-os-x-setup&quot;&gt;🔗&lt;&#x2F;a&gt;mac os X setup&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ifconfig gif0 create
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig gif0 tunnel 56.189.27.100 216.77.86.114
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig gif0 inet6 2001:470:6c:387::2 2001:470:6c:387::1 prefixlen 128
&lt;&#x2F;span&gt;&lt;span&gt;route -n add -inet6 default 2001:470:6c:387::1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>postgres</title>
        <published>2016-11-30T17:12:04+01:00</published>
        <updated>2016-11-30T17:12:04+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/postgres/"/>
        <id>https://nbari.com/postgres/</id>
        
        <content type="html" xml:base="https://nbari.com/postgres/">&lt;h1 id=&quot;read-only-user&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#read-only-user&quot; aria-label=&quot;Anchor link for: read-only-user&quot;&gt;🔗&lt;&#x2F;a&gt;Read only user&lt;&#x2F;h1&gt;
&lt;p&gt;Create user first:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CREATE USER theuser WITH PASSWORD &amp;#39;secret&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;GRANT SELECT ON ALL TABLES IN SCHEMA public TO theuser;
&lt;&#x2F;span&gt;&lt;span&gt;GRANT CONNECT ON DATABASE mydb TO dbuser;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;psql -h host -U theuser mydb
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To see the list of tables:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mydb=&amp;gt;\d+
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>checksum offload</title>
        <published>2016-11-29T19:15:23+01:00</published>
        <updated>2016-11-29T19:15:23+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/checksum-offload/"/>
        <id>https://nbari.com/checksum-offload/</id>
        
        <content type="html" xml:base="https://nbari.com/checksum-offload/">&lt;h1 id=&quot;tcp-offload-engine&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tcp-offload-engine&quot; aria-label=&quot;Anchor link for: tcp-offload-engine&quot;&gt;🔗&lt;&#x2F;a&gt;TCP offload engine&lt;&#x2F;h1&gt;
&lt;blockquote&gt;
&lt;p&gt;TOE is a technology used in network interface cards
(NIC) to offload processing of the entire TCP&#x2F;IP stack to the network
controller. It is primarily used with high-speed network interfaces, such as
gigabit Ethernet and 10 Gigabit Ethernet, where processing overhead of the
network stack becomes significant. https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;TCP_offload_engine&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;On Virtual Guest disabling the cheksum may boost the newtork speed, for example
on &lt;a href=&quot;https:&#x2F;&#x2F;cloud.google.com&#x2F;compute-engine&quot;&gt;GCE&lt;&#x2F;a&gt; when using FreeBSD add this
to the &lt;code&gt;&#x2F;boot&#x2F;loader.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;hw.vtnet.csum_disable=&amp;quot;1&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will make the network speed faster but will consume more CPU.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>cdn token</title>
        <published>2016-11-22T12:43:16+01:00</published>
        <updated>2016-11-22T12:43:16+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/cdn-token/"/>
        <id>https://nbari.com/cdn-token/</id>
        
        <content type="html" xml:base="https://nbari.com/cdn-token/">&lt;h1 id=&quot;restrict-access-only-to-the-cdn-cloudfront&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#restrict-access-only-to-the-cdn-cloudfront&quot; aria-label=&quot;Anchor link for: restrict-access-only-to-the-cdn-cloudfront&quot;&gt;🔗&lt;&#x2F;a&gt;Restrict access only to the CDN (cloudfront)&lt;&#x2F;h1&gt;
&lt;p&gt;To only allow, handle request from the CDN you could add a custom header&#x2F;token
and check on your backend (nginx&#x2F;haproxy) if is matching otherwise return a 401&lt;&#x2F;p&gt;
&lt;p&gt;If using AWS cloudfront you edit your origins like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;x-cf-token.png&quot; alt=&quot;cloudfront x-cf-token&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The token can be any UUID &#x2F; has or common secret between the CDN and the
backend.&lt;&#x2F;p&gt;
&lt;p&gt;If your backends are using nginx you could verify the token like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;	listen 80;
&lt;&#x2F;span&gt;&lt;span&gt;	server_name _;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	if ($http_x_cf_token != &amp;#39;4147E877-7C6D-4B4E-96CE-B173B6F0B755&amp;#39;) {
&lt;&#x2F;span&gt;&lt;span&gt;		return 401;
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this case the token is an UUID and if the request come with no token they
will got a 401.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>observability tools</title>
        <published>2016-11-14T18:45:50+01:00</published>
        <updated>2016-11-14T18:45:50+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/observability-tools/"/>
        <id>https://nbari.com/observability-tools/</id>
        
        <content type="html" xml:base="https://nbari.com/observability-tools/">&lt;h1 id=&quot;freebsd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#freebsd&quot; aria-label=&quot;Anchor link for: freebsd&quot;&gt;🔗&lt;&#x2F;a&gt;FreeBSD&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;freebsd_observability_tools.png&quot; alt=&quot;FreeBSD observability tools&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;linux&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#linux&quot; aria-label=&quot;Anchor link for: linux&quot;&gt;🔗&lt;&#x2F;a&gt;Linux&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;linux_observability_tools.png&quot; alt=&quot;Linux observability tools&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;linux_perf_tools_full.svg&quot; alt=&quot;linux perf tools&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;src: http:&#x2F;&#x2F;www.brendangregg.com&#x2F;blog&#x2F;2015-03-06&#x2F;performance-analysis-bsd.html&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>innodb_flush_log_at_trx_commit=2</title>
        <published>2016-11-14T11:57:34+01:00</published>
        <updated>2016-11-14T11:57:34+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-innodb-flush-log-at-trx-commit/"/>
        <id>https://nbari.com/mysql-innodb-flush-log-at-trx-commit/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-innodb-flush-log-at-trx-commit/">&lt;p&gt;To speed mysql replica add into the &lt;code&gt;[mysqld]&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;innodb_flush_log_at_trx_commit=2
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mysql_tzinfo_to_sql</title>
        <published>2016-11-07T16:58:24+01:00</published>
        <updated>2016-11-07T16:58:24+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mysql-tzinfo-to-sql/"/>
        <id>https://nbari.com/mysql-tzinfo-to-sql/</id>
        
        <content type="html" xml:base="https://nbari.com/mysql-tzinfo-to-sql/">&lt;h1 id=&quot;freebsd-mysql-utc&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#freebsd-mysql-utc&quot; aria-label=&quot;Anchor link for: freebsd-mysql-utc&quot;&gt;🔗&lt;&#x2F;a&gt;FreeBSD &amp;amp; MySQL UTC&lt;&#x2F;h1&gt;
&lt;p&gt;After doing a fresh install, load the UTC zone:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cd &#x2F;usr&#x2F;share&#x2F;zoneinfo
&lt;&#x2F;span&gt;&lt;span&gt;$ mysql_tzinfo_to_sql  UTC UTC | mysql -u root mysql
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit the &lt;code&gt;&#x2F;etc&#x2F;my.cnf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;[mysqld]
&lt;&#x2F;span&gt;&lt;span&gt;default-time-zone=&amp;#39;UTC&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will set the default timezone on the server to be &lt;code&gt;UTC&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To get current timezone of the mysql you can do following things:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mysql&amp;gt; SELECT @@global.time_zone, @@session.time_zone;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>convertfromraw</title>
        <published>2016-11-07T16:20:26+01:00</published>
        <updated>2016-11-07T16:20:26+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/convertfromraw/"/>
        <id>https://nbari.com/convertfromraw/</id>
        
        <content type="html" xml:base="https://nbari.com/convertfromraw/">&lt;h1 id=&quot;convert-from-raw-to-vdi&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#convert-from-raw-to-vdi&quot; aria-label=&quot;Anchor link for: convert-from-raw-to-vdi&quot;&gt;🔗&lt;&#x2F;a&gt;Convert from RAW to VDI&lt;&#x2F;h1&gt;
&lt;p&gt;When creating custom &quot;RAW&quot; images using &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=mkimg&amp;amp;sektion=1&quot;&gt;mkimg&lt;&#x2F;a&gt;
they can be use in VirtualBox by converting them to &quot;VDI&quot; format, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage convertfromraw ec2.raw ec2.vdi --format VDI
&lt;&#x2F;span&gt;&lt;span&gt;Converting from raw image file=&amp;quot;ec2.raw&amp;quot; to file=&amp;quot;ec2.vdi&amp;quot;...
&lt;&#x2F;span&gt;&lt;span&gt;Creating dynamic image with size 3221292544 bytes (3073MB)...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Once the image is in &quot;VDI&quot; format it can be resized using:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ VBoxManage modifyhd ec2.vdi --resize 8192
&lt;&#x2F;span&gt;&lt;span&gt;0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The above command will resize the image to 8GB.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;vmware&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#vmware&quot; aria-label=&quot;Anchor link for: vmware&quot;&gt;🔗&lt;&#x2F;a&gt;VMware&lt;&#x2F;h2&gt;
&lt;p&gt;If using VMware, virtual disks can be expanded using this ESXi&#x2F;ESX command:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;vmkfstools -X &amp;lt;new size&amp;gt; &amp;lt;virtual disk&amp;gt;.vmdk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For example, use this command to grow the virtual disk to 25GB in size:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;vmkfstools -X 25g &#x2F;vmfs&#x2F;volumes&#x2F;xxxx&#x2F;vmname&#x2F;vmname.vmdk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>txt 2 img</title>
        <published>2016-11-01T21:00:35+01:00</published>
        <updated>2016-11-01T21:00:35+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/txt2img/"/>
        <id>https://nbari.com/txt2img/</id>
        
        <content type="html" xml:base="https://nbari.com/txt2img/">&lt;p&gt;To create an image with a custom label from the command line:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;convert -font AndaleMono -size 200x32 -gravity center -background white -fill black  label:&amp;quot;0O0ilLxt your msg &amp;quot; out.png
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>transparent</title>
        <published>2016-10-30T17:36:50+01:00</published>
        <updated>2016-10-30T17:36:50+01:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/transparent/"/>
        <id>https://nbari.com/transparent/</id>
        
        <content type="html" xml:base="https://nbari.com/transparent/">&lt;h1 id=&quot;create-an-image-with-transparent-background&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-an-image-with-transparent-background&quot; aria-label=&quot;Anchor link for: create-an-image-with-transparent-background&quot;&gt;🔗&lt;&#x2F;a&gt;Create an image with transparent background&lt;&#x2F;h1&gt;
&lt;p&gt;Using convert from imagemagick:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;convert input.jpg -fuzz 10% -transparent white transparent.png
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>webscraping</title>
        <published>2016-10-27T21:37:13+02:00</published>
        <updated>2016-10-27T21:37:13+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/webscraping/"/>
        <id>https://nbari.com/webscraping/</id>
        
        <content type="html" xml:base="https://nbari.com/webscraping/">&lt;h1 id=&quot;webscraping-using-python-chrome&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#webscraping-using-python-chrome&quot; aria-label=&quot;Anchor link for: webscraping-using-python-chrome&quot;&gt;🔗&lt;&#x2F;a&gt;Webscraping using python + chrome&lt;&#x2F;h1&gt;
&lt;p&gt;In mac OS X, install chromedriver and selenium:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install chromedriver
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install selenium via pip:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pip install -U selenium
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;if required to install globally &lt;code&gt;sudo pip install selenium&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To test, open a terminal, type python and try:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Python 2.7.12 (default, Oct 11 2016, 05:20:59)
&lt;&#x2F;span&gt;&lt;span&gt;[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.38)] on darwin
&lt;&#x2F;span&gt;&lt;span&gt;Type &amp;quot;help&amp;quot;, &amp;quot;copyright&amp;quot;, &amp;quot;credits&amp;quot; or &amp;quot;license&amp;quot; for more information.
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; from selenium import webdriver
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; driver = webdriver.Chrome()
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; driver.get(&amp;quot;https:&#x2F;&#x2F;nbari.com&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;scraping&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#scraping&quot; aria-label=&quot;Anchor link for: scraping&quot;&gt;🔗&lt;&#x2F;a&gt;scraping&lt;&#x2F;h1&gt;
&lt;p&gt;The following example will do:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Fill a form,&lt;&#x2F;li&gt;
&lt;li&gt;Parse links of the results.&lt;&#x2F;li&gt;
&lt;li&gt;Open each link.&lt;&#x2F;li&gt;
&lt;li&gt;Get text data from a div.&lt;&#x2F;li&gt;
&lt;li&gt;Go back to step 2 until all links are parsed.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;selenium &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;webdriver
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;selenium.webdriver.common.keys &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;Keys
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;driver = webdriver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Chrome&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;https:&#x2F;&#x2F;search.cro.ie&#x2F;company&#x2F;CompanySearch.aspx&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;inputElement = driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;find_element_by_id&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ctl00_ContentPlaceHolder1_textCompanyName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;inputElement.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;send_keys&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;limo&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;inputElement.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;send_keys&lt;&#x2F;span&gt;&lt;span&gt;(Keys.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ENTER&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;links = driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;find_elements_by_xpath&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&#x2F;*[@id=&amp;#39;ctl00_ContentPlaceHolder1_GridView1&amp;#39;]&#x2F;tbody&#x2F;tr&#x2F;td&#x2F;a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;data = {}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;i &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xrange&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(links)):
&lt;&#x2F;span&gt;&lt;span&gt;    links = driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;find_elements_by_xpath&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&#x2F;*[@id=&amp;#39;ctl00_ContentPlaceHolder1_GridView1&amp;#39;]&#x2F;tbody&#x2F;tr&#x2F;td&#x2F;a&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    idx_name = links[i].text
&lt;&#x2F;span&gt;&lt;span&gt;    links[i].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;click&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    div = driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;find_element_by_id&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;companyDetails&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    data[idx_name] = div.text
&lt;&#x2F;span&gt;&lt;span&gt;    driver.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute_script&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;window.history.go(-1)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;key, value &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sorted&lt;&#x2F;span&gt;&lt;span&gt;(data.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iteritems&lt;&#x2F;span&gt;&lt;span&gt;()):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; * &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;64
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; % (key, value)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>12 factor</title>
        <published>2016-10-25T20:56:30+02:00</published>
        <updated>2016-10-25T20:56:30+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/12factor/"/>
        <id>https://nbari.com/12factor/</id>
        
        <content type="html" xml:base="https://nbari.com/12factor/">&lt;h1 id=&quot;the-twelve-factors&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-twelve-factors&quot; aria-label=&quot;Anchor link for: the-twelve-factors&quot;&gt;🔗&lt;&#x2F;a&gt;The Twelve Factors&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;1-codebase&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#1-codebase&quot; aria-label=&quot;Anchor link for: 1-codebase&quot;&gt;🔗&lt;&#x2F;a&gt;1. Codebase&lt;&#x2F;h2&gt;
&lt;p&gt;Everything in revision control including environment configuration&lt;&#x2F;p&gt;
&lt;p&gt;git flow
master - production
develop - staging&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2-dependencies&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#2-dependencies&quot; aria-label=&quot;Anchor link for: 2-dependencies&quot;&gt;🔗&lt;&#x2F;a&gt;2. Dependencies&lt;&#x2F;h2&gt;
&lt;p&gt;Explicitly declare and isolate dependencies&lt;&#x2F;p&gt;
&lt;h2 id=&quot;3-config&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#3-config&quot; aria-label=&quot;Anchor link for: 3-config&quot;&gt;🔗&lt;&#x2F;a&gt;3. Config&lt;&#x2F;h2&gt;
&lt;p&gt;Store config in the environment&lt;&#x2F;p&gt;
&lt;p&gt;In a twelve-factor app, env vars are granular controls, each fully orthogonal to
other env vars. They are never grouped together as “environments”, but instead
are independently managed for each deploy. This is a model that scales up
smoothly as the app naturally expands into more deploys over its lifetime.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;4-backing-services&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#4-backing-services&quot; aria-label=&quot;Anchor link for: 4-backing-services&quot;&gt;🔗&lt;&#x2F;a&gt;4. Backing services&lt;&#x2F;h2&gt;
&lt;p&gt;Treat backing services as attached resources.&lt;&#x2F;p&gt;
&lt;p&gt;Anything your application uses as a resource (database, queueing systems, email,
cache) should be referenced with &quot;bindings&quot; to these services.&lt;&#x2F;p&gt;
&lt;p&gt;Backing services should be called via an API.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;5-build-release-run&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#5-build-release-run&quot; aria-label=&quot;Anchor link for: 5-build-release-run&quot;&gt;🔗&lt;&#x2F;a&gt;5. Build, release, run&lt;&#x2F;h2&gt;
&lt;p&gt;Strictly separate build and run stages&lt;&#x2F;p&gt;
&lt;p&gt;Don&#x27;t compile on production environment.&lt;&#x2F;p&gt;
&lt;p&gt;Blue&#x2F;Green Deployments are a rule, not an exception.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;6-processes&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#6-processes&quot; aria-label=&quot;Anchor link for: 6-processes&quot;&gt;🔗&lt;&#x2F;a&gt;6. Processes&lt;&#x2F;h2&gt;
&lt;p&gt;Execute the app as one or more stateless processes&lt;&#x2F;p&gt;
&lt;p&gt;Some web systems rely on “sticky sessions” – that is, caching user session data
in memory of the app’s process and expecting future requests from the same
visitor to be routed to the same process. Sticky sessions are a violation of
twelve-factor and should never be used or relied upon. Session state data is a
good candidate for a datastore that offers time-expiration, such as Memcached or
Redis.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;7-port-binding&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#7-port-binding&quot; aria-label=&quot;Anchor link for: 7-port-binding&quot;&gt;🔗&lt;&#x2F;a&gt;7. Port binding&lt;&#x2F;h2&gt;
&lt;p&gt;Export services via port binding&lt;&#x2F;p&gt;
&lt;h2 id=&quot;8-concurrency&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#8-concurrency&quot; aria-label=&quot;Anchor link for: 8-concurrency&quot;&gt;🔗&lt;&#x2F;a&gt;8. Concurrency&lt;&#x2F;h2&gt;
&lt;p&gt;Scale out via the process model&lt;&#x2F;p&gt;
&lt;h2 id=&quot;9-disposability&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#9-disposability&quot; aria-label=&quot;Anchor link for: 9-disposability&quot;&gt;🔗&lt;&#x2F;a&gt;9. Disposability&lt;&#x2F;h2&gt;
&lt;p&gt;Maximize robustness with fast startup and graceful shutdown.&lt;&#x2F;p&gt;
&lt;p&gt;Processes shut down gracefully when they receive a SIGTERM signal from the process manager.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;10-dev-prod-parity&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#10-dev-prod-parity&quot; aria-label=&quot;Anchor link for: 10-dev-prod-parity&quot;&gt;🔗&lt;&#x2F;a&gt;10. Dev&#x2F;prod parity&lt;&#x2F;h2&gt;
&lt;p&gt;Keep development, staging, and production as similar as possible.&lt;&#x2F;p&gt;
&lt;p&gt;The twelve-factor app is designed for continuous deployment by keeping the gap
between development and production small.&lt;&#x2F;p&gt;
&lt;p&gt;Dev MUST == Production in config, but not performance&lt;&#x2F;p&gt;
&lt;h2 id=&quot;11-logs&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#11-logs&quot; aria-label=&quot;Anchor link for: 11-logs&quot;&gt;🔗&lt;&#x2F;a&gt;11. Logs&lt;&#x2F;h2&gt;
&lt;p&gt;Treat logs as event streams&lt;&#x2F;p&gt;
&lt;p&gt;A twelve-factor app never concerns itself with routing or storage of its output
stream. It should not attempt to write to or manage logfiles. Instead, each
running process writes its event stream, unbuffered, to &lt;code&gt;stdout&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;12-admin-processes&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#12-admin-processes&quot; aria-label=&quot;Anchor link for: 12-admin-processes&quot;&gt;🔗&lt;&#x2F;a&gt;12. Admin processes&lt;&#x2F;h2&gt;
&lt;p&gt;Run admin&#x2F;management tasks as one-off processes.&lt;&#x2F;p&gt;
&lt;p&gt;Twelve-factor strongly favors languages which provide a
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Read%E2%80%93eval%E2%80%93print_loop&quot;&gt;REPL&lt;&#x2F;a&gt;
shell out of the box, and which make it easy to run one-off scripts. In a local
deploy, developers invoke one-off admin processes by a direct shell command
inside the app’s checkout directory. In a production deploy, developers can
use ssh or other remote command execution mechanism provided by that deploy’s
execution environment to run such a process.&lt;&#x2F;p&gt;
&lt;p&gt;{{&amp;lt; youtube GZ4sAEUMOnM&amp;gt;}}&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>dnsmasq</title>
        <published>2016-09-30T12:27:32+02:00</published>
        <updated>2016-09-30T12:27:32+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/dnsmasq/"/>
        <id>https://nbari.com/dnsmasq/</id>
        
        <content type="html" xml:base="https://nbari.com/dnsmasq/">&lt;h1 id=&quot;dnsmasq-forwarding-zones&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#dnsmasq-forwarding-zones&quot; aria-label=&quot;Anchor link for: dnsmasq-forwarding-zones&quot;&gt;🔗&lt;&#x2F;a&gt;dnsmasq forwarding zones&lt;&#x2F;h1&gt;
&lt;p&gt;If you are using &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Dnsmasq&quot;&gt;dnsmasq&lt;&#x2F;a&gt;
and need to forward a DNS zone to a specific DNS server,
add this to your &lt;code&gt;&#x2F;etc&#x2F;dnsmasq.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;server=&#x2F;test&#x2F;10.10.0.4
&lt;&#x2F;span&gt;&lt;span&gt;server=&#x2F;sopas&#x2F;10.20.0.4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you don&#x27;t have the file &lt;code&gt;&#x2F;etc&#x2F;dnsmasq.conf&lt;&#x2F;code&gt; check for directory
&lt;code&gt;&#x2F;etc&#x2F;dnsmasq.d&lt;&#x2F;code&gt; and there create a file named &lt;code&gt;&#x2F;etc&#x2F;dnsmasq.d&#x2F;my-zones&lt;&#x2F;code&gt;
with the content of your zones&lt;&#x2F;p&gt;
&lt;p&gt;That means that requests made do &lt;code&gt;*.test&lt;&#x2F;code&gt; will be forwarded to 10.10.0.4
for &lt;code&gt;*.sopas&lt;&#x2F;code&gt; to 10.20.0.4 and so on&lt;&#x2F;p&gt;
&lt;p&gt;In case you have the file &lt;code&gt;&#x2F;etc&#x2F;resolv.conf&lt;&#x2F;code&gt; it probably contains a like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nameserver 127.0.0.1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That means that you &quot;probably&quot; you are using dnsmasq.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dnsmasq-test&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#dnsmasq-test&quot; aria-label=&quot;Anchor link for: dnsmasq-test&quot;&gt;🔗&lt;&#x2F;a&gt;dnsmasq --test&lt;&#x2F;h2&gt;
&lt;p&gt;To check configuration file(s) syntax, execute:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ dnsmasq --test
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After doing this, you can test by doing a ping or dig, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;dig @127.0.0.1 my-app.test +short
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;assuming 127.0.0.1 is running dnsmasq&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;To test that your domain can be resolved from the specified DNS&#x27;s:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;dig @10.10.0.4 domain.test +short
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A full &lt;code&gt;&#x2F;etc&#x2F;dnsmasq.conf&lt;&#x2F;code&gt; example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# send &amp;#39;domain=home.lan&amp;#39; in DHCP response so that machines
&lt;&#x2F;span&gt;&lt;span&gt;# configured through DHCP will come under &amp;#39;home.lan&amp;#39; domain.
&lt;&#x2F;span&gt;&lt;span&gt;domain=home.lan
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# will not read &#x2F;etc&#x2F;resolv.conf to get upsteram nameservers
&lt;&#x2F;span&gt;&lt;span&gt;no-resolv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Tells dnsmasq to forward anything with the domain of test to dns server 10.10.0.4
&lt;&#x2F;span&gt;&lt;span&gt;server=&#x2F;test&#x2F;10.10.0.4
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# upstream nameserver
&lt;&#x2F;span&gt;&lt;span&gt;server=4.2.2.2
&lt;&#x2F;span&gt;&lt;span&gt;server=8.8.8.8
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# Listen to requests only coming from the local machine
&lt;&#x2F;span&gt;&lt;span&gt;listen-address=127.0.0.1
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# cache 1000 names
&lt;&#x2F;span&gt;&lt;span&gt;cache-size=1000
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;find-the-conf-dir&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#find-the-conf-dir&quot; aria-label=&quot;Anchor link for: find-the-conf-dir&quot;&gt;🔗&lt;&#x2F;a&gt;Find the &lt;code&gt;--conf-dir&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;In some systems the &lt;code&gt;dnsmasq.conf&lt;&#x2F;code&gt; in not located in &lt;code&gt;&#x2F;etc&#x2F;dnsmasq.conf&lt;&#x2F;code&gt; to find
what &lt;code&gt;--config-dir&lt;&#x2F;code&gt; is used, you can try to do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ps -ef | grep -i dnsmasq
&lt;&#x2F;span&gt;&lt;span&gt;nbody    3655  1056  0 09:00 ?        00:00:00 &#x2F;usr&#x2F;sbin&#x2F;dnsmasq --no-resolv --keep-in-foreground --no-hosts --bind-interfaces --pid-file=&#x2F;var&#x2F;run&#x2F;NetworkManager&#x2F;dnsmasq.pid --listen-address=127.0.1.1 --cache-size=0 --conf-file=&#x2F;dev&#x2F;null --proxy-dnssec --enable-dbus=org.freedesktop.NetworkManager.dnsmasq --conf-dir=&#x2F;etc&#x2F;NetworkManager&#x2F;dnsmasq.d
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In this example the configuration directory is:  &lt;code&gt;--conf-dir=&#x2F;etc&#x2F;NetworkManager&#x2F;dnsmasq.d&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;For getting the command line arguments passed to a running process this can be used:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ ps -fp &amp;lt;pid&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or  if you have a &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Procfs&quot;&gt;procfs&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cat &#x2F;proc&#x2F;&amp;lt;pid&amp;gt;&#x2F;cmdline
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ssh rsa public key encryption</title>
        <published>2016-09-29T15:22:12+02:00</published>
        <updated>2016-09-29T15:22:12+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ssh-rsa-public-key-encryption/"/>
        <id>https://nbari.com/ssh-rsa-public-key-encryption/</id>
        
        <content type="html" xml:base="https://nbari.com/ssh-rsa-public-key-encryption/">&lt;p&gt;Encrypt a file using ssh public keys.&lt;&#x2F;p&gt;
&lt;p&gt;Create ssh public key in PEM format:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; ssh-keygen -f id_rsa.pub -e -m PKCS8 &amp;gt; id_rsa.pem.pub
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Use openssl to encrypt&#x2F;decrypt&lt;&#x2F;p&gt;
&lt;p&gt;Encrypt:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;openssl rsautl -encrypt -pubin -inkey ~&#x2F;.ssh&#x2F;id_rsa.pem.pub -ssl -in test.txt -out test.txt.enc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Decrypt:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;openssl rsautl -decrypt -inkey ~&#x2F;.ssh&#x2F;id_rsa -in test.txt.enc -out test.txt.enc.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>reset qnap virtual switch</title>
        <published>2016-09-28T22:53:22+02:00</published>
        <updated>2016-09-28T22:53:22+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/reset-qnap-virtual-switch/"/>
        <id>https://nbari.com/reset-qnap-virtual-switch/</id>
        
        <content type="html" xml:base="https://nbari.com/reset-qnap-virtual-switch/">&lt;p&gt;To reset the QNAP Virtualization Station, rename the file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;share&#x2F;CE_CACHEDEV1_DATA&#x2F;.qpkg&#x2F;.QKVM
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;to&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&#x2F;share&#x2F;CE_CACHEDEV1_DATA&#x2F;.qpkg&#x2F;.QKVM-backup
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;From the App center remove&#x2F;install the Virtualization Station.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>E437 terminal capability cm required</title>
        <published>2016-09-28T22:02:37+02:00</published>
        <updated>2016-09-28T22:02:37+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/e437-terminal-capability-cm-required/"/>
        <id>https://nbari.com/e437-terminal-capability-cm-required/</id>
        
        <content type="html" xml:base="https://nbari.com/e437-terminal-capability-cm-required/">&lt;p&gt;When trying to open vi&#x2F;vim the following message could appear:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;E437: terminal capability &amp;quot;cm&amp;quot; required&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To fix it type:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ export TERM=xterm
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aws uptime</title>
        <published>2016-09-27T16:12:36+02:00</published>
        <updated>2016-09-27T16:12:36+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-uptime/"/>
        <id>https://nbari.com/aws-uptime/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-uptime/">&lt;h1 id=&quot;aws-657-days&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#aws-657-days&quot; aria-label=&quot;Anchor link for: aws-657-days&quot;&gt;🔗&lt;&#x2F;a&gt;AWS &amp;gt;= 657 days&lt;&#x2F;h1&gt;
&lt;ul&gt;
&lt;li&gt;OS: FreeBSD 8.2&lt;&#x2F;li&gt;
&lt;li&gt;AWS: us-east-1&lt;&#x2F;li&gt;
&lt;li&gt;Type: t1.micro&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;aws-uname.png&quot; alt=&quot;uname&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;aws-uptime.png&quot; alt=&quot;uptime&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;aws-vnstat.png&quot; alt=&quot;vnstat&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;aws-top.png&quot; alt=&quot;top&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>debian parted</title>
        <published>2016-09-26T15:38:33+02:00</published>
        <updated>2016-09-26T15:38:33+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/debian-parted/"/>
        <id>https://nbari.com/debian-parted/</id>
        
        <content type="html" xml:base="https://nbari.com/debian-parted/">&lt;h1 id=&quot;resize-aws-debian-jessie&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#resize-aws-debian-jessie&quot; aria-label=&quot;Anchor link for: resize-aws-debian-jessie&quot;&gt;🔗&lt;&#x2F;a&gt;Resize AWS Debian Jessie&lt;&#x2F;h1&gt;
&lt;p&gt;Probably instance will have 8GB, to extend the disk, for example to 40GB do this:&lt;&#x2F;p&gt;
&lt;p&gt;Install parted:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ apt-get install parted
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ &#x2F;sbin&#x2F;parted ---pretend-input-tty &#x2F;dev&#x2F;xvda resizepart 1 yes 100%
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Resize2fs:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ resize2fs &#x2F;dev&#x2F;xvda1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Run &lt;code&gt;lsblk&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;root@ip-10-20-1-17:~# lsblk
&lt;&#x2F;span&gt;&lt;span&gt;NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
&lt;&#x2F;span&gt;&lt;span&gt;xvda    202:0    0  40G  0 disk
&lt;&#x2F;span&gt;&lt;span&gt;`-xvda1 202:1    0  40G  0 part &#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>CI &amp; CD</title>
        <published>2016-09-26T14:08:44+02:00</published>
        <updated>2016-09-26T14:08:44+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/ci-cd/"/>
        <id>https://nbari.com/ci-cd/</id>
        
        <content type="html" xml:base="https://nbari.com/ci-cd/">&lt;h1 id=&quot;release-pipeline-ci-cd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#release-pipeline-ci-cd&quot; aria-label=&quot;Anchor link for: release-pipeline-ci-cd&quot;&gt;🔗&lt;&#x2F;a&gt;Release pipeline CI &amp;amp; CD&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;ci-cd1.png&quot; alt=&quot;ci-cd1&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;ci-cd2.png&quot; alt=&quot;ci-cd2&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;ci-cd3.png&quot; alt=&quot;ci-cd3&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Raspberry Pi 1 Model B</title>
        <published>2016-09-24T15:25:11+02:00</published>
        <updated>2016-09-24T15:25:11+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/rpi/"/>
        <id>https://nbari.com/rpi/</id>
        
        <content type="html" xml:base="https://nbari.com/rpi/">&lt;h1 id=&quot;raspberry-pi-1-model-b-freebsd-wifi&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#raspberry-pi-1-model-b-freebsd-wifi&quot; aria-label=&quot;Anchor link for: raspberry-pi-1-model-b-freebsd-wifi&quot;&gt;🔗&lt;&#x2F;a&gt;Raspberry Pi 1 Model B, FreeBSD + wifi&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;rpi-b.jpg&quot; alt=&quot;RPI-b&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;cat &#x2F;var&#x2F;run&#x2F;dmesg.boot:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;text&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-text &quot;&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;KDB: debugger backends: ddb
&lt;&#x2F;span&gt;&lt;span&gt;KDB: current backend: ddb
&lt;&#x2F;span&gt;&lt;span&gt;Copyright (c) 1992-2016 The FreeBSD Project.
&lt;&#x2F;span&gt;&lt;span&gt;Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
&lt;&#x2F;span&gt;&lt;span&gt;	The Regents of the University of California. All rights reserved.
&lt;&#x2F;span&gt;&lt;span&gt;FreeBSD is a registered trademark of The FreeBSD Foundation.
&lt;&#x2F;span&gt;&lt;span&gt;FreeBSD 10.3-RELEASE #0 r297264: Fri Mar 25 08:01:14 UTC 2016
&lt;&#x2F;span&gt;&lt;span&gt;    root@releng1.nyi.freebsd.org:&#x2F;usr&#x2F;obj&#x2F;arm.armv6&#x2F;usr&#x2F;src&#x2F;sys&#x2F;RPI-B arm
&lt;&#x2F;span&gt;&lt;span&gt;FreeBSD clang version 3.4.1 (tags&#x2F;RELEASE_34&#x2F;dot1-final 208032) 20140512
&lt;&#x2F;span&gt;&lt;span&gt;VT: init without driver.
&lt;&#x2F;span&gt;&lt;span&gt;CPU: ARM1176JZ-S rev 7 (ARM11J core)
&lt;&#x2F;span&gt;&lt;span&gt; Supported features: ARM_ISA THUMB2 JAZELLE ARMv4 Security_Ext
&lt;&#x2F;span&gt;&lt;span&gt; WB enabled LABT branch prediction enabled
&lt;&#x2F;span&gt;&lt;span&gt;  16KB&#x2F;32B 4-way instruction cache
&lt;&#x2F;span&gt;&lt;span&gt;  16KB&#x2F;32B 4-way write-back-locking-C data cache
&lt;&#x2F;span&gt;&lt;span&gt;real memory  = 503312384 (479 MB)
&lt;&#x2F;span&gt;&lt;span&gt;avail memory = 483127296 (460 MB)
&lt;&#x2F;span&gt;&lt;span&gt;random: &amp;lt;Software, Yarrow&amp;gt; initialized
&lt;&#x2F;span&gt;&lt;span&gt;kbd0 at kbdmux0
&lt;&#x2F;span&gt;&lt;span&gt;ofwbus0: &amp;lt;Open Firmware Device Tree&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;simplebus0: &amp;lt;Flattened device tree simple bus&amp;gt; mem 0x20000000-0x20ffffff on ofwbus0
&lt;&#x2F;span&gt;&lt;span&gt;cpulist0: &amp;lt;Open Firmware CPU Group&amp;gt; on ofwbus0
&lt;&#x2F;span&gt;&lt;span&gt;cpu0: &amp;lt;Open Firmware CPU&amp;gt; on cpulist0
&lt;&#x2F;span&gt;&lt;span&gt;bcm2835_cpufreq0: &amp;lt;CPU Frequency Control&amp;gt; on cpu0
&lt;&#x2F;span&gt;&lt;span&gt;intc0: &amp;lt;BCM2835 Interrupt Controller&amp;gt; mem 0xb200-0xb3ff on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;systimer0: &amp;lt;BCM2835 System Timer&amp;gt; mem 0x3000-0x3fff irq 8,9,10,11 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;Event timer &amp;quot;BCM2835 Event Timer 3&amp;quot; frequency 1000000 Hz quality 1000
&lt;&#x2F;span&gt;&lt;span&gt;Timecounter &amp;quot;BCM2835 Timecounter&amp;quot; frequency 1000000 Hz quality 1000
&lt;&#x2F;span&gt;&lt;span&gt;bcmwd0: &amp;lt;BCM2708&#x2F;2835 Watchdog&amp;gt; mem 0x10001c-0x100027 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;gpio0: &amp;lt;BCM2708&#x2F;2835 GPIO controller&amp;gt; mem 0x200000-0x2000af irq 57,59,58,60 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;gpio0: read-only pins: 46,47,48,49,50,51,52,53.
&lt;&#x2F;span&gt;&lt;span&gt;gpio0: reserved pins: 48,49,50,51,52,53.
&lt;&#x2F;span&gt;&lt;span&gt;gpioc0: &amp;lt;GPIO controller&amp;gt; on gpio0
&lt;&#x2F;span&gt;&lt;span&gt;gpiobus0: &amp;lt;OFW GPIO bus&amp;gt; on gpio0
&lt;&#x2F;span&gt;&lt;span&gt;gpioled0: &amp;lt;GPIO led&amp;gt; at pin(s) 16 on gpiobus0
&lt;&#x2F;span&gt;&lt;span&gt;iichb0: &amp;lt;BCM2708&#x2F;2835 BSC controller&amp;gt; mem 0x205000-0x20501f irq 61 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;iicbus0: &amp;lt;OFW I2C bus&amp;gt; on iichb0
&lt;&#x2F;span&gt;&lt;span&gt;iic0: &amp;lt;I2C generic I&#x2F;O&amp;gt; on iicbus0
&lt;&#x2F;span&gt;&lt;span&gt;iichb1: &amp;lt;BCM2708&#x2F;2835 BSC controller&amp;gt; mem 0x804000-0x80401f irq 61 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;iicbus1: &amp;lt;OFW I2C bus&amp;gt; on iichb1
&lt;&#x2F;span&gt;&lt;span&gt;iic1: &amp;lt;I2C generic I&#x2F;O&amp;gt; on iicbus1
&lt;&#x2F;span&gt;&lt;span&gt;spi0: &amp;lt;BCM2708&#x2F;2835 SPI controller&amp;gt; mem 0x204000-0x20401f irq 62 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;spibus0: &amp;lt;OFW SPI bus&amp;gt; on spi0
&lt;&#x2F;span&gt;&lt;span&gt;bcm_dma0: &amp;lt;BCM2835 DMA Controller&amp;gt; mem 0x7000-0x7fff,0xe05000-0xe05fff irq 24,25,26,27,28,29,30,31,32,33,34,35,36 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;mbox0: &amp;lt;BCM2835 VideoCore Mailbox&amp;gt; mem 0xb880-0xb8bf irq 1 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;sdhci_bcm0: &amp;lt;Broadcom 2708 SDHCI controller&amp;gt; mem 0x300000-0x3000ff irq 70 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;mmc0: &amp;lt;MMC&#x2F;SD bus&amp;gt; on sdhci_bcm0
&lt;&#x2F;span&gt;&lt;span&gt;uart0: &amp;lt;PrimeCell UART (PL011)&amp;gt; mem 0x201000-0x201fff irq 65 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;uart0: console (115200,n,8,1)
&lt;&#x2F;span&gt;&lt;span&gt;dwcotg0: &amp;lt;DWC OTG 2.0 integrated USB controller&amp;gt; mem 0x980000-0x99ffff irq 17 on simplebus0
&lt;&#x2F;span&gt;&lt;span&gt;usbus0 on dwcotg0
&lt;&#x2F;span&gt;&lt;span&gt;fb0: &amp;lt;BCM2835 VT framebuffer driver&amp;gt; on ofwbus0
&lt;&#x2F;span&gt;&lt;span&gt;Timecounters tick every 10.000 msec
&lt;&#x2F;span&gt;&lt;span&gt;usbus0: 480Mbps High Speed USB v2.0
&lt;&#x2F;span&gt;&lt;span&gt;bcm2835_cpufreq0: ARM 700MHz, Core 250MHz, SDRAM 398MHz, Turbo OFF
&lt;&#x2F;span&gt;&lt;span&gt;ugen0.1: &amp;lt;DWCOTG&amp;gt; at usbus0
&lt;&#x2F;span&gt;&lt;span&gt;uhub0: &amp;lt;DWCOTG OTG Root HUB, class 9&#x2F;0, rev 2.00&#x2F;1.00, addr 1&amp;gt; on usbus0
&lt;&#x2F;span&gt;&lt;span&gt;mmcsd0: 4GB &amp;lt;SDHC SA04G 0.3 SN 9C4F1E62 MFG 05&#x2F;2009 by 2 TM&amp;gt; at mmc0 41.6MHz&#x2F;4bit&#x2F;65535-block
&lt;&#x2F;span&gt;&lt;span&gt;fb0: 656x416(0x0@0,0) 16bpp
&lt;&#x2F;span&gt;&lt;span&gt;fb0: pitch 1312, base 0x5e006000, screen_size 545792
&lt;&#x2F;span&gt;&lt;span&gt;fbd0 on fb0
&lt;&#x2F;span&gt;&lt;span&gt;VT: initialize with new VT driver &amp;quot;fb&amp;quot;.
&lt;&#x2F;span&gt;&lt;span&gt;random: unblocking device.
&lt;&#x2F;span&gt;&lt;span&gt;Root mount waiting for: usbus0
&lt;&#x2F;span&gt;&lt;span&gt;uhub0: 1 port with 1 removable, self powered
&lt;&#x2F;span&gt;&lt;span&gt;ugen0.2: &amp;lt;vendor 0x0424&amp;gt; at usbus0
&lt;&#x2F;span&gt;&lt;span&gt;uhub1: &amp;lt;vendor 0x0424 product 0x9512, class 9&#x2F;0, rev 2.00&#x2F;2.00, addr 2&amp;gt; on usbus0
&lt;&#x2F;span&gt;&lt;span&gt;uhub1: MTT enabled
&lt;&#x2F;span&gt;&lt;span&gt;Root mount waiting for: usbus0
&lt;&#x2F;span&gt;&lt;span&gt;uhub1: 3 ports with 2 removable, self powered
&lt;&#x2F;span&gt;&lt;span&gt;Root mount waiting for: usbus0
&lt;&#x2F;span&gt;&lt;span&gt;ugen0.3: &amp;lt;vendor 0x0424&amp;gt; at usbus0
&lt;&#x2F;span&gt;&lt;span&gt;smsc0: &amp;lt;vendor 0x0424 product 0xec00, rev 2.00&#x2F;2.00, addr 3&amp;gt; on usbus0
&lt;&#x2F;span&gt;&lt;span&gt;smsc0: chip 0xec00, rev. 0002
&lt;&#x2F;span&gt;&lt;span&gt;miibus0: &amp;lt;MII bus&amp;gt; on smsc0
&lt;&#x2F;span&gt;&lt;span&gt;ukphy0: &amp;lt;Generic IEEE 802.3u media interface&amp;gt; PHY 1 on miibus0
&lt;&#x2F;span&gt;&lt;span&gt;ukphy0:  none, 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
&lt;&#x2F;span&gt;&lt;span&gt;ue0: &amp;lt;USB Ethernet&amp;gt; on smsc0
&lt;&#x2F;span&gt;&lt;span&gt;ue0: Ethernet address: b8:27:ab:28:f0:f7
&lt;&#x2F;span&gt;&lt;span&gt;ugen0.4: &amp;lt;vendor 0x0bda&amp;gt; at usbus0
&lt;&#x2F;span&gt;&lt;span&gt;Trying to mount root from ufs:&#x2F;dev&#x2F;ufs&#x2F;rootfs [rw]...
&lt;&#x2F;span&gt;&lt;span&gt;warning: no time-of-day clock registered, system time will not be set accurately
&lt;&#x2F;span&gt;&lt;span&gt;smsc0: chip 0xec00, rev. 0002
&lt;&#x2F;span&gt;&lt;span&gt;ue0: link state changed to DOWN
&lt;&#x2F;span&gt;&lt;span&gt;urtwn0: &amp;lt;vendor 0x0bda product 0x8176, class 0&#x2F;0, rev 2.00&#x2F;2.00, addr 4&amp;gt; on usbus0
&lt;&#x2F;span&gt;&lt;span&gt;urtwn0: MAC&#x2F;BB RTL8188CUS, RF 6052 1T1R
&lt;&#x2F;span&gt;&lt;span&gt;wlan0: Ethernet address: e8:4a:05:35:47:12
&lt;&#x2F;span&gt;&lt;span&gt;wlan0: link state changed to UP
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;EDUP WiFi adapter mini USB dongle&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;urtwn0: &amp;lt;vendor 0x0bda product 0x8176, class 0&#x2F;0, rev 2.00&#x2F;2.00, addr 4&amp;gt; on usbus0
&lt;&#x2F;span&gt;&lt;span&gt;urtwn0: MAC&#x2F;BB RTL8188CUS, RF 6052 1T1R
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;edup802.11N.jpg&quot; alt=&quot;EDUP&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Download the FreeBSD SD card image from: https:&#x2F;&#x2F;www.freebsd.org&#x2F;where.html&lt;&#x2F;p&gt;
&lt;p&gt;Find your SD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ diskutil list
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Unmount the disk in this case disk3:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ diskutil unmountDisk &#x2F;dev&#x2F;disk3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Copy the img to the SD card:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo dd bs=1m if=freebsd.img of=&#x2F;dev&#x2F;rdisk3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;setup-the-wifi&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#setup-the-wifi&quot; aria-label=&quot;Anchor link for: setup-the-wifi&quot;&gt;🔗&lt;&#x2F;a&gt;Setup the Wifi&lt;&#x2F;h2&gt;
&lt;p&gt;Add to &lt;code&gt;&#x2F;boot&#x2F;loader.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;legal.realtek.license_ack=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit rc.conf:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;wlans_urtwn0=&amp;quot;wlan0&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;ifconfig_wlan0=&amp;quot;ssid your.sid WPA DHCP&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;wpa_supplicant.conf&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;network={
&lt;&#x2F;span&gt;&lt;span&gt;	ssid=&amp;quot;your.sid&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	scan_ssid=1
&lt;&#x2F;span&gt;&lt;span&gt;	proto=WPA RSN
&lt;&#x2F;span&gt;&lt;span&gt;	pairwise=CCMP
&lt;&#x2F;span&gt;&lt;span&gt;	psk=&amp;quot;*password*&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	priority=5
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Cron to ping every minute to the gateway:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;* * * * * &#x2F;sbin&#x2F;ping -c 3 192.168.1.1 &amp;gt; &#x2F;tmp&#x2F;ping.out
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;login&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#login&quot; aria-label=&quot;Anchor link for: login&quot;&gt;🔗&lt;&#x2F;a&gt;login&lt;&#x2F;h2&gt;
&lt;p&gt;Default user&#x2F;password:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;text&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-text &quot;&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;root:root
&lt;&#x2F;span&gt;&lt;span&gt;freebsd:freebsd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;freebsd&lt;&#x2F;code&gt; user can be used to ssh and latter &lt;code&gt;su&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>uptime 1000 days</title>
        <published>2016-09-21T21:59:28+02:00</published>
        <updated>2016-09-21T21:59:28+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/1000/"/>
        <id>https://nbari.com/1000/</id>
        
        <content type="html" xml:base="https://nbari.com/1000/">&lt;h1 id=&quot;uptime-1000-days&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#uptime-1000-days&quot; aria-label=&quot;Anchor link for: uptime-1000-days&quot;&gt;🔗&lt;&#x2F;a&gt;uptime &amp;gt;= 1000 days&lt;&#x2F;h1&gt;
&lt;ul&gt;
&lt;li&gt;OS: FreeBSD + ZFS + Jails&lt;&#x2F;li&gt;
&lt;li&gt;Server: Dell PowerEdge 2900 2xE5420 24GB RAM&lt;&#x2F;li&gt;
&lt;li&gt;Colocation: https:&#x2F;&#x2F;iweb.com&#x2F;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;uname-1000.png&quot; alt=&quot;uname&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;uptime-1000.png&quot; alt=&quot;uptime&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;vnstat-1000.png&quot; alt=&quot;vnstat&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;systat-vmstat.png&quot; alt=&quot;systat-vmstat&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;mfiutil-show-drives.png&quot; alt=&quot;mfiutil&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;top-1000.png&quot; alt=&quot;top&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;zpool-1000.png&quot; alt=&quot;zpool&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;dmesg-1000.png&quot; alt=&quot;dmesg&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;fans-1000.png&quot; alt=&quot;fans&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;power-supplies-1000.png&quot; alt=&quot;power-supplies&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;temperatures-1000.png&quot; alt=&quot;temperatures&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;voltages-1000.png&quot; alt=&quot;voltages&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;boot-post5.png&quot; alt=&quot;post-boot&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;img&#x2F;post0-socrates.png&quot; alt=&quot;post-socrates&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Time to reboot after 4 years:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;4-years.png&quot; alt=&quot;4 years&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I need to rebuild the RAID and can&#x27;t mix SAS drives with SATA on an living array:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;SAS-SATA.png&quot; alt=&quot;SAS-SATA&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>aws ec2 associate address</title>
        <published>2016-08-30T12:27:56+02:00</published>
        <updated>2016-08-30T12:27:56+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-ec2-associate-address/"/>
        <id>https://nbari.com/aws-ec2-associate-address/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-ec2-associate-address/">&lt;p&gt;If doing more than 100 requests implying the AWS CLI &lt;code&gt;associate-address&lt;&#x2F;code&gt;
sub-command, subsequent calls will cost &lt;strong&gt;$0.10&lt;&#x2F;strong&gt; each, so If doing to much
scale in&#x2F;out or have a monitoring&#x2F;automated tool that frecuenly make API calls using
this sub-command, the bill is not going to be cheap:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Scale in  (remove instances)&lt;&#x2F;li&gt;
&lt;li&gt;Scale out (add instances)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;aws-ec2-associate-address.png&quot; alt=&quot;additional remap&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Long story short, The &lt;code&gt;associate-address&lt;&#x2F;code&gt; sub-command, is an idempotent
operation, if you call &quot;aws ec2 associate-address&quot; with the same combination
of instance and EIP as the one currently in place, it won&#x27;t return an error;
instead, it will return and count as successful, regardless of whether an actual
allocation was done or not. Consequently, being it counted as a successful
request, you&#x27;ll be billed accordingly.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Idempotent operations take an important role, basically because you expect
that operation will not result in different results no matter how many times you
operate the idempotent operations. (Idempotent = Re-runnable).&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;This can be avoided by using private addresses and Load balancers, but in cases where
you need to deal with &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AWSEC2&#x2F;latest&#x2F;UserGuide&#x2F;elastic-ip-addresses-eip.html&quot;&gt;Elastic IP&#x27;s&lt;&#x2F;a&gt; this maybe an issue, mainly for monitoring scripts or periodic checks, or use the &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;cli&#x2F;latest&#x2F;reference&#x2F;ec2&#x2F;describe-addresses.html&quot;&gt;describe-address&lt;&#x2F;a&gt; and based on the result decide to use or not the &lt;code&gt;associate=address&lt;&#x2F;code&gt; sub-command&lt;&#x2F;p&gt;
&lt;h1 id=&quot;associate-address&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#associate-address&quot; aria-label=&quot;Anchor link for: associate-address&quot;&gt;🔗&lt;&#x2F;a&gt;associate-address&lt;&#x2F;h1&gt;
&lt;p&gt;Associates an Elastic IP address with an instance or a network interface. This
is an idempotent operation. If you perform the operation more than once, Amazon
EC2 doesn&#x27;t return an error, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ aws ec2 associate-address --instance-id i-24ea6379 --allocation-id eipalloc-b58d24da
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;quot;AssociationId&amp;quot;: &amp;quot;eipassoc-b7b117df&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;cli&#x2F;latest&#x2F;reference&#x2F;ec2&#x2F;associate-address.html&lt;&#x2F;p&gt;
&lt;p&gt;After running the previous command 100 times, the following requests will cost
each &lt;code&gt;$0.10 per Elastic IP address remap&lt;&#x2F;code&gt; either the association didn&#x27;t
succeed or if it was made to an existing IP.&lt;&#x2F;p&gt;
&lt;p&gt;Basically this means that if you have something that periodically checks your
instances and tries to remap or ensure that your elastic IP is pointing you a
desired instance:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;    10.0.1.3 ---&amp;gt; 58.41.28.32
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After doing 100 calls, the following request will cost &lt;strong&gt;$0.10&lt;&#x2F;strong&gt; each.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;auto-scaling&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#auto-scaling&quot; aria-label=&quot;Anchor link for: auto-scaling&quot;&gt;🔗&lt;&#x2F;a&gt;Auto scaling&lt;&#x2F;h2&gt;
&lt;p&gt;While creating an auto-scaling group, could be the need to map each of the
instances to use an Elastic IP&#x27;s, based on the scaling in&#x2F;out policies
this would imply that after reaching the 100 limit, each reboot will cost
&lt;strong&gt;$0.10&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;example-of-how-to-use-the-associate-address-from-a-startup-script&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#example-of-how-to-use-the-associate-address-from-a-startup-script&quot; aria-label=&quot;Anchor link for: example-of-how-to-use-the-associate-address-from-a-startup-script&quot;&gt;🔗&lt;&#x2F;a&gt;Example of how to use the &lt;code&gt;associate-address&lt;&#x2F;code&gt; from a startup script&lt;&#x2F;h1&gt;
&lt;pre data-lang=&quot;shell&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-shell &quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# KEYWORD: firstboot
&lt;&#x2F;span&gt;&lt;span&gt;# PROVIDE: set_hostname
&lt;&#x2F;span&gt;&lt;span&gt;# REQUIRE: NETWORKING
&lt;&#x2F;span&gt;&lt;span&gt;# BEFORE:  SERVERS
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;. &#x2F;etc&#x2F;rc.subr
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;name=&amp;quot;set_hostname&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;rcvar=set_hostname_enable
&lt;&#x2F;span&gt;&lt;span&gt;start_cmd=&amp;quot;set_hostname_run&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;stop_cmd=&amp;quot;:&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;export AWS_ACCESS_KEY_ID=aws_access_key_id
&lt;&#x2F;span&gt;&lt;span&gt;export AWS_SECRET_ACCESS_KEY=aws_secret_access_key
&lt;&#x2F;span&gt;&lt;span&gt;export AWS_DEFAULT_REGION=the_region
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;TAG_NAME=&amp;quot;Salt&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;INSTANCE_ID=$(&#x2F;usr&#x2F;local&#x2F;bin&#x2F;curl -s http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;instance-id)
&lt;&#x2F;span&gt;&lt;span&gt;REGION=$(&#x2F;usr&#x2F;local&#x2F;bin&#x2F;curl -s http:&#x2F;&#x2F;169.254.169.254&#x2F;latest&#x2F;meta-data&#x2F;placement&#x2F;availability-zone | sed &amp;#39;s&#x2F;.$&#x2F;&#x2F;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;TAG_VALUE=$(&#x2F;usr&#x2F;local&#x2F;bin&#x2F;aws ec2 describe-tags --filters &amp;quot;Name=resource-id,Values=${INSTANCE_ID}&amp;quot; &amp;quot;Name=key,Values=$TAG_NAME&amp;quot; --region ${REGION} --output=text | cut -f5)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;set_hostname_run()
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	hostname ${INSTANCE_ID}
&lt;&#x2F;span&gt;&lt;span&gt;	sysrc hostname=&amp;quot;${INSTANCE_ID}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	sysrc salt_minion_enable=&amp;quot;YES&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	echo ${INSTANCE_ID} &amp;gt; &#x2F;usr&#x2F;local&#x2F;etc&#x2F;salt&#x2F;minion_id
&lt;&#x2F;span&gt;&lt;span&gt;	pw usermod root -c &amp;quot;root on ${INSTANCE_ID}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	if [ ! -z &amp;quot;${TAG_VALUE}&amp;quot; ]; then
&lt;&#x2F;span&gt;&lt;span&gt;		echo &amp;quot;node_type: ${TAG_VALUE}&amp;quot; &amp;gt; &#x2F;usr&#x2F;local&#x2F;etc&#x2F;salt&#x2F;grains
&lt;&#x2F;span&gt;&lt;span&gt;	fi
&lt;&#x2F;span&gt;&lt;span&gt;	# allocate IP X.X.X.X
&lt;&#x2F;span&gt;&lt;span&gt;	&#x2F;usr&#x2F;local&#x2F;bin&#x2F;aws ec2 associate-address --instance-id $INSTANCE_ID --allocation-id eipalloc-xxxxxxxx
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;load_rc_config $name
&lt;&#x2F;span&gt;&lt;span&gt;run_rc_command &amp;quot;$1&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>letsencrypt + cloudfare using DNS</title>
        <published>2016-08-22T12:25:18+02:00</published>
        <updated>2016-08-22T12:25:18+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/letsencrypt-cloudfare/"/>
        <id>https://nbari.com/letsencrypt-cloudfare/</id>
        
        <content type="html" xml:base="https://nbari.com/letsencrypt-cloudfare/">&lt;p&gt;It&#x27;s not necessary to disable CloudFlare to use Let&#x27;s Encrypt,&lt;&#x2F;p&gt;
&lt;h1 id=&quot;installation&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#installation&quot; aria-label=&quot;Anchor link for: installation&quot;&gt;🔗&lt;&#x2F;a&gt;Installation:&lt;&#x2F;h1&gt;
&lt;p&gt;On mac os X:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git clone https:&#x2F;&#x2F;github.com&#x2F;lukas2511&#x2F;letsencrypt.sh
&lt;&#x2F;span&gt;&lt;span&gt;$ cd letsencrypt.sh
&lt;&#x2F;span&gt;&lt;span&gt;$ mkdir hooks
&lt;&#x2F;span&gt;&lt;span&gt;$ git clone https:&#x2F;&#x2F;github.com&#x2F;kappataumu&#x2F;letsencrypt-cloudflare-hook hooks&#x2F;cloudflare
&lt;&#x2F;span&gt;&lt;span&gt;$ pip install -r hooks&#x2F;cloudflare&#x2F;requirements-python-2.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;configuration&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configuration&quot; aria-label=&quot;Anchor link for: configuration&quot;&gt;🔗&lt;&#x2F;a&gt;Configuration&lt;&#x2F;h1&gt;
&lt;p&gt;Your account&#x27;s CloudFlare email and API key are expected to be in the environment:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ export CF_EMAIL=&amp;quot;your@email&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;$ export CF_KEY=&amp;quot;Global API Key&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;$ export CF_DNS_SERVERS=&amp;#39;8.8.8.8 8.8.4.4&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;usage&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#usage&quot; aria-label=&quot;Anchor link for: usage&quot;&gt;🔗&lt;&#x2F;a&gt;Usage&lt;&#x2F;h1&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ .&#x2F;letsencrypt.sh -c -d imap.ejemplo.org -t dns-01 -k &amp;quot;hooks&#x2F;cloudflare&#x2F;hook.py&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;# !! WARNING !! No main config file found, using default config!
&lt;&#x2F;span&gt;&lt;span&gt;#
&lt;&#x2F;span&gt;&lt;span&gt;Processing imap.ejemplo.org
&lt;&#x2F;span&gt;&lt;span&gt; + Signing domains...
&lt;&#x2F;span&gt;&lt;span&gt; + Generating private key...
&lt;&#x2F;span&gt;&lt;span&gt; + Generating signing request...
&lt;&#x2F;span&gt;&lt;span&gt; + Requesting challenge for imap.ejemplo.org...
&lt;&#x2F;span&gt;&lt;span&gt; + CloudFlare hook executing: deploy_challenge
&lt;&#x2F;span&gt;&lt;span&gt; + Settling down for 10s...
&lt;&#x2F;span&gt;&lt;span&gt; + DNS not propagated, waiting 30s...
&lt;&#x2F;span&gt;&lt;span&gt; + Responding to challenge for imap.ejemplo.org...
&lt;&#x2F;span&gt;&lt;span&gt; + CloudFlare hook executing: clean_challenge
&lt;&#x2F;span&gt;&lt;span&gt; + Challenge is valid!
&lt;&#x2F;span&gt;&lt;span&gt; + Requesting certificate...
&lt;&#x2F;span&gt;&lt;span&gt; + Checking certificate...
&lt;&#x2F;span&gt;&lt;span&gt; + Done!
&lt;&#x2F;span&gt;&lt;span&gt; + Creating fullchain.pem...
&lt;&#x2F;span&gt;&lt;span&gt; + CloudFlare hook executing: deploy_cert
&lt;&#x2F;span&gt;&lt;span&gt; + ssl_certificate: &#x2F;Users&#x2F;user&#x2F;projects&#x2F;letsencrypt.sh&#x2F;certs&#x2F;imap.ejemplo.org&#x2F;fullchain.pem
&lt;&#x2F;span&gt;&lt;span&gt; + ssl_certificate_key: &#x2F;Users&#x2F;user&#x2F;projects&#x2F;letsencrypt.sh&#x2F;certs&#x2F;imap.ejemplo.org&#x2F;privkey.pem
&lt;&#x2F;span&gt;&lt;span&gt; + Done!
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;automated-certificate-renewal&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#automated-certificate-renewal&quot; aria-label=&quot;Anchor link for: automated-certificate-renewal&quot;&gt;🔗&lt;&#x2F;a&gt;Automated certificate renewal&lt;&#x2F;h1&gt;
&lt;p&gt;Put all your domain names in letsencrypt.sh&#x2F;domains.txt, example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ejemplo.org www.ejemplo.org imap.ejemplo.org
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Create a &lt;code&gt;cron.sh&lt;&#x2F;code&gt; script:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;    #!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;    export CF_EMAIL=&amp;quot;your@email&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    export CF_KEY=&amp;quot;Global API Key&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    export CF_DNS_SERVERS=&amp;#39;8.8.8.8 8.8.4.4&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;path&#x2F;to&#x2F;&#x2F;letsencrypt.sh --cron --challenge dns-01 \
&lt;&#x2F;span&gt;&lt;span&gt;        --hook &amp;#39;&#x2F;path&#x2F;to&#x2F;letsencrypt.sh&#x2F;hooks&#x2F;cloudfare&#x2F;hook.py&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    service dovecot restart
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Add the cron:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;0 4 * * * &#x2F;path&#x2F;to&#x2F;cron.sh &amp;gt;&amp;gt; &#x2F;path&#x2F;to&#x2F;cron.log 2&amp;gt;&amp;amp;1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>error loading certificates pkg freebsd</title>
        <published>2016-08-20T12:44:47+02:00</published>
        <updated>2016-08-20T12:44:47+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/error-loading-certificates-pkg-freebsd/"/>
        <id>https://nbari.com/error-loading-certificates-pkg-freebsd/</id>
        
        <content type="html" xml:base="https://nbari.com/error-loading-certificates-pkg-freebsd/">&lt;p&gt;On an FreeBSD 9 while trying to install python or something else via pkg you may get this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;gt; pkg search python
&lt;&#x2F;span&gt;&lt;span&gt;pkg: Repository FreeBSD missing. &amp;#39;pkg update&amp;#39; required
&lt;&#x2F;span&gt;&lt;span&gt;pkg: Error loading trusted certificates
&lt;&#x2F;span&gt;&lt;span&gt;pkg: Error loading trusted certificates
&lt;&#x2F;span&gt;&lt;span&gt;pkg: Repository FreeBSD cannot be opened. &amp;#39;pkg update&amp;#39; required
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To solve it, fetch the current official repository key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir -p &#x2F;usr&#x2F;share&#x2F;keys&#x2F;pkg&#x2F;trusted &#x2F;usr&#x2F;share&#x2F;keys&#x2F;pkg&#x2F;revoked
&lt;&#x2F;span&gt;&lt;span&gt;svn export https:&#x2F;&#x2F;svn0.us-west.FreeBSD.org&#x2F;base&#x2F;head&#x2F;share&#x2F;keys&#x2F;pkg&#x2F;trusted&#x2F;pkg.freebsd.org.2013102301 &#x2F;usr&#x2F;share&#x2F;keys&#x2F;pkg&#x2F;trusted&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then set the repo:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;FreeBSD: {
&lt;&#x2F;span&gt;&lt;span&gt;  url: &amp;quot;pkg+http:&#x2F;&#x2F;pkg.FreeBSD.org&#x2F;${ABI}&#x2F;latest&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;  mirror_type: &amp;quot;srv&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;  signature_type: &amp;quot;fingerprints&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;  fingerprints: &amp;quot;&#x2F;usr&#x2F;share&#x2F;keys&#x2F;pkg&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;  enabled: yes
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, running &lt;code&gt;pkg udpate&lt;&#x2F;code&gt; should work:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pkg update
&lt;&#x2F;span&gt;&lt;span&gt;Updating FreeBSD repository catalogue...
&lt;&#x2F;span&gt;&lt;span&gt;[ca2.route.mx] Fetching meta.txz: 100%    968 B   1.0kB&#x2F;s    00:01
&lt;&#x2F;span&gt;&lt;span&gt;[ca2.route.mx] Fetching packagesite.txz: 100%    5 MiB   5.7MB&#x2F;s    00:01
&lt;&#x2F;span&gt;&lt;span&gt;Processing entries: 100%
&lt;&#x2F;span&gt;&lt;span&gt;FreeBSD repository update completed. 25174 packages processed.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>&#x2F;bin&#x2F;sh shell set</title>
        <published>2016-08-11T11:28:20+02:00</published>
        <updated>2016-08-11T11:28:20+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/shell-set/"/>
        <id>https://nbari.com/shell-set/</id>
        
        <content type="html" xml:base="https://nbari.com/shell-set/">&lt;p&gt;The Bourne shell (sh) is a shell, or command-line interpreter, for computer operating systems.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Bourne shell was the default shell for Unix Version 7. Most Unix-like
systems continue to have &#x2F;bin&#x2F;sh—which will be the Bourne shell, or a symbolic
link or hard link to a compatible shell even when other shells are used by most
users. https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Bourne_shell&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h1 id=&quot;set-options&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#set-options&quot; aria-label=&quot;Anchor link for: set-options&quot;&gt;🔗&lt;&#x2F;a&gt;set options&lt;&#x2F;h1&gt;
&lt;p&gt;In &lt;strong&gt;sh&lt;&#x2F;strong&gt;, the set built-in command has the following options:&lt;&#x2F;p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;option&lt;&#x2F;th&gt;&lt;th&gt;Description&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;--&lt;&#x2F;td&gt;&lt;td&gt;An option of a double-dash (&quot;--&quot;) signifies the end of an option list. This is primarily useful when values listed after the options will start with a dash themselves.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-a&lt;&#x2F;td&gt;&lt;td&gt;Mark variables which are modified or created for &quot;export&quot;; environment variables set in this way will be passed on to the environments of any subsequent commands.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-e&lt;&#x2F;td&gt;&lt;td&gt;Exit immediately if a command exits with a non-zero exit status.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-f&lt;&#x2F;td&gt;&lt;td&gt;Disable file name generation (globbing).&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-h&lt;&#x2F;td&gt;&lt;td&gt;Locate and remember function commands as functions are defined (function commands are normally located when the function is executed).&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-n&lt;&#x2F;td&gt;&lt;td&gt;Read commands but do not execute them.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-t&lt;&#x2F;td&gt;&lt;td&gt;Exit after reading and executing one command.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-u&lt;&#x2F;td&gt;&lt;td&gt;Treat unset variables as an error when substituting.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-v&lt;&#x2F;td&gt;&lt;td&gt;Print shell input lines as they are read.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td&gt;-x&lt;&#x2F;td&gt;&lt;td&gt;Print commands and their arguments as they are executed.&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;p&gt;Using &lt;code&gt;+&lt;&#x2F;code&gt; rather than &lt;code&gt;-&lt;&#x2F;code&gt; causes these flags to be turned off.&lt;&#x2F;p&gt;
&lt;p&gt;Example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-e
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-x
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt; 1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -eq&lt;&#x2F;span&gt;&lt;span&gt; 0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;never printed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>mosh</title>
        <published>2016-08-10T22:25:25+02:00</published>
        <updated>2016-08-10T22:25:25+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/mosh/"/>
        <id>https://nbari.com/mosh/</id>
        
        <content type="html" xml:base="https://nbari.com/mosh/">&lt;h1 id=&quot;mosh-mobile-shell&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#mosh-mobile-shell&quot; aria-label=&quot;Anchor link for: mosh-mobile-shell&quot;&gt;🔗&lt;&#x2F;a&gt;mosh (mobile shell)&lt;&#x2F;h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Remote terminal application that allows roaming, supports intermittent
connectivity, and provides intelligent local echo and line editing of user
keystrokes. Mosh is a replacement for SSH. It&#x27;s more robust and responsive,
especially over Wi-Fi, cellular, and long-distance links.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;how-to-install&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#how-to-install&quot; aria-label=&quot;Anchor link for: how-to-install&quot;&gt;🔗&lt;&#x2F;a&gt;How to install&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;server&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#server&quot; aria-label=&quot;Anchor link for: server&quot;&gt;🔗&lt;&#x2F;a&gt;server&lt;&#x2F;h3&gt;
&lt;p&gt;FreeBSD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pkg install net&#x2F;mosh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;login.conf&lt;&#x2F;code&gt; and add this to the default:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;    :charset=UTF-8:\
&lt;&#x2F;span&gt;&lt;span&gt;    :lang=en_US.UTF-8:\
&lt;&#x2F;span&gt;&lt;span&gt;    :setenv=LC_COLLATE=C:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After editing &lt;code&gt;&#x2F;etc&#x2F;locing.conf&lt;&#x2F;code&gt; run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ cap_mkdb &#x2F;etc&#x2F;login.conf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;client&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#client&quot; aria-label=&quot;Anchor link for: client&quot;&gt;🔗&lt;&#x2F;a&gt;Client&lt;&#x2F;h3&gt;
&lt;p&gt;In a mac OS X;&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ brew install mosh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;how-to-use&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#how-to-use&quot; aria-label=&quot;Anchor link for: how-to-use&quot;&gt;🔗&lt;&#x2F;a&gt;How to use&lt;&#x2F;h2&gt;
&lt;p&gt;Basically just type &lt;code&gt;mosh&lt;&#x2F;code&gt; instead of &lt;code&gt;ssh&lt;&#x2F;code&gt;, Mosh will log the user in via
SSH, then start a connection on a UDP port between 60000 and 61000., Mosh will
log the user in via SSH, then start a connection on a UDP port between 60000 and
61000.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh your.server.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh user@your.server.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Selecting SSH port:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh --ssh=&amp;quot;ssh -p 2222&amp;quot; your.server.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh user@your.server.tld --ssh=&amp;quot;ssh -p 2222&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Specify ssh key:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh --ssh=&amp;quot;ssh -i .&#x2F;identity&amp;quot; your.server.tld
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh --ssh=&amp;quot;ssh -i ~&#x2F;.ssh&#x2F;id_rsa_devops -p 2222&amp;quot; 192.168.1.4
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With tmux:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ mosh host --ssh=&amp;quot;ssh -p 3333&amp;quot; -- sh -c &amp;quot;tmux -2 attach -t $USER -d || tmux -2 new -s $USER&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;More info: https:&#x2F;&#x2F;mosh.mit.edu&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=XsIxNYl0oyU&quot;&gt;&lt;img src=&quot;http:&#x2F;&#x2F;img.youtube.com&#x2F;vi&#x2F;XsIxNYl0oyU&#x2F;0.jpg&quot; alt=&quot;mosh&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Why is unit testing important?</title>
        <published>2016-08-08T23:50:29+02:00</published>
        <updated>2016-08-08T23:50:29+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/unit-testing-important/"/>
        <id>https://nbari.com/unit-testing-important/</id>
        
        <content type="html" xml:base="https://nbari.com/unit-testing-important/">&lt;h1 id=&quot;why-is-unit-testing-important&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#why-is-unit-testing-important&quot; aria-label=&quot;Anchor link for: why-is-unit-testing-important&quot;&gt;🔗&lt;&#x2F;a&gt;Why is unit testing important?&lt;&#x2F;h1&gt;
&lt;p&gt;Short answer, to avoid something like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;n26.com&quot;&gt;&lt;img src=&quot;&#x2F;img&#x2F;n26.png&quot; alt=&quot;n26&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;The links are inverted&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Because of that error, people may not be available to download or install the proper app and therefore will lost credibility of the service.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;what-is-unit-testing&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#what-is-unit-testing&quot; aria-label=&quot;Anchor link for: what-is-unit-testing&quot;&gt;🔗&lt;&#x2F;a&gt;What is Unit Testing?&lt;&#x2F;h1&gt;
&lt;p&gt;In computer programming, unit testing is a software testing method by which
individual units of source code, sets of one or more computer program
modules together with associated control data, usage procedures, and
operating procedures, are tested to determine whether they are fit for use.
(https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Unit_testing)&lt;&#x2F;p&gt;
&lt;h1 id=&quot;the-bottom-line&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-bottom-line&quot; aria-label=&quot;Anchor link for: the-bottom-line&quot;&gt;🔗&lt;&#x2F;a&gt;The bottom line&lt;&#x2F;h1&gt;
&lt;p&gt;If unit testing is written and performed properly and consistently, software
projects are a lot more effective at delivering the correct solution in a
predictable and managed way.&lt;&#x2F;p&gt;
&lt;p&gt;http:&#x2F;&#x2F;bfy.tw&#x2F;77kx&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vim</title>
        <published>2016-08-08T11:27:26+02:00</published>
        <updated>2016-08-08T11:27:26+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/vim/"/>
        <id>https://nbari.com/vim/</id>
        
        <content type="html" xml:base="https://nbari.com/vim/">&lt;h2 id=&quot;quote-unquote-words&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#quote-unquote-words&quot; aria-label=&quot;Anchor link for: quote-unquote-words&quot;&gt;🔗&lt;&#x2F;a&gt;Quote&#x2F;unquote words:&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ciw&amp;#39;Ctrl+r&amp;quot;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;ciw &amp;#39;&amp;#39; Esc p
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;p&lt;&#x2F;code&gt; paste after the cursor, &lt;code&gt;P&lt;&#x2F;code&gt; will paste before the cursor.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;search-matches-gn-with-the-dot-command&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#search-matches-gn-with-the-dot-command&quot; aria-label=&quot;Anchor link for: search-matches-gn-with-the-dot-command&quot;&gt;🔗&lt;&#x2F;a&gt;Search matches (gn with the dot command)&lt;&#x2F;h2&gt;
&lt;p&gt;Suppose that we have a document containing several occurrences of the word
‘Normal’ and we’d like to change each occurrence to ‘Visual’. We can run &lt;code&gt;&#x2F;Normal&lt;&#x2F;code&gt;
to search for the word ‘Normal’, then type &lt;code&gt;cgnVisual&amp;lt;Esc&amp;gt;&lt;&#x2F;code&gt; to change the next
match to the word ‘Visual’ and by pressing &lt;code&gt;.&lt;&#x2F;code&gt; it will change the next match.
No need to use &lt;code&gt;n.&lt;&#x2F;code&gt; (http:&#x2F;&#x2F;vimcasts.org&#x2F;episodes&#x2F;operating-on-search-matches-using-gn&#x2F;)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;habit-breaking&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#habit-breaking&quot; aria-label=&quot;Anchor link for: habit-breaking&quot;&gt;🔗&lt;&#x2F;a&gt;Habit breaking&lt;&#x2F;h2&gt;
&lt;p&gt;Moving your Vim cursor around using the arrow keys is a bad habit, and like many
bad habits it’s a difficult one to break! Putting these lines into your vimrc can
help:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;nnoremap &amp;lt;up&amp;gt;    &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;nnoremap &amp;lt;down&amp;gt;  &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;nnoremap &amp;lt;left&amp;gt;  &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;nnoremap &amp;lt;right&amp;gt; &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;inoremap &amp;lt;up&amp;gt;    &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;inoremap &amp;lt;down&amp;gt;  &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;inoremap &amp;lt;left&amp;gt;  &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;inoremap &amp;lt;right&amp;gt; &amp;lt;nop&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This snippet causes each of the arrow keys to execute no operation, or in other
words: it disables them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;traversing-test-in-insert-mode&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#traversing-test-in-insert-mode&quot; aria-label=&quot;Anchor link for: traversing-test-in-insert-mode&quot;&gt;🔗&lt;&#x2F;a&gt;Traversing test in insert mode&lt;&#x2F;h2&gt;
&lt;p&gt;While in insert mode, use &lt;code&gt;Ctrl-O&lt;&#x2F;code&gt; to go to normal mode for just one command&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;CTRL-o h  move cursor left
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-o l  move cursor right
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-o j  move cursor down
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-o k  move cursor up
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-w    delete word to the left of cursor
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-o D  delete everything to the right of cursor
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-u    delete everything to the left of cursor
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-h    backspace&#x2F;delete
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-j    insert newline (easier than reaching for the return key)
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-t    indent current line
&lt;&#x2F;span&gt;&lt;span&gt;CTRL-d    un-indent current line
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;vim-tmux-layout&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#vim-tmux-layout&quot; aria-label=&quot;Anchor link for: vim-tmux-layout&quot;&gt;🔗&lt;&#x2F;a&gt;vim + tmux layout&lt;&#x2F;h2&gt;
&lt;p&gt;Screen shot while playing with immortal&lt;&#x2F;p&gt;
&lt;p&gt;![vim screen shot](&#x2F;img&#x2F;Screen Shot 2016-08-21 at 02.18.15.png)&lt;&#x2F;p&gt;
&lt;p&gt;No Axis&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;vim-clean-no-axis.png&quot; alt=&quot;vim screen shot clean&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>brew macos</title>
        <published>2016-07-30T16:35:57+02:00</published>
        <updated>2016-07-30T16:35:57+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/brew/"/>
        <id>https://nbari.com/brew/</id>
        
        <content type="html" xml:base="https://nbari.com/brew/">&lt;p&gt;&lt;a href=&quot;http:&#x2F;&#x2F;brew.sh&quot;&gt;Homebrew&lt;&#x2F;a&gt; installs the stuff you need that Apple didn’t.&lt;&#x2F;p&gt;
&lt;p&gt;For example to update python and avoid many SSL warnings:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install python
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To use an updated version of git on mac use:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install git --whitout-completion
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To update vim:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install vim --with-override-system-vi
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Updating zsh:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# check the zsh info
&lt;&#x2F;span&gt;&lt;span&gt;brew info zsh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# install zsh
&lt;&#x2F;span&gt;&lt;span&gt;brew install zsh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# add shell path
&lt;&#x2F;span&gt;&lt;span&gt;sudo vim &#x2F;etc&#x2F;shells
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# add the following line into the very end of the file(&#x2F;etc&#x2F;shells)
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;zsh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# change default shell
&lt;&#x2F;span&gt;&lt;span&gt;chsh -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;zsh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install some extra packages in oneline:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew install tree colordiff ack autossh ipcalc iperf par pstree git-flow-avh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To list all installed packges:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew list
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>asciinema</title>
        <published>2016-07-20T15:14:28+02:00</published>
        <updated>2016-07-20T15:14:28+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/asciinema/"/>
        <id>https://nbari.com/asciinema/</id>
        
        <content type="html" xml:base="https://nbari.com/asciinema/">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;&quot;&gt;asciinema&lt;&#x2F;a&gt; [as-kee-nuh-muh] is a free and open source solution for recording
terminal sessions and sharing them on the web.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;install&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#install&quot; aria-label=&quot;Anchor link for: install&quot;&gt;🔗&lt;&#x2F;a&gt;Install&lt;&#x2F;h2&gt;
&lt;p&gt;FreeBSD:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;pkg install asciiname
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;OS X:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;brew update &amp;amp;&amp;amp; brew install asciinema
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;recording-tmux-session&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#recording-tmux-session&quot; aria-label=&quot;Anchor link for: recording-tmux-session&quot;&gt;🔗&lt;&#x2F;a&gt;Recording tmux session&lt;&#x2F;h2&gt;
&lt;p&gt;Setup your tmux session create windows, splits, start processes in them:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;tmux new -s name
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Detach (prefix+d) and start recording with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;asciinema rec -c &amp;quot;tmux attach -t name&amp;quot; &#x2F;tmp&#x2F;play.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When you&#x27;re finished, just detach the session again and play it with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;asciinema play &#x2F;tmp&#x2F;play.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;upload&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#upload&quot; aria-label=&quot;Anchor link for: upload&quot;&gt;🔗&lt;&#x2F;a&gt;upload&lt;&#x2F;h2&gt;
&lt;p&gt;To upload the video&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; asciinema upload &#x2F;tmp&#x2F;play.json
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To claim ownership:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt; asciinema auth
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Example file &lt;a href=&quot;&#x2F;json&#x2F;unicorn.json&quot;&gt;unicorn.json&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Video: &lt;a href=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;85f9a4xefp83wzcw2bmiby2rn&quot;&gt;&lt;img src=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;85f9a4xefp83wzcw2bmiby2rn.png&quot; alt=&quot;asciicast&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Example file &lt;a href=&quot;&#x2F;json&#x2F;immortal.json&quot;&gt;immortal.json&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Video: &lt;a href=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;eii21k6u0h8oat56a1mrfwgti&quot;&gt;&lt;img src=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;eii21k6u0h8oat56a1mrfwgti.png&quot; alt=&quot;asciicast&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Example file &lt;a href=&quot;&#x2F;json&#x2F;runit.json&quot;&gt;runit.json&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Video: &lt;a href=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;8avsk45wk62r9ruorsl49nnjj&quot;&gt;&lt;img src=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;8avsk45wk62r9ruorsl49nnjj.png&quot; alt=&quot;asciicast&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Example file &lt;a href=&quot;&#x2F;json&#x2F;immortal-logger.json&quot;&gt;immortal-logger.json&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Video: &lt;a href=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;80376&quot;&gt;&lt;img src=&quot;https:&#x2F;&#x2F;asciinema.org&#x2F;a&#x2F;80376.png&quot; alt=&quot;asciicast&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>virtualbox-el-capitan</title>
        <published>2016-07-12T14:18:43+02:00</published>
        <updated>2016-07-12T14:18:43+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/virtualbox-el-capitan/"/>
        <id>https://nbari.com/virtualbox-el-capitan/</id>
        
        <content type="html" xml:base="https://nbari.com/virtualbox-el-capitan/">&lt;p&gt;When trying to install &lt;a href=&quot;https:&#x2F;&#x2F;www.virtualbox.org&#x2F;&quot;&gt;Virtualbox&lt;&#x2F;a&gt; in OS X El capitan you may notice it hangs at Verifying &quot;VirtualBox.pkg&quot;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;verifying-virtualbox.png&quot; alt=&quot;verify&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can by pass the warning trying to install via command line with:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ sudo installer -package &#x2F;Volumes&#x2F;VirtualBox&#x2F;VirtualBox.pkg -target &#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Simulate cron environment</title>
        <published>2016-07-11T14:23:00+02:00</published>
        <updated>2016-07-11T14:23:00+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/cron/"/>
        <id>https://nbari.com/cron/</id>
        
        <content type="html" xml:base="https://nbari.com/cron/">&lt;p&gt;Add this to your cron:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;* * * * * env &amp;gt; ~&#x2F;cronenv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then start a new shell using does environments:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;env - `cat ~&#x2F;cronenv` &#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>L2TP over IPSec</title>
        <published>2016-06-26T14:21:08+02:00</published>
        <updated>2016-06-26T14:21:08+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/l2tp-ipsec/"/>
        <id>https://nbari.com/l2tp-ipsec/</id>
        
        <content type="html" xml:base="https://nbari.com/l2tp-ipsec/">&lt;h1 id=&quot;l2tp&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#l2tp&quot; aria-label=&quot;Anchor link for: l2tp&quot;&gt;🔗&lt;&#x2F;a&gt;L2TP&lt;&#x2F;h1&gt;
&lt;p&gt;Layer 2 Tunneling Protocol (L2TP) is a tunneling protocol used to support
virtual private networks (VPNs) or as part of the delivery of services by ISPs.
It does not provide any encryption or confidentiality by itself. Rather, it
relies on an encryption protocol that it passes within the tunnel to provide
privacy.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;l2tp-ipsec&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#l2tp-ipsec&quot; aria-label=&quot;Anchor link for: l2tp-ipsec&quot;&gt;🔗&lt;&#x2F;a&gt;L2TP&#x2F;IPSec&lt;&#x2F;h1&gt;
&lt;p&gt;Because of the lack of confidentiality inherent in the L2TP protocol, it is
often implemented along with IPsec. This is referred to as L2TP&#x2F;IPsec, and is
standardized in IETF RFC 3193.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Layer_2_Tunneling_Protocol&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h1 id=&quot;setting-up-an-l2tp-ipsec-freebsd-server&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#setting-up-an-l2tp-ipsec-freebsd-server&quot; aria-label=&quot;Anchor link for: setting-up-an-l2tp-ipsec-freebsd-server&quot;&gt;🔗&lt;&#x2F;a&gt;Setting up an L2TP&#x2F;IPSec FreeBSD server&lt;&#x2F;h1&gt;
&lt;p&gt;Requirements:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;mpd.sourceforge.net&#x2F;&quot;&gt;mpd5&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.strongswan.org&#x2F;&quot;&gt;strongswan&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.freshports.org&#x2F;net-mgmt&#x2F;ng_ipacct&#x2F;&quot;&gt;ng_ipacct&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;firewalls-pf.html&quot;&gt;pf&lt;&#x2F;a&gt; (for doing NAT)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Install mpd5:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pkg install mpd5
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Install strongswan:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pkg install strongswan
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;setting-up-mpd&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#setting-up-mpd&quot; aria-label=&quot;Anchor link for: setting-up-mpd&quot;&gt;🔗&lt;&#x2F;a&gt;Setting up mpd&lt;&#x2F;h2&gt;
&lt;p&gt;Example of an &lt;code&gt;mpd.conf&lt;&#x2F;code&gt;, clients obtain an IP on the &lt;code&gt;172.16.13.0&#x2F;24&lt;&#x2F;code&gt;
segment.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;startup:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# set user operations secret_changeme admin
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;default:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;load&lt;&#x2F;span&gt;&lt;span&gt; l2tp_server
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;l2tp_server:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Define dynamic IP address pool.
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; ippool add pool1 172.16.13.2 172.16.13.254
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Create clonable bundle template named B
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;create&lt;&#x2F;span&gt;&lt;span&gt; bundle template VPN
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; iface enable netflow-in
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; iface enable netflow-out
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; iface enable ipacct
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; iface enable proxy-arp
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; iface enable tcpmssfix
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; ipcp yes vjcomp
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Specify IP address pool for dynamic assigment.
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; ipcp ranges 172.16.13.1&#x2F;32 ippool pool1
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; ipcp dns 8.8.8.8
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# The five lines below enable Microsoft Point-to-Point encryption
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# (MPPE) using the ng_mppc(8) netgraph node type.
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; bundle enable compression
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; ccp yes mppc
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; mppc yes e40
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; mppc yes e128
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; mppc yes stateless
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Create clonable link template named L
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;create&lt;&#x2F;span&gt;&lt;span&gt; link template L l2tp
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Set bundle template to use
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link action bundle VPN
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link enable multilink
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link yes acfcomp protocomp
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link no pap chap eap
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link enable chap-msv2
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link enable chap
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link keep-alive 10 60
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# We reducing link mtu to avoid GRE packet fragmentation.
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link mtu 1400
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Configure l2tp
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; l2tp self 0.0.0.0
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; l2tp enable length
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; l2tp disable dataseq
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Allow to accept calls
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; link enable incoming
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;An example of the &lt;code&gt;mpd.secret&lt;&#x2F;code&gt; file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;username1 password 172.16.13.3
&lt;&#x2F;span&gt;&lt;span&gt;username2 password
&lt;&#x2F;span&gt;&lt;span&gt;* !&#x2F;external&#x2F;script
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;strongswan&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#strongswan&quot; aria-label=&quot;Anchor link for: strongswan&quot;&gt;🔗&lt;&#x2F;a&gt;strongswan&lt;&#x2F;h2&gt;
&lt;p&gt;The &lt;code&gt;ipsec.conf&lt;&#x2F;code&gt; file:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt; setup
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strictcrlpolicy&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;no
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;conn &lt;&#x2F;span&gt;&lt;span&gt;%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;default
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ikelifetime&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;8h
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ike&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aes256-sha1-modp1024!
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;esp&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;aes256-sha1!
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dpdaction&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;clear
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dpddelay&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;300s
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rekey&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;no
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;left&lt;&#x2F;span&gt;&lt;span&gt;=%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;any
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;leftsubnet&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&#x2F;0
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;leftid&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;@vpn.test
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;leftcert&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;vpnHostCert.pem
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;right&lt;&#x2F;span&gt;&lt;span&gt;=%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;any
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;auto&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;add
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;conn&lt;&#x2F;span&gt;&lt;span&gt; L2TP-IPSec-PSK
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;transport
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;leftauth&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;psk
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rightauth&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;psk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;ipsec.secrets&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;: PSK &amp;quot;the-shared-secret-key&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;pf-nat&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#pf-nat&quot; aria-label=&quot;Anchor link for: pf-nat&quot;&gt;🔗&lt;&#x2F;a&gt;PF NAT&lt;&#x2F;h3&gt;
&lt;p&gt;High are the changes you will require to use
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Network_address_translation&quot;&gt;NAT&lt;&#x2F;a&gt;
in that case this configuration may help:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;scrub&lt;&#x2F;span&gt;&lt;span&gt; in all
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nat&lt;&#x2F;span&gt;&lt;span&gt; on xn0 from !xn0:0 to any -&amp;gt; (xn0)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; skip on lo
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pass&lt;&#x2F;span&gt;&lt;span&gt; all
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>openssl cheat sheet</title>
        <published>2016-06-22T13:37:44+02:00</published>
        <updated>2016-06-22T13:37:44+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/openssl-cheat-sheet/"/>
        <id>https://nbari.com/openssl-cheat-sheet/</id>
        
        <content type="html" xml:base="https://nbari.com/openssl-cheat-sheet/">&lt;p&gt;To display the contents of a &lt;a href=&quot;http:&#x2F;&#x2F;serverfault.com&#x2F;a&#x2F;9717&#x2F;94862&quot;&gt;PEM&lt;&#x2F;a&gt; formatted certificate:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl x509 -in the-cert.pm -text
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Connecting to the server:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl s_client -showcerts -connect imap.ejemplo.org:993 &amp;lt; &#x2F;dev&#x2F;null
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test smtp 587:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl s_client -host smtp.gmail.com -port 587 -starttls smtp -crlf
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Checking the Validity Date:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl s_client -showcerts -connect nbari.com:443 2&amp;gt;&#x2F;dev&#x2F;null | openssl x509 -noout -dates
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Encode base64 a file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl enc -base64 -in file.txt -out file.txt.enc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;if no ssl: python -m base64 -d&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Create pair of keys (self signed certificate):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl req -x509 -newkey rsa:4096 -sha256 -nodes -keyout example.key -out example.crt -subj &amp;quot;&#x2F;CN=example.com&amp;quot; -days 3650
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Test speed of signatures:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl speed sha256 sha512
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Change pass-phrase of a key, you will need to specify the old pass-phrase and
then spedify a new one:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl rsa -des3 -in example.key -out example.key.new
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;encrypt-decrypt&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#encrypt-decrypt&quot; aria-label=&quot;Anchor link for: encrypt-decrypt&quot;&gt;🔗&lt;&#x2F;a&gt;encrypt &#x2F; decrypt&lt;&#x2F;h2&gt;
&lt;p&gt;Encrypt:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl aes-256-cbc -a -salt -in file.txt -out file.txt.enc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Decrypt:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ openssl aes-256-cbc -d -a -in file.txt.enc -out file.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>FreeBSD jails</title>
        <published>2016-06-19T17:24:05+02:00</published>
        <updated>2016-06-19T17:24:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/jails/"/>
        <id>https://nbari.com/jails/</id>
        
        <content type="html" xml:base="https://nbari.com/jails/">&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;jails.html&quot;&gt;FreeBSD jail&lt;&#x2F;a&gt; mechanism
is an implementation of &lt;em&gt;operating system-level virtualization&lt;&#x2F;em&gt; that allows
administrators to partition a FreeBSD-based computer system into several
independent mini-systems called jails.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Operating-system-level virtualization&lt;&#x2F;strong&gt; is a server virtualization method in which
the kernel of an operating system allows the existence of multiple isolated
user-space instances, instead of just one. Such instances, which are sometimes
called containers, software containers, virtualization engines (VEs) or jails
(FreeBSD jail or chroot jail), may look and feel like a real server from the
point of view of its owners and users.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;On Unix-like operating systems, this technology can be seen as an advanced
implementation of the standard chroot mechanism. In addition to isolation
mechanisms, the kernel often provides resource-management features to limit the
impact of one container&#x27;s activities on other containers.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;freebsd-the-big-picture&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#freebsd-the-big-picture&quot; aria-label=&quot;Anchor link for: freebsd-the-big-picture&quot;&gt;🔗&lt;&#x2F;a&gt;FreeBSD the big picture&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;jails.png&quot; alt=&quot;jails&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;freebsd-jails-docker&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#freebsd-jails-docker&quot; aria-label=&quot;Anchor link for: freebsd-jails-docker&quot;&gt;🔗&lt;&#x2F;a&gt;FreeBSD jails != docker&lt;&#x2F;h1&gt;
&lt;p&gt;Jails are rock solid proven technology used by
&lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;nutshell.html&quot;&gt;many companies&lt;&#x2F;a&gt;
the workflow and concept is very different from &lt;a href=&quot;http:&#x2F;&#x2F;www.docker.com&quot;&gt;docker&lt;&#x2F;a&gt;
and because of that is not possible to do a comparison between them.&lt;&#x2F;p&gt;
&lt;p&gt;Try to compare them is difficult and unfair, for example, doing a very bad
analogy I would say that &lt;a href=&quot;http:&#x2F;&#x2F;kubernetes.io&#x2F;&quot;&gt;kubernetes&lt;&#x2F;a&gt; + Docker is
something similar to what you get when using &lt;strong&gt;jails&lt;&#x2F;strong&gt; on the Linux ecosystem,
not even mentioning the &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;zfs.html&quot;&gt;ZFS&lt;&#x2F;a&gt;
capabilities and full network stack support available within a jail.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;creating-a-jail&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#creating-a-jail&quot; aria-label=&quot;Anchor link for: creating-a-jail&quot;&gt;🔗&lt;&#x2F;a&gt;Creating a jail&lt;&#x2F;h1&gt;
&lt;p&gt;Create the dataset for the jails:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# zfs create -o mountpoint=&#x2F;jails tank&#x2F;jails
&lt;&#x2F;span&gt;&lt;span&gt;# zfs create tank&#x2F;jails&#x2F;base
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OSI model</title>
        <published>2016-06-19T01:14:50+02:00</published>
        <updated>2016-06-19T01:14:50+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/osi/"/>
        <id>https://nbari.com/osi/</id>
        
        <content type="html" xml:base="https://nbari.com/osi/">&lt;blockquote&gt;
&lt;p&gt;The Open Systems Interconnection model (OSI model) is a conceptual model
that characterizes and standardizes the communication functions of a
telecommunication or computing system without regard to their underlying
internal structure and technology.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;osi.gif&quot; alt=&quot;osi model&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_network_protocols_(OSI_model)&quot;&gt;List of newtork protocols&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;osi-example.png&quot; alt=&quot;example&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.haproxy.org&#x2F;&quot;&gt;HAProxy&lt;&#x2F;a&gt; can work as a Load Balancer in Layer 4 (tcp mode) and Layer 7.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;haproxy_layers.png&quot; alt=&quot;HAProxy&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Port knocking</title>
        <published>2016-06-19T01:02:10+02:00</published>
        <updated>2016-06-19T01:02:10+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/portknocking/"/>
        <id>https://nbari.com/portknocking/</id>
        
        <content type="html" xml:base="https://nbari.com/portknocking/">&lt;blockquote&gt;
&lt;p&gt;In computer networking, port knocking is a method of externally opening ports on
a firewall by generating a connection attempt on a set of prespecified closed
ports. Once a correct sequence of connection attempts is received, the firewall
rules are dynamically modified to allow the host which sent the connection
attempts to connect over specific port(s).&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;For example, Using &lt;a href=&quot;https:&#x2F;&#x2F;www.freebsd.org&#x2F;doc&#x2F;handbook&#x2F;firewalls-pf.html&quot;&gt;PF&lt;&#x2F;a&gt; on &lt;a href=&quot;http:&#x2F;&#x2F;www.freebsd.org&quot;&gt;FreeBSD&lt;&#x2F;a&gt; to only open &lt;code&gt;port 22&lt;&#x2F;code&gt; after X number of
attempts to connect on &lt;code&gt;port 1234&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Table for allowed IPs - gets auto populated via portknocking
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;table &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;portknock_ssh&amp;gt; persist
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;block&lt;&#x2F;span&gt;&lt;span&gt; drop &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# block policy
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Allow everyone to hit &amp;#39;any&amp;#39; on port &amp;#39;1234&amp;#39; - pf proxies tcp connection
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#  [if not using &amp;#39;synproxy&amp;#39;, the connection is never established to
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#    &amp;#39;overload&amp;#39; the rule]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#  5 attempts in 15 seconds
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pass&lt;&#x2F;span&gt;&lt;span&gt; in log quick proto tcp from any to any port {1234} synproxy state \
&lt;&#x2F;span&gt;&lt;span&gt;  (max-src-conn-rate 5&#x2F;15, overload &amp;lt;portknock_ssh&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#Allow IPs that have been &amp;#39;overload&amp;#39;ed into the portknock_ssh table
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pass&lt;&#x2F;span&gt;&lt;span&gt; in log quick proto tcp from {&amp;lt;portknock_ssh&amp;gt;} to any port {ssh}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Allow out trafic
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pass&lt;&#x2F;span&gt;&lt;span&gt; out all
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In case you want to use this on an AWS instance using also VPN (NAT):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;table &amp;lt;portknock_ssh&amp;gt; persist
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;scrub in all
&lt;&#x2F;span&gt;&lt;span&gt;nat on xn0 from !xn0:0 to any -&amp;gt; (xn0)
&lt;&#x2F;span&gt;&lt;span&gt;set skip on {lo0, tun0, ng0}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;pass in log quick proto tcp from any to any port {1234} synproxy state \
&lt;&#x2F;span&gt;&lt;span&gt;  (max-src-conn-rate 5&#x2F;15, overload &amp;lt;portknock_ssh&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt;pass in log quick proto tcp from {&amp;lt;portknock_ssh&amp;gt;} to any port {ssh}
&lt;&#x2F;span&gt;&lt;span&gt;block in quick on xn0 proto tcp to port ssh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;pass all
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;An entry in &lt;code&gt;&#x2F;etc&#x2F;crontab&lt;&#x2F;code&gt; or a expiretable could be used to expire all IP&#x27;s
in that table that have not been referenced in 60 seconds:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;* * * * *       root    &#x2F;sbin&#x2F;pfctl -vt portknock_ssh -T expire 60
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h1 id=&quot;how-to-nock&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#how-to-nock&quot; aria-label=&quot;Anchor link for: how-to-nock&quot;&gt;🔗&lt;&#x2F;a&gt;how to nock&lt;&#x2F;h1&gt;
&lt;p&gt;Via terminal:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ for i in {1..10}
&lt;&#x2F;span&gt;&lt;span&gt;nc -z host.tld 1234
&lt;&#x2F;span&gt;&lt;span&gt;Connection to host.tld port 1234 [tcp&#x2F;search-agent] succeeded!
&lt;&#x2F;span&gt;&lt;span&gt;Connection to host.tld port 1234 [tcp&#x2F;search-agent] succeeded!
&lt;&#x2F;span&gt;&lt;span&gt;Connection to host.tld port 1234 [tcp&#x2F;search-agent] succeeded!
&lt;&#x2F;span&gt;&lt;span&gt;Connection to host.tld port 1234 [tcp&#x2F;search-agent] succeeded!
&lt;&#x2F;span&gt;&lt;span&gt;Connection to host.tld port 1234 [tcp&#x2F;search-agent] succeeded!
&lt;&#x2F;span&gt;&lt;span&gt;..
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On the server to see the current IP on the &lt;code&gt;portknock_ssh&lt;&#x2F;code&gt; table:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ pfctl -t portknock_ssh -T show
&lt;&#x2F;span&gt;&lt;span&gt;96.129.22.100
&lt;&#x2F;span&gt;&lt;span&gt;10.0.2.34
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Hugo hosting on github using 2 repositories</title>
        <published>2016-06-19T00:45:05+02:00</published>
        <updated>2016-06-19T00:45:05+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/hugo-hosting/"/>
        <id>https://nbari.com/hugo-hosting/</id>
        
        <content type="html" xml:base="https://nbari.com/hugo-hosting/">&lt;p&gt;This setup requires two separate repos, one for Hugo&#x27;s content, and a second one
that will be a git submodule with the &lt;code&gt;public&lt;&#x2F;code&gt; folder&#x27;s content in it.&lt;&#x2F;p&gt;
&lt;p&gt;Step by step:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Create on Github &lt;code&gt;&amp;lt;your-project&amp;gt;-hugo&lt;&#x2F;code&gt; repository (it will host Hugo’s
content)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Create on GitHub &lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;&#x2F;code&gt; repository (it will host the public
folder: the static website)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;git clone &amp;lt;your-project&amp;gt;-hugo-url &amp;amp;&amp;amp; cd &amp;lt;your-project&amp;gt;-hugo&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Make your website work locally (hugo server)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Once you are happy with the results, &lt;code&gt;Ctrl+C&lt;&#x2F;code&gt; (kill server) and &lt;code&gt;rm -rf public&lt;&#x2F;code&gt;
(don’t worry, it can always be regenerated with hugo)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;git submodule add -b master git@github.com:&amp;lt;username&amp;gt;&#x2F;&amp;lt;username&amp;gt;.github.io.git public&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Almost done: add a &lt;code&gt;deploy.sh&lt;&#x2F;code&gt; script to help you (and make it executable: chmod +x deploy.sh):&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;If submodule already exist you can do this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ git submodule init
&lt;&#x2F;span&gt;&lt;span&gt;$ git pull --recurse-submodules
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;deploy.sh&lt;&#x2F;code&gt; script:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;sh
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;\033[0;32mDeploying updates to GitHub...\033[0m&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Build the project.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hugo &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# if using a theme, replace by `hugo -t &amp;lt;yourtheme&amp;gt;`
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Go To Public folder
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; public
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Add changes to git.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -A
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Commit changes.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;msg&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;rebuilding site `&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;date&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;# -eq&lt;&#x2F;span&gt;&lt;span&gt; 1 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;msg&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; commit&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -m &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;msg&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Push source and build repos.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; push origin master
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Come Back
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; ..
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Run &lt;code&gt;.&#x2F;deploy.sh &quot;Your optional commit message&quot;&lt;&#x2F;code&gt; to send changes to
&lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;&#x2F;code&gt; (careful, you may also want to commit changes on the
&lt;code&gt;&amp;lt;your-project&amp;gt;-hugo&lt;&#x2F;code&gt; repo).&lt;&#x2F;p&gt;
&lt;p&gt;Source: https:&#x2F;&#x2F;gohugo.io&#x2F;tutorials&#x2F;github-pages-blog&#x2F;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>AWS VPC</title>
        <published>2016-06-18T19:44:31+02:00</published>
        <updated>2016-06-18T19:44:31+02:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://nbari.com/aws-vpc/"/>
        <id>https://nbari.com/aws-vpc/</id>
        
        <content type="html" xml:base="https://nbari.com/aws-vpc/">&lt;blockquote&gt;
&lt;p&gt;Amazon Virtual Private Cloud (Amazon VPC) enables you to launch Amazon Web
Services (AWS) resources into a virtual network that you&#x27;ve defined. This
virtual network closely resembles a traditional network that you&#x27;d operate in
your own data center, with the benefits of using the scalable infrastructure of
AWS.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;vpc.png&quot; alt=&quot;VPC&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;things-to-keep-in-mind&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#things-to-keep-in-mind&quot; aria-label=&quot;Anchor link for: things-to-keep-in-mind&quot;&gt;🔗&lt;&#x2F;a&gt;Things to keep in mind.&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;normalize-your-network&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#normalize-your-network&quot; aria-label=&quot;Anchor link for: normalize-your-network&quot;&gt;🔗&lt;&#x2F;a&gt;Normalize your network&lt;&#x2F;h2&gt;
&lt;p&gt;First of all, do not invent IP&#x27;s, please use and
create a normalized range using the private ranges:
https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Classful_network#Introduction_of_address_classes&lt;&#x2F;p&gt;
&lt;p&gt;If you chose something like &lt;code&gt;10.0.0.0&#x2F;16&lt;&#x2F;code&gt; (class A),
create your segments in ascending order, for example for the
&lt;strong&gt;public&lt;&#x2F;strong&gt; segment (color yellow in the above image) in where instances can get an
[Elastic IP Address](http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AWSEC2&#x2F;latest&#x2F;UserGuide&#x2F;elastic-ip-addresses -eip.html)
create small segments, something like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;10.0.0.0&#x2F;24
&lt;&#x2F;span&gt;&lt;span&gt;10.0.1.0&#x2F;24
&lt;&#x2F;span&gt;&lt;span&gt;10.0.2.0&#x2F;24
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;mask 24 gives you 254 available IP&#x27;s&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;For the &lt;strong&gt;private&lt;&#x2F;strong&gt; segment (color green) in where instances need
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Network_address_translation&quot;&gt;NAT&lt;&#x2F;a&gt; you can crate
bigger segments (2046 hosts per segment):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;10.0.8.0&#x2F;21
&lt;&#x2F;span&gt;&lt;span&gt;10.0.16.0&#x2F;21
&lt;&#x2F;span&gt;&lt;span&gt;10.0.24.0&#x2F;21
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;blockquote&gt;
&lt;p&gt;mask 21 gives you 2046 available IP&#x27;s&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http:&#x2F;&#x2F;jodies.de&#x2F;ipcalc&quot;&gt;IPCalc&lt;&#x2F;a&gt; can help you get going while setting your network:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;$ brew install ipcalc
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;avoid-using-an-ssh-bastion-host&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#avoid-using-an-ssh-bastion-host&quot; aria-label=&quot;Anchor link for: avoid-using-an-ssh-bastion-host&quot;&gt;🔗&lt;&#x2F;a&gt;Avoid using an SSH Bastion Host&lt;&#x2F;h2&gt;
&lt;p&gt;If possible, the order of preference instead of having an instance listening for
ssh connection:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create a &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonVPC&#x2F;latest&#x2F;UserGuide&#x2F;VPC_VPN.html&quot;&gt;hardware VPN&lt;&#x2F;a&gt; between your office and AWS.&lt;&#x2F;li&gt;
&lt;li&gt;Use a VPN instance with &lt;a href=&quot;https:&#x2F;&#x2F;openvpn.net&#x2F;&quot;&gt;openvpn&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Layer_2_Tunneling_Protocol&quot;&gt;L2TP&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;If you still want to use a Bastion Host, at least chagne the default SSH port, or implement &lt;a href=&quot;&#x2F;post&#x2F;portknocking&#x2F;&quot;&gt;portknocking&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;To keep it short the whole point of this is security. If you are already setting
up a VPC, try to stick to it, the idea at the end is to have an infrastructure
capable of scaling and running your applications as easy as possible but keeping
in mind security.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nat-gateway&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#nat-gateway&quot; aria-label=&quot;Anchor link for: nat-gateway&quot;&gt;🔗&lt;&#x2F;a&gt;NAT GATEWAY&lt;&#x2F;h2&gt;
&lt;p&gt;You can only have NAT GATEWAY for all subnets, just be sure to attach it to the public segment.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;img&#x2F;nat-gateway-diagram.png&quot; alt=&quot;nat gateway&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;network-segments&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#network-segments&quot; aria-label=&quot;Anchor link for: network-segments&quot;&gt;🔗&lt;&#x2F;a&gt;Network segments&lt;&#x2F;h1&gt;
&lt;p&gt;Based on the &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AWSEC2&#x2F;latest&#x2F;UserGuide&#x2F;using-regions-availability-zones.html&quot;&gt;availability zones&lt;&#x2F;a&gt; (&lt;strong&gt;A-Z&lt;&#x2F;strong&gt;) the public segment is partitioned in small subnets of 255 hosts:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;public A segment &lt;code&gt;10.10.0.0&#x2F;24&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;public B segment &lt;code&gt;10.10.1.0&#x2F;24&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If you were using EU(Ireland) you could add a &lt;code&gt;public C&lt;&#x2F;code&gt; segment:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;public C segment &lt;code&gt;10.10.2.0&#x2F;24&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Within &lt;code&gt;10.10.0.0&#x2F;21&lt;&#x2F;code&gt; you can create up to 8 subnets of 254 hosts each (a, b, c, d, e, f, g, h) so it gives plenty of space for the public segment.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;private-segment&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#private-segment&quot; aria-label=&quot;Anchor link for: private-segment&quot;&gt;🔗&lt;&#x2F;a&gt;Private segment&lt;&#x2F;h2&gt;
&lt;p&gt;Same as the &lt;strong&gt;public&lt;&#x2F;strong&gt; segment the &lt;strong&gt;private&lt;&#x2F;strong&gt; segment is created based on the availability zones, with the main difference that segments are bigger (mask 21 - 2046 hosts), this is because  almost all the instances reside in the private segments.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;private A segment &lt;code&gt;10.10.8.0&#x2F;21&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;private B segment &lt;code&gt;10.10.16.0&#x2F;21&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;segments-based-on-the-availability-zones&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#segments-based-on-the-availability-zones&quot; aria-label=&quot;Anchor link for: segments-based-on-the-availability-zones&quot;&gt;🔗&lt;&#x2F;a&gt;Segments based on the availability zones&lt;&#x2F;h2&gt;
&lt;p&gt;When you create the subnets you are available to chose a &lt;code&gt;zone&lt;&#x2F;code&gt; or to chose &lt;code&gt;No preference&lt;&#x2F;code&gt; the idea in this case of specifying a zone is that when doing &lt;a href=&quot;https:&#x2F;&#x2F;aws.amazon.com&#x2F;autoscaling&#x2F;&quot;&gt;autoscaling&lt;&#x2F;a&gt; you can have more control and prevent in advance in case of a failure happens. For example you could create an Load balancer and attach 2 instances each in one zone (A, B) in case of a failure in zone A, you still having an instance in zone B so your application still up and running.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-public-and-private-segments&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#why-public-and-private-segments&quot; aria-label=&quot;Anchor link for: why-public-and-private-segments&quot;&gt;🔗&lt;&#x2F;a&gt;Why public and private segments&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;strong&gt;Public&lt;&#x2F;strong&gt; segments are the ones don&#x27;t use a &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AmazonVPC&#x2F;latest&#x2F;UserGuide&#x2F;vpc-nat-gateway.html&quot;&gt;NAT gateway&lt;&#x2F;a&gt; and need an &lt;a href=&quot;http:&#x2F;&#x2F;docs.aws.amazon.com&#x2F;AWSEC2&#x2F;latest&#x2F;UserGuide&#x2F;elastic-ip-addresses-eip.html&quot;&gt;elastic&#x2F;public IP&lt;&#x2F;a&gt; to be available to operate, therefore this segment is used for load balancer(ELB, HAproxy), vpn&#x2F;bastion hosts or instances that need to be exposed and reached directly outside the VPN.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Private&lt;&#x2F;strong&gt; segments require a NAT gateway and can not be reached from the outside, if you attach&#x2F;allocate a public IP to an instance located within the private segment, it simple will not work.&lt;&#x2F;p&gt;
&lt;p&gt;Some of the benefits with this approach:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Inherit security from VPC (no need to create multiple security groups).&lt;&#x2F;li&gt;
&lt;li&gt;Less use of elastic IP&#x27;s.&lt;&#x2F;li&gt;
&lt;li&gt;Common IP&#x27;s for all outgoing requests.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
</feed>
